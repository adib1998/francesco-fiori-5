var Ah=Object.defineProperty;var ec=e=>{throw TypeError(e)};var Rh=(e,t,r)=>t in e?Ah(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ae=(e,t,r)=>Rh(e,typeof t!="symbol"?t+"":t,r),Ri=(e,t,r)=>t.has(e)||ec("Cannot "+r);var I=(e,t,r)=>(Ri(e,t,"read from private field"),r?r.call(e):t.get(e)),te=(e,t,r)=>t.has(e)?ec("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),V=(e,t,r,s)=>(Ri(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),fe=(e,t,r)=>(Ri(e,t,"access private method"),r);var la=(e,t,r,s)=>({set _(a){V(e,t,a,r)},get _(){return I(e,t,s)}});import{j as n,P as Ce,c as $n,a as Ld,u as $e,B as Oh,b as vs,d as qa,e as pe,f as An,R as Fh,g as $o,h as yt,i as _h,D as qo,k as Mh,S as Lh,l as Bd,m as zd,n as $d,o as qd,F as Ud,p as Ua,O as Hd,q as Bh,C as Gd,r as zh,T as Vd,s as Wd,t as $h,L as Kd,v as Yd,w as Qd,x as qh,y as Uh}from"./ui-MAd2PbhX.js";import{b as qn,r as b,a as $,c as Zd,e as Hh}from"./vendor-_Xm0Mw1R.js";import{L as tc,u as Gh,a as Jd,b as Xd,B as Vh,R as Wh,c as Xt}from"./router-DgQSPZ0n.js";import{c as Kh,_ as wt}from"./supabase-BdrBm9fL.js";import{loadStripe as Yh}from"./stripe-Z1fX3C2C.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var eu,rc=qn;eu=rc.createRoot,rc.hydrateRoot;const Qh=1,Zh=1e6;let Oi=0;function Jh(){return Oi=(Oi+1)%Number.MAX_SAFE_INTEGER,Oi.toString()}const Fi=new Map,nc=e=>{if(Fi.has(e))return;const t=setTimeout(()=>{Fi.delete(e),fs({type:"REMOVE_TOAST",toastId:e})},Zh);Fi.set(e,t)},Xh=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Qh)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?nc(r):e.toasts.forEach(s=>{nc(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},va=[];let xa={toasts:[]};function fs(e){xa=Xh(xa,e),va.forEach(t=>{t(xa)})}function cs({...e}){const t=Jh(),r=a=>fs({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>fs({type:"DISMISS_TOAST",toastId:t});return fs({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:r}}function Ee(){const[e,t]=b.useState(xa);return b.useEffect(()=>(va.push(t),()=>{const r=va.indexOf(t);r>-1&&va.splice(r,1)}),[e]),{...e,toast:cs,dismiss:r=>fs({type:"DISMISS_TOAST",toastId:r})}}var tu=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),eg="VisuallyHidden",Ha=b.forwardRef((e,t)=>n.jsx(Ce.span,{...e,ref:t,style:{...tu,...e.style}}));Ha.displayName=eg;var tg=Ha,Uo="ToastProvider",[Ho,rg,ng]=Ld("Toast"),[ru,S2]=$n("Toast",[ng]),[sg,Ga]=ru(Uo),nu=e=>{const{__scopeToast:t,label:r="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=b.useState(null),[d,m]=b.useState(0),u=b.useRef(!1),f=b.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Uo}\`. Expected non-empty \`string\`.`),n.jsx(Ho.Provider,{scope:t,children:n.jsx(sg,{scope:t,label:r,duration:s,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:b.useCallback(()=>m(p=>p+1),[]),onToastRemove:b.useCallback(()=>m(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:f,children:o})})};nu.displayName=Uo;var su="ToastViewport",ag=["F8"],eo="toast.viewportPause",to="toast.viewportResume",au=b.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:s=ag,label:a="Notifications ({hotkey})",...i}=e,o=Ga(su,r),l=rg(r),c=b.useRef(null),d=b.useRef(null),m=b.useRef(null),u=b.useRef(null),f=$e(t,u,o.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),h=o.toastCount>0;b.useEffect(()=>{const x=v=>{var w;s.length!==0&&s.every(N=>v[N]||v.code===N)&&((w=u.current)==null||w.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[s]),b.useEffect(()=>{const x=c.current,v=u.current;if(h&&x&&v){const y=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(eo);v.dispatchEvent(C),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(to);v.dispatchEvent(C),o.isClosePausedRef.current=!1}},N=C=>{!x.contains(C.relatedTarget)&&w()},j=()=>{x.contains(document.activeElement)||w()};return x.addEventListener("focusin",y),x.addEventListener("focusout",N),x.addEventListener("pointermove",y),x.addEventListener("pointerleave",j),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{x.removeEventListener("focusin",y),x.removeEventListener("focusout",N),x.removeEventListener("pointermove",y),x.removeEventListener("pointerleave",j),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[h,o.isClosePausedRef]);const g=b.useCallback(({tabbingDirection:x})=>{const y=l().map(w=>{const N=w.ref.current,j=[N,...xg(N)];return x==="forwards"?j:j.reverse()});return(x==="forwards"?y.reverse():y).flat()},[l]);return b.useEffect(()=>{const x=u.current;if(x){const v=y=>{var j,C,P;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const S=document.activeElement,D=y.shiftKey;if(y.target===x&&D){(j=d.current)==null||j.focus();return}const E=g({tabbingDirection:D?"backwards":"forwards"}),k=E.findIndex(T=>T===S);_i(E.slice(k+1))?y.preventDefault():D?(C=d.current)==null||C.focus():(P=m.current)==null||P.focus()}};return x.addEventListener("keydown",v),()=>x.removeEventListener("keydown",v)}},[l,g]),n.jsxs(Oh,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:h?void 0:"none"},children:[h&&n.jsx(ro,{ref:d,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"forwards"});_i(x)}}),n.jsx(Ho.Slot,{scope:r,children:n.jsx(Ce.ol,{tabIndex:-1,...i,ref:f})}),h&&n.jsx(ro,{ref:m,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"backwards"});_i(x)}})]})});au.displayName=su;var iu="ToastFocusProxy",ro=b.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...a}=e,i=Ga(iu,r);return n.jsx(Ha,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&s()}})});ro.displayName=iu;var Ms="Toast",ig="toast.swipeStart",og="toast.swipeMove",lg="toast.swipeCancel",cg="toast.swipeEnd",ou=b.forwardRef((e,t)=>{const{forceMount:r,open:s,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=vs({prop:s,defaultProp:a??!0,onChange:i,caller:Ms});return n.jsx(qa,{present:r||l,children:n.jsx(mg,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:An(e.onPause),onResume:An(e.onResume),onSwipeStart:pe(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(e.onSwipeMove,d=>{const{x:m,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:pe(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(e.onSwipeEnd,d=>{const{x:m,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),c(!1)})})})});ou.displayName=Ms;var[dg,ug]=ru(Ms,{onClose(){}}),mg=b.forwardRef((e,t)=>{const{__scopeToast:r,type:s="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:m,onSwipeMove:u,onSwipeCancel:f,onSwipeEnd:p,...h}=e,g=Ga(Ms,r),[x,v]=b.useState(null),y=$e(t,T=>v(T)),w=b.useRef(null),N=b.useRef(null),j=a||g.duration,C=b.useRef(0),P=b.useRef(j),S=b.useRef(0),{onToastAdd:D,onToastRemove:A}=g,R=An(()=>{var _;(x==null?void 0:x.contains(document.activeElement))&&((_=g.viewport)==null||_.focus()),o()}),E=b.useCallback(T=>{!T||T===1/0||(window.clearTimeout(S.current),C.current=new Date().getTime(),S.current=window.setTimeout(R,T))},[R]);b.useEffect(()=>{const T=g.viewport;if(T){const _=()=>{E(P.current),d==null||d()},M=()=>{const O=new Date().getTime()-C.current;P.current=P.current-O,window.clearTimeout(S.current),c==null||c()};return T.addEventListener(eo,M),T.addEventListener(to,_),()=>{T.removeEventListener(eo,M),T.removeEventListener(to,_)}}},[g.viewport,j,c,d,E]),b.useEffect(()=>{i&&!g.isClosePausedRef.current&&E(j)},[i,j,g.isClosePausedRef,E]),b.useEffect(()=>(D(),()=>A()),[D,A]);const k=b.useMemo(()=>x?pu(x):null,[x]);return g.viewport?n.jsxs(n.Fragment,{children:[k&&n.jsx(fg,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),n.jsx(dg,{scope:r,onClose:R,children:qn.createPortal(n.jsx(Ho.ItemSlot,{scope:r,children:n.jsx(Fh,{asChild:!0,onEscapeKeyDown:pe(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||R(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(Ce.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...h,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:pe(e.onKeyDown,T=>{T.key==="Escape"&&(l==null||l(T.nativeEvent),T.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:pe(e.onPointerDown,T=>{T.button===0&&(w.current={x:T.clientX,y:T.clientY})}),onPointerMove:pe(e.onPointerMove,T=>{if(!w.current)return;const _=T.clientX-w.current.x,M=T.clientY-w.current.y,O=!!N.current,F=["left","right"].includes(g.swipeDirection),B=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,W=F?B(0,_):0,K=F?0:B(0,M),G=T.pointerType==="touch"?10:2,ee={x:W,y:K},Q={originalEvent:T,delta:ee};O?(N.current=ee,ca(og,u,Q,{discrete:!1})):sc(ee,g.swipeDirection,G)?(N.current=ee,ca(ig,m,Q,{discrete:!1}),T.target.setPointerCapture(T.pointerId)):(Math.abs(_)>G||Math.abs(M)>G)&&(w.current=null)}),onPointerUp:pe(e.onPointerUp,T=>{const _=N.current,M=T.target;if(M.hasPointerCapture(T.pointerId)&&M.releasePointerCapture(T.pointerId),N.current=null,w.current=null,_){const O=T.currentTarget,F={originalEvent:T,delta:_};sc(_,g.swipeDirection,g.swipeThreshold)?ca(cg,p,F,{discrete:!0}):ca(lg,f,F,{discrete:!0}),O.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),fg=e=>{const{__scopeToast:t,children:r,...s}=e,a=Ga(Ms,t),[i,o]=b.useState(!1),[l,c]=b.useState(!1);return gg(()=>o(!0)),b.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:n.jsx($o,{asChild:!0,children:n.jsx(Ha,{...s,children:i&&n.jsxs(n.Fragment,{children:[a.label," ",r]})})})},pg="ToastTitle",lu=b.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(Ce.div,{...s,ref:t})});lu.displayName=pg;var hg="ToastDescription",cu=b.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(Ce.div,{...s,ref:t})});cu.displayName=hg;var du="ToastAction",uu=b.forwardRef((e,t)=>{const{altText:r,...s}=e;return r.trim()?n.jsx(fu,{altText:r,asChild:!0,children:n.jsx(Go,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${du}\`. Expected non-empty \`string\`.`),null)});uu.displayName=du;var mu="ToastClose",Go=b.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e,a=ug(mu,r);return n.jsx(fu,{asChild:!0,children:n.jsx(Ce.button,{type:"button",...s,ref:t,onClick:pe(e.onClick,a.onClose)})})});Go.displayName=mu;var fu=b.forwardRef((e,t)=>{const{__scopeToast:r,altText:s,...a}=e;return n.jsx(Ce.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function pu(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),vg(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=s.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...pu(s))}}),t}function ca(e,t,r,{discrete:s}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?_h(a,i):a.dispatchEvent(i)}var sc=(e,t,r=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),i=s>a;return t==="left"||t==="right"?i&&s>r:!i&&a>r};function gg(e=()=>{}){const t=An(e);yt(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[t])}function vg(e){return e.nodeType===e.ELEMENT_NODE}function xg(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function _i(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var bg=nu,hu=au,gu=ou,vu=lu,xu=cu,bu=uu,yu=Go;function wu(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=wu(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Nu(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=wu(e))&&(s&&(s+=" "),s+=t);return s}const ac=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,ic=Nu,Va=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return ic(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const m=r==null?void 0:r[d],u=i==null?void 0:i[d];if(m===null)return null;const f=ac(m)||ac(u);return a[d][f]}),l=r&&Object.entries(r).reduce((d,m)=>{let[u,f]=m;return f===void 0||(d[u]=f),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,m)=>{let{class:u,className:f,...p}=m;return Object.entries(p).every(h=>{let[g,x]=h;return Array.isArray(x)?x.includes({...i,...l}[g]):{...i,...l}[g]===x})?[...d,u,f]:d},[]);return ic(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),re=(e,t)=>{const r=b.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},m)=>b.createElement("svg",{ref:m,...yg,width:a,height:a,stroke:s,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${wg(e)}`,l].join(" "),...d},[...t.map(([u,f])=>b.createElement(u,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=re("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=re("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=re("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=re("Flower2",[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=re("Flower",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5",key:"14wa3c"}],["path",{d:"M12 7.5V9",key:"1oy5b0"}],["path",{d:"M7.5 12H9",key:"eltsq1"}],["path",{d:"M16.5 12H15",key:"vk5kw4"}],["path",{d:"M12 16.5V15",key:"k7eayi"}],["path",{d:"m8 8 1.88 1.88",key:"nxy4qf"}],["path",{d:"M14.12 9.88 16 8",key:"1lst6k"}],["path",{d:"m8 16 1.88-1.88",key:"h2eex1"}],["path",{d:"M14.12 14.12 16 16",key:"uqkrx3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=re("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=re("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=re("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=re("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=re("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=re("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=re("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=re("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=re("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=re("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=re("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=re("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=re("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=re("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=re("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=re("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=re("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=re("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=re("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=re("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=re("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=re("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Qo="-",Rg=e=>{const t=Fg(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{const l=o.split(Qo);return l[0]===""&&l.length!==1&&l.shift(),Mu(l,t)||Og(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&s[o]?[...c,...s[o]]:c}}},Mu=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),a=s?Mu(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Qo);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},oc=/^\[(.+)\]$/,Og=e=>{if(oc.test(e)){const t=oc.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Fg=e=>{const{theme:t,prefix:r}=e,s={nextPart:new Map,validators:[]};return Mg(Object.entries(e.classGroups),r).forEach(([i,o])=>{io(o,s,i,t)}),s},io=(e,t,r,s)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:lc(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(_g(a)){io(a(s),t,r,s);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{io(o,lc(t,i),r,s)})})},lc=(e,t)=>{let r=e;return t.split(Qo).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},_g=e=>e.isThemeGetter,Mg=(e,t)=>t?e.map(([r,s])=>{const a=s.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,Lg=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,s=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},Lu="!",Bg=e=>{const{separator:t,experimentalParseClassName:r}=e,s=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,m=0,u;for(let x=0;x<l.length;x++){let v=l[x];if(d===0){if(v===a&&(s||l.slice(x,x+i)===t)){c.push(l.slice(m,x)),m=x+i;continue}if(v==="/"){u=x;continue}}v==="["?d++:v==="]"&&d--}const f=c.length===0?l:l.substring(m),p=f.startsWith(Lu),h=p?f.substring(1):f,g=u&&u>m?u-m:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},zg=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(s=>{s[0]==="["?(t.push(...r.sort(),s),r=[]):r.push(s)}),t.push(...r.sort()),t},$g=e=>({cache:Lg(e.cacheSize),parseClassName:Bg(e),...Rg(e)}),qg=/\s+/,Ug=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(qg);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:m,hasImportantModifier:u,baseClassName:f,maybePostfixModifierPosition:p}=r(d);let h=!!p,g=s(h?f.substring(0,p):f);if(!g){if(!h){l=d+(l.length>0?" "+l:l);continue}if(g=s(f),!g){l=d+(l.length>0?" "+l:l);continue}h=!1}const x=zg(m).join(":"),v=u?x+Lu:x,y=v+g;if(i.includes(y))continue;i.push(y);const w=a(g,h);for(let N=0;N<w.length;++N){const j=w[N];i.push(v+j)}l=d+(l.length>0?" "+l:l)}return l};function Hg(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Bu(t))&&(s&&(s+=" "),s+=r);return s}const Bu=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=Bu(e[s]))&&(r&&(r+=" "),r+=t);return r};function Gg(e,...t){let r,s,a,i=o;function o(c){const d=t.reduce((m,u)=>u(m),e());return r=$g(d),s=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=s(c);if(d)return d;const m=Ug(c,r);return a(c,m),m}return function(){return i(Hg.apply(null,arguments))}}const Re=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},zu=/^\[(?:([a-z-]+):)?(.+)\]$/i,Vg=/^\d+\/\d+$/,Wg=new Set(["px","full","screen"]),Kg=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Yg=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Qg=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Zg=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Jg=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,er=e=>vn(e)||Wg.has(e)||Vg.test(e),fr=e=>Vn(e,"length",iv),vn=e=>!!e&&!Number.isNaN(Number(e)),Mi=e=>Vn(e,"number",vn),ss=e=>!!e&&Number.isInteger(Number(e)),Xg=e=>e.endsWith("%")&&vn(e.slice(0,-1)),ue=e=>zu.test(e),pr=e=>Kg.test(e),ev=new Set(["length","size","percentage"]),tv=e=>Vn(e,ev,$u),rv=e=>Vn(e,"position",$u),nv=new Set(["image","url"]),sv=e=>Vn(e,nv,lv),av=e=>Vn(e,"",ov),as=()=>!0,Vn=(e,t,r)=>{const s=zu.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):r(s[2]):!1},iv=e=>Yg.test(e)&&!Qg.test(e),$u=()=>!1,ov=e=>Zg.test(e),lv=e=>Jg.test(e),cv=()=>{const e=Re("colors"),t=Re("spacing"),r=Re("blur"),s=Re("brightness"),a=Re("borderColor"),i=Re("borderRadius"),o=Re("borderSpacing"),l=Re("borderWidth"),c=Re("contrast"),d=Re("grayscale"),m=Re("hueRotate"),u=Re("invert"),f=Re("gap"),p=Re("gradientColorStops"),h=Re("gradientColorStopPositions"),g=Re("inset"),x=Re("margin"),v=Re("opacity"),y=Re("padding"),w=Re("saturate"),N=Re("scale"),j=Re("sepia"),C=Re("skew"),P=Re("space"),S=Re("translate"),D=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",ue,t],E=()=>[ue,t],k=()=>["",er,fr],T=()=>["auto",vn,ue],_=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",ue],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[vn,ue];return{cacheSize:500,separator:":",theme:{colors:[as],spacing:[er,fr],blur:["none","",pr,ue],brightness:K(),borderColor:[e],borderRadius:["none","","full",pr,ue],borderSpacing:E(),borderWidth:k(),contrast:K(),grayscale:B(),hueRotate:K(),invert:B(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[Xg,fr],inset:R(),margin:R(),opacity:K(),padding:E(),saturate:K(),scale:K(),sepia:B(),skew:K(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",ue]}],container:["container"],columns:[{columns:[pr]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[..._(),ue]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ss,ue]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ue]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",ss,ue]}],"grid-cols":[{"grid-cols":[as]}],"col-start-end":[{col:["auto",{span:["full",ss,ue]},ue]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[as]}],"row-start-end":[{row:["auto",{span:[ss,ue]},ue]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ue]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ue,t]}],"min-w":[{"min-w":[ue,t,"min","max","fit"]}],"max-w":[{"max-w":[ue,t,"none","full","min","max","fit","prose",{screen:[pr]},pr]}],h:[{h:[ue,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ue,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ue,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ue,t,"auto","min","max","fit"]}],"font-size":[{text:["base",pr,fr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Mi]}],"font-family":[{font:[as]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ue]}],"line-clamp":[{"line-clamp":["none",vn,Mi]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",er,ue]}],"list-image":[{"list-image":["none",ue]}],"list-style-type":[{list:["none","disc","decimal",ue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...M(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",er,fr]}],"underline-offset":[{"underline-offset":["auto",er,ue]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[..._(),rv]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",tv]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},sv]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[h]}],"gradient-via-pos":[{via:[h]}],"gradient-to-pos":[{to:[h]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...M(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:M()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...M()]}],"outline-offset":[{"outline-offset":[er,ue]}],"outline-w":[{outline:[er,fr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[er,fr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",pr,av]}],"shadow-color":[{shadow:[as]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",pr,ue]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[u]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ue]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",ue]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",ue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[ss,ue]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ue]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ue]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ue]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[er,fr,Mi]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},dv=Gg(cv);function de(...e){return dv(Nu(e))}const uv=bg,qu=b.forwardRef(({className:e,...t},r)=>n.jsx(hu,{ref:r,className:de("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));qu.displayName=hu.displayName;const mv=Va("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Uu=b.forwardRef(({className:e,variant:t,...r},s)=>n.jsx(gu,{ref:s,className:de(mv({variant:t}),e),...r}));Uu.displayName=gu.displayName;const fv=b.forwardRef(({className:e,...t},r)=>n.jsx(bu,{ref:r,className:de("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));fv.displayName=bu.displayName;const Hu=b.forwardRef(({className:e,...t},r)=>n.jsx(yu,{ref:r,className:de("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(Kt,{className:"h-4 w-4"})}));Hu.displayName=yu.displayName;const Gu=b.forwardRef(({className:e,...t},r)=>n.jsx(vu,{ref:r,className:de("text-sm font-semibold",e),...t}));Gu.displayName=vu.displayName;const Vu=b.forwardRef(({className:e,...t},r)=>n.jsx(xu,{ref:r,className:de("text-sm opacity-90",e),...t}));Vu.displayName=xu.displayName;function pv(){const{toasts:e}=Ee();return n.jsxs(uv,{children:[e.map(function({id:t,title:r,description:s,action:a,...i}){return n.jsxs(Uu,{...i,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(Gu,{children:r}),s&&n.jsx(Vu,{children:s})]}),a,n.jsx(Hu,{})]},t)}),n.jsx(qu,{})]})}const hv=b.createContext(void 0),gv={setTheme:e=>{},themes:[]},vv=()=>{var e;return(e=b.useContext(hv))!==null&&e!==void 0?e:gv};var xv=e=>{switch(e){case"success":return wv;case"info":return jv;case"warning":return Nv;case"error":return Sv;default:return null}},bv=Array(12).fill(0),yv=({visible:e,className:t})=>$.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},$.createElement("div",{className:"sonner-spinner"},bv.map((r,s)=>$.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),wv=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Nv=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),jv=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Sv=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Cv=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Ev=()=>{let[e,t]=$.useState(document.hidden);return $.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},oo=1,Pv=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:oo++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...s,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0,i,o=s.then(async c=>{if(i=["resolve",c],$.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(Dv(c)&&!c.ok){a=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,m=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:d,description:m})}else if(t.success!==void 0){a=!1;let d=typeof t.success=="function"?await t.success(c):t.success,m=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:d,description:m})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let d=typeof t.error=="function"?await t.error(c):t.error,m=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:d,description:m})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>o.then(()=>i[0]==="reject"?d(i[1]):c(i[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||oo++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ot=new Pv,Iv=(e,t)=>{let r=(t==null?void 0:t.id)||oo++;return ot.addToast({title:e,...t,id:r}),r},Dv=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Tv=Iv,kv=()=>ot.toasts,Av=()=>ot.getActiveToasts();Object.assign(Tv,{success:ot.success,info:ot.info,warning:ot.warning,error:ot.error,custom:ot.custom,message:ot.message,promise:ot.promise,dismiss:ot.dismiss,loading:ot.loading},{getHistory:kv,getToasts:Av});function Rv(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}Rv(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function da(e){return e.label!==void 0}var Ov=3,Fv="32px",_v="16px",cc=4e3,Mv=356,Lv=14,Bv=20,zv=200;function Dt(...e){return e.filter(Boolean).join(" ")}function $v(e){let[t,r]=e.split("-"),s=[];return t&&s.push(t),r&&s.push(r),s}var qv=e=>{var t,r,s,a,i,o,l,c,d,m,u;let{invert:f,toast:p,unstyled:h,interacting:g,setHeights:x,visibleToasts:v,heights:y,index:w,toasts:N,expanded:j,removeToast:C,defaultRichColors:P,closeButton:S,style:D,cancelButtonStyle:A,actionButtonStyle:R,className:E="",descriptionClassName:k="",duration:T,position:_,gap:M,loadingIcon:O,expandByDefault:F,classNames:B,icons:W,closeButtonAriaLabel:K="Close toast",pauseWhenPageIsHidden:G}=e,[ee,Q]=$.useState(null),[me,Ie]=$.useState(null),[q,ne]=$.useState(!1),[ve,J]=$.useState(!1),[Y,U]=$.useState(!1),[ae,he]=$.useState(!1),[Te,Oe]=$.useState(!1),[Le,Ze]=$.useState(0),[Be,rt]=$.useState(0),Nt=$.useRef(p.duration||T||cc),fn=$.useRef(null),jt=$.useRef(null),na=w===0,sa=w+1<=v,nt=p.type,Jt=p.dismissible!==!1,Di=p.className||"",ts=p.descriptionClassName||"",St=$.useMemo(()=>y.findIndex(le=>le.toastId===p.id)||0,[y,p.id]),rs=$.useMemo(()=>{var le;return(le=p.closeButton)!=null?le:S},[p.closeButton,S]),pn=$.useMemo(()=>p.duration||T||cc,[p.duration,T]),lr=$.useRef(0),cr=$.useRef(0),aa=$.useRef(0),dr=$.useRef(null),[Ti,ki]=_.split("-"),ns=$.useMemo(()=>y.reduce((le,je,ke)=>ke>=St?le:le+je.height,0),[y,St]),ia=Ev(),oa=p.invert||f,hn=nt==="loading";cr.current=$.useMemo(()=>St*M+ns,[St,ns]),$.useEffect(()=>{Nt.current=pn},[pn]),$.useEffect(()=>{ne(!0)},[]),$.useEffect(()=>{let le=jt.current;if(le){let je=le.getBoundingClientRect().height;return rt(je),x(ke=>[{toastId:p.id,height:je,position:p.position},...ke]),()=>x(ke=>ke.filter(Et=>Et.toastId!==p.id))}},[x,p.id]),$.useLayoutEffect(()=>{if(!q)return;let le=jt.current,je=le.style.height;le.style.height="auto";let ke=le.getBoundingClientRect().height;le.style.height=je,rt(ke),x(Et=>Et.find(Pt=>Pt.toastId===p.id)?Et.map(Pt=>Pt.toastId===p.id?{...Pt,height:ke}:Pt):[{toastId:p.id,height:ke,position:p.position},...Et])},[q,p.title,p.description,x,p.id]);let Ct=$.useCallback(()=>{J(!0),Ze(cr.current),x(le=>le.filter(je=>je.toastId!==p.id)),setTimeout(()=>{C(p)},zv)},[p,C,x,cr]);$.useEffect(()=>{if(p.promise&&nt==="loading"||p.duration===1/0||p.type==="loading")return;let le;return j||g||G&&ia?(()=>{if(aa.current<lr.current){let je=new Date().getTime()-lr.current;Nt.current=Nt.current-je}aa.current=new Date().getTime()})():Nt.current!==1/0&&(lr.current=new Date().getTime(),le=setTimeout(()=>{var je;(je=p.onAutoClose)==null||je.call(p,p),Ct()},Nt.current)),()=>clearTimeout(le)},[j,g,p,nt,G,ia,Ct]),$.useEffect(()=>{p.delete&&Ct()},[Ct,p.delete]);function Ai(){var le,je,ke;return W!=null&&W.loading?$.createElement("div",{className:Dt(B==null?void 0:B.loader,(le=p==null?void 0:p.classNames)==null?void 0:le.loader,"sonner-loader"),"data-visible":nt==="loading"},W.loading):O?$.createElement("div",{className:Dt(B==null?void 0:B.loader,(je=p==null?void 0:p.classNames)==null?void 0:je.loader,"sonner-loader"),"data-visible":nt==="loading"},O):$.createElement(yv,{className:Dt(B==null?void 0:B.loader,(ke=p==null?void 0:p.classNames)==null?void 0:ke.loader),visible:nt==="loading"})}return $.createElement("li",{tabIndex:0,ref:jt,className:Dt(E,Di,B==null?void 0:B.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,B==null?void 0:B.default,B==null?void 0:B[nt],(r=p==null?void 0:p.classNames)==null?void 0:r[nt]),"data-sonner-toast":"","data-rich-colors":(s=p.richColors)!=null?s:P,"data-styled":!(p.jsx||p.unstyled||h),"data-mounted":q,"data-promise":!!p.promise,"data-swiped":Te,"data-removed":ve,"data-visible":sa,"data-y-position":Ti,"data-x-position":ki,"data-index":w,"data-front":na,"data-swiping":Y,"data-dismissible":Jt,"data-type":nt,"data-invert":oa,"data-swipe-out":ae,"data-swipe-direction":me,"data-expanded":!!(j||F&&q),style:{"--index":w,"--toasts-before":w,"--z-index":N.length-w,"--offset":`${ve?Le:cr.current}px`,"--initial-height":F?"auto":`${Be}px`,...D,...p.style},onDragEnd:()=>{U(!1),Q(null),dr.current=null},onPointerDown:le=>{hn||!Jt||(fn.current=new Date,Ze(cr.current),le.target.setPointerCapture(le.pointerId),le.target.tagName!=="BUTTON"&&(U(!0),dr.current={x:le.clientX,y:le.clientY}))},onPointerUp:()=>{var le,je,ke,Et;if(ae||!Jt)return;dr.current=null;let Pt=Number(((le=jt.current)==null?void 0:le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ur=Number(((je=jt.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),$r=new Date().getTime()-((ke=fn.current)==null?void 0:ke.getTime()),It=ee==="x"?Pt:ur,mr=Math.abs(It)/$r;if(Math.abs(It)>=Bv||mr>.11){Ze(cr.current),(Et=p.onDismiss)==null||Et.call(p,p),Ie(ee==="x"?Pt>0?"right":"left":ur>0?"down":"up"),Ct(),he(!0),Oe(!1);return}U(!1),Q(null)},onPointerMove:le=>{var je,ke,Et,Pt;if(!dr.current||!Jt||((je=window.getSelection())==null?void 0:je.toString().length)>0)return;let ur=le.clientY-dr.current.y,$r=le.clientX-dr.current.x,It=(ke=e.swipeDirections)!=null?ke:$v(_);!ee&&(Math.abs($r)>1||Math.abs(ur)>1)&&Q(Math.abs($r)>Math.abs(ur)?"x":"y");let mr={x:0,y:0};ee==="y"?(It.includes("top")||It.includes("bottom"))&&(It.includes("top")&&ur<0||It.includes("bottom")&&ur>0)&&(mr.y=ur):ee==="x"&&(It.includes("left")||It.includes("right"))&&(It.includes("left")&&$r<0||It.includes("right")&&$r>0)&&(mr.x=$r),(Math.abs(mr.x)>0||Math.abs(mr.y)>0)&&Oe(!0),(Et=jt.current)==null||Et.style.setProperty("--swipe-amount-x",`${mr.x}px`),(Pt=jt.current)==null||Pt.style.setProperty("--swipe-amount-y",`${mr.y}px`)}},rs&&!p.jsx?$.createElement("button",{"aria-label":K,"data-disabled":hn,"data-close-button":!0,onClick:hn||!Jt?()=>{}:()=>{var le;Ct(),(le=p.onDismiss)==null||le.call(p,p)},className:Dt(B==null?void 0:B.closeButton,(a=p==null?void 0:p.classNames)==null?void 0:a.closeButton)},(i=W==null?void 0:W.close)!=null?i:Cv):null,p.jsx||b.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:$.createElement($.Fragment,null,nt||p.icon||p.promise?$.createElement("div",{"data-icon":"",className:Dt(B==null?void 0:B.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Ai():null,p.type!=="loading"?p.icon||(W==null?void 0:W[nt])||xv(nt):null):null,$.createElement("div",{"data-content":"",className:Dt(B==null?void 0:B.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},$.createElement("div",{"data-title":"",className:Dt(B==null?void 0:B.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?$.createElement("div",{"data-description":"",className:Dt(k,ts,B==null?void 0:B.description,(d=p==null?void 0:p.classNames)==null?void 0:d.description)},typeof p.description=="function"?p.description():p.description):null),b.isValidElement(p.cancel)?p.cancel:p.cancel&&da(p.cancel)?$.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||A,onClick:le=>{var je,ke;da(p.cancel)&&Jt&&((ke=(je=p.cancel).onClick)==null||ke.call(je,le),Ct())},className:Dt(B==null?void 0:B.cancelButton,(m=p==null?void 0:p.classNames)==null?void 0:m.cancelButton)},p.cancel.label):null,b.isValidElement(p.action)?p.action:p.action&&da(p.action)?$.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||R,onClick:le=>{var je,ke;da(p.action)&&((ke=(je=p.action).onClick)==null||ke.call(je,le),!le.defaultPrevented&&Ct())},className:Dt(B==null?void 0:B.actionButton,(u=p==null?void 0:p.classNames)==null?void 0:u.actionButton)},p.action.label):null))};function dc(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Uv(e,t){let r={};return[e,t].forEach((s,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?_v:Fv;function c(d){["top","right","bottom","left"].forEach(m=>{r[`${o}-${m}`]=typeof d=="number"?`${d}px`:d})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(d=>{s[d]===void 0?r[`${o}-${d}`]=l:r[`${o}-${d}`]=typeof s[d]=="number"?`${s[d]}px`:s[d]}):c(l)}),r}var Hv=b.forwardRef(function(e,t){let{invert:r,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:d,theme:m="light",richColors:u,duration:f,style:p,visibleToasts:h=Ov,toastOptions:g,dir:x=dc(),gap:v=Lv,loadingIcon:y,icons:w,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:j}=e,[C,P]=$.useState([]),S=$.useMemo(()=>Array.from(new Set([s].concat(C.filter(G=>G.position).map(G=>G.position)))),[C,s]),[D,A]=$.useState([]),[R,E]=$.useState(!1),[k,T]=$.useState(!1),[_,M]=$.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=$.useRef(null),F=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),B=$.useRef(null),W=$.useRef(!1),K=$.useCallback(G=>{P(ee=>{var Q;return(Q=ee.find(me=>me.id===G.id))!=null&&Q.delete||ot.dismiss(G.id),ee.filter(({id:me})=>me!==G.id)})},[]);return $.useEffect(()=>ot.subscribe(G=>{if(G.dismiss){P(ee=>ee.map(Q=>Q.id===G.id?{...Q,delete:!0}:Q));return}setTimeout(()=>{Zd.flushSync(()=>{P(ee=>{let Q=ee.findIndex(me=>me.id===G.id);return Q!==-1?[...ee.slice(0,Q),{...ee[Q],...G},...ee.slice(Q+1)]:[G,...ee]})})})}),[]),$.useEffect(()=>{if(m!=="system"){M(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?M("dark"):M("light")),typeof window>"u")return;let G=window.matchMedia("(prefers-color-scheme: dark)");try{G.addEventListener("change",({matches:ee})=>{M(ee?"dark":"light")})}catch{G.addListener(({matches:Q})=>{try{M(Q?"dark":"light")}catch(me){console.error(me)}})}},[m]),$.useEffect(()=>{C.length<=1&&E(!1)},[C]),$.useEffect(()=>{let G=ee=>{var Q,me;a.every(Ie=>ee[Ie]||ee.code===Ie)&&(E(!0),(Q=O.current)==null||Q.focus()),ee.code==="Escape"&&(document.activeElement===O.current||(me=O.current)!=null&&me.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",G),()=>document.removeEventListener("keydown",G)},[a]),$.useEffect(()=>{if(O.current)return()=>{B.current&&(B.current.focus({preventScroll:!0}),B.current=null,W.current=!1)}},[O.current]),$.createElement("section",{ref:t,"aria-label":`${N} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((G,ee)=>{var Q;let[me,Ie]=G.split("-");return C.length?$.createElement("ol",{key:G,dir:x==="auto"?dc():x,tabIndex:-1,ref:O,className:l,"data-sonner-toaster":!0,"data-theme":_,"data-y-position":me,"data-lifted":R&&C.length>1&&!i,"data-x-position":Ie,style:{"--front-toast-height":`${((Q=D[0])==null?void 0:Q.height)||0}px`,"--width":`${Mv}px`,"--gap":`${v}px`,...p,...Uv(c,d)},onBlur:q=>{W.current&&!q.currentTarget.contains(q.relatedTarget)&&(W.current=!1,B.current&&(B.current.focus({preventScroll:!0}),B.current=null))},onFocus:q=>{q.target instanceof HTMLElement&&q.target.dataset.dismissible==="false"||W.current||(W.current=!0,B.current=q.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{k||E(!1)},onDragEnd:()=>E(!1),onPointerDown:q=>{q.target instanceof HTMLElement&&q.target.dataset.dismissible==="false"||T(!0)},onPointerUp:()=>T(!1)},C.filter(q=>!q.position&&ee===0||q.position===G).map((q,ne)=>{var ve,J;return $.createElement(qv,{key:q.id,icons:w,index:ne,toast:q,defaultRichColors:u,duration:(ve=g==null?void 0:g.duration)!=null?ve:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:h,closeButton:(J=g==null?void 0:g.closeButton)!=null?J:o,interacting:k,position:G,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:K,toasts:C.filter(Y=>Y.position==q.position),heights:D.filter(Y=>Y.position==q.position),setHeights:A,expandByDefault:i,gap:v,loadingIcon:y,expanded:R,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const Gv=({...e})=>{const{theme:t="system"}=vv();return n.jsx(Hv,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},Vv=["top","right","bottom","left"],Rr=Math.min,dt=Math.max,Sa=Math.round,ua=Math.floor,Gt=e=>({x:e,y:e}),Wv={left:"right",right:"left",bottom:"top",top:"bottom"},Kv={start:"end",end:"start"};function lo(e,t,r){return dt(e,Rr(t,r))}function ir(e,t){return typeof e=="function"?e(t):e}function or(e){return e.split("-")[0]}function Wn(e){return e.split("-")[1]}function Zo(e){return e==="x"?"y":"x"}function Jo(e){return e==="y"?"height":"width"}function Ht(e){return["top","bottom"].includes(or(e))?"y":"x"}function Xo(e){return Zo(Ht(e))}function Yv(e,t,r){r===void 0&&(r=!1);const s=Wn(e),a=Xo(e),i=Jo(a);let o=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Ca(o)),[o,Ca(o)]}function Qv(e){const t=Ca(e);return[co(e),t,co(t)]}function co(e){return e.replace(/start|end/g,t=>Kv[t])}function Zv(e,t,r){const s=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:s:t?s:a;case"left":case"right":return t?i:o;default:return[]}}function Jv(e,t,r,s){const a=Wn(e);let i=Zv(or(e),r==="start",s);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(co)))),i}function Ca(e){return e.replace(/left|right|bottom|top/g,t=>Wv[t])}function Xv(e){return{top:0,right:0,bottom:0,left:0,...e}}function Wu(e){return typeof e!="number"?Xv(e):{top:e,right:e,bottom:e,left:e}}function Ea(e){const{x:t,y:r,width:s,height:a}=e;return{width:s,height:a,top:r,left:t,right:t+s,bottom:r+a,x:t,y:r}}function uc(e,t,r){let{reference:s,floating:a}=e;const i=Ht(t),o=Xo(t),l=Jo(o),c=or(t),d=i==="y",m=s.x+s.width/2-a.width/2,u=s.y+s.height/2-a.height/2,f=s[l]/2-a[l]/2;let p;switch(c){case"top":p={x:m,y:s.y-a.height};break;case"bottom":p={x:m,y:s.y+s.height};break;case"right":p={x:s.x+s.width,y:u};break;case"left":p={x:s.x-a.width,y:u};break;default:p={x:s.x,y:s.y}}switch(Wn(t)){case"start":p[o]-=f*(r&&d?-1:1);break;case"end":p[o]+=f*(r&&d?-1:1);break}return p}const ex=async(e,t,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:m,y:u}=uc(d,s,c),f=s,p={},h=0;for(let g=0;g<l.length;g++){const{name:x,fn:v}=l[g],{x:y,y:w,data:N,reset:j}=await v({x:m,y:u,initialPlacement:s,placement:f,strategy:a,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:t}});m=y??m,u=w??u,p={...p,[x]:{...p[x],...N}},j&&h<=50&&(h++,typeof j=="object"&&(j.placement&&(f=j.placement),j.rects&&(d=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:m,y:u}=uc(d,f,c)),g=-1)}return{x:m,y:u,placement:f,strategy:a,middlewareData:p}};async function ys(e,t){var r;t===void 0&&(t={});const{x:s,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:u="floating",altBoundary:f=!1,padding:p=0}=ir(t,e),h=Wu(p),x=l[f?u==="floating"?"reference":"floating":u],v=Ea(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(x)))==null||r?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:m,strategy:c})),y=u==="floating"?{x:s,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),N=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=Ea(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:w,strategy:c}):y);return{top:(v.top-j.top+h.top)/N.y,bottom:(j.bottom-v.bottom+h.bottom)/N.y,left:(v.left-j.left+h.left)/N.x,right:(j.right-v.right+h.right)/N.x}}const tx=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:s,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:m=0}=ir(e,t)||{};if(d==null)return{};const u=Wu(m),f={x:r,y:s},p=Xo(a),h=Jo(p),g=await o.getDimensions(d),x=p==="y",v=x?"top":"left",y=x?"bottom":"right",w=x?"clientHeight":"clientWidth",N=i.reference[h]+i.reference[p]-f[p]-i.floating[h],j=f[p]-i.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let P=C?C[w]:0;(!P||!await(o.isElement==null?void 0:o.isElement(C)))&&(P=l.floating[w]||i.floating[h]);const S=N/2-j/2,D=P/2-g[h]/2-1,A=Rr(u[v],D),R=Rr(u[y],D),E=A,k=P-g[h]-R,T=P/2-g[h]/2+S,_=lo(E,T,k),M=!c.arrow&&Wn(a)!=null&&T!==_&&i.reference[h]/2-(T<E?A:R)-g[h]/2<0,O=M?T<E?T-E:T-k:0;return{[p]:f[p]+O,data:{[p]:_,centerOffset:T-_-O,...M&&{alignmentOffset:O}},reset:M}}}),rx=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,s;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:m=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:g=!0,...x}=ir(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const v=or(a),y=Ht(l),w=or(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(d.floating)),j=f||(w||!g?[Ca(l)]:Qv(l)),C=h!=="none";!f&&C&&j.push(...Jv(l,g,h,N));const P=[l,...j],S=await ys(t,x),D=[];let A=((s=i.flip)==null?void 0:s.overflows)||[];if(m&&D.push(S[v]),u){const T=Yv(a,o,N);D.push(S[T[0]],S[T[1]])}if(A=[...A,{placement:a,overflows:D}],!D.every(T=>T<=0)){var R,E;const T=(((R=i.flip)==null?void 0:R.index)||0)+1,_=P[T];if(_&&(!(u==="alignment"?y!==Ht(_):!1)||A.every(F=>F.overflows[0]>0&&Ht(F.placement)===y)))return{data:{index:T,overflows:A},reset:{placement:_}};let M=(E=A.filter(O=>O.overflows[0]<=0).sort((O,F)=>O.overflows[1]-F.overflows[1])[0])==null?void 0:E.placement;if(!M)switch(p){case"bestFit":{var k;const O=(k=A.filter(F=>{if(C){const B=Ht(F.placement);return B===y||B==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(B=>B>0).reduce((B,W)=>B+W,0)]).sort((F,B)=>F[1]-B[1])[0])==null?void 0:k[0];O&&(M=O);break}case"initialPlacement":M=l;break}if(a!==M)return{reset:{placement:M}}}return{}}}};function mc(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function fc(e){return Vv.some(t=>e[t]>=0)}const nx=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:s="referenceHidden",...a}=ir(e,t);switch(s){case"referenceHidden":{const i=await ys(t,{...a,elementContext:"reference"}),o=mc(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:fc(o)}}}case"escaped":{const i=await ys(t,{...a,altBoundary:!0}),o=mc(i,r.floating);return{data:{escapedOffsets:o,escaped:fc(o)}}}default:return{}}}}};async function sx(e,t){const{placement:r,platform:s,elements:a}=e,i=await(s.isRTL==null?void 0:s.isRTL(a.floating)),o=or(r),l=Wn(r),c=Ht(r)==="y",d=["left","top"].includes(o)?-1:1,m=i&&c?-1:1,u=ir(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:h}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&typeof h=="number"&&(p=l==="end"?h*-1:h),c?{x:p*m,y:f*d}:{x:f*d,y:p*m}}const ax=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,s;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await sx(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},ix=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:s,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:v,y}=x;return{x:v,y}}},...c}=ir(e,t),d={x:r,y:s},m=await ys(t,c),u=Ht(or(a)),f=Zo(u);let p=d[f],h=d[u];if(i){const x=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=p+m[x],w=p-m[v];p=lo(y,p,w)}if(o){const x=u==="y"?"top":"left",v=u==="y"?"bottom":"right",y=h+m[x],w=h-m[v];h=lo(y,h,w)}const g=l.fn({...t,[f]:p,[u]:h});return{...g,data:{x:g.x-r,y:g.y-s,enabled:{[f]:i,[u]:o}}}}}},ox=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:s,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=ir(e,t),m={x:r,y:s},u=Ht(a),f=Zo(u);let p=m[f],h=m[u];const g=ir(l,t),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const w=f==="y"?"height":"width",N=i.reference[f]-i.floating[w]+x.mainAxis,j=i.reference[f]+i.reference[w]-x.mainAxis;p<N?p=N:p>j&&(p=j)}if(d){var v,y;const w=f==="y"?"width":"height",N=["top","left"].includes(or(a)),j=i.reference[u]-i.floating[w]+(N&&((v=o.offset)==null?void 0:v[u])||0)+(N?0:x.crossAxis),C=i.reference[u]+i.reference[w]+(N?0:((y=o.offset)==null?void 0:y[u])||0)-(N?x.crossAxis:0);h<j?h=j:h>C&&(h=C)}return{[f]:p,[u]:h}}}},lx=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,s;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=ir(e,t),m=await ys(t,d),u=or(a),f=Wn(a),p=Ht(a)==="y",{width:h,height:g}=i.floating;let x,v;u==="top"||u==="bottom"?(x=u,v=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=u,x=f==="end"?"top":"bottom");const y=g-m.top-m.bottom,w=h-m.left-m.right,N=Rr(g-m[x],y),j=Rr(h-m[v],w),C=!t.middlewareData.shift;let P=N,S=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(S=w),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(P=y),C&&!f){const A=dt(m.left,0),R=dt(m.right,0),E=dt(m.top,0),k=dt(m.bottom,0);p?S=h-2*(A!==0||R!==0?A+R:dt(m.left,m.right)):P=g-2*(E!==0||k!==0?E+k:dt(m.top,m.bottom))}await c({...t,availableWidth:S,availableHeight:P});const D=await o.getDimensions(l.floating);return h!==D.width||g!==D.height?{reset:{rects:!0}}:{}}}};function Ka(){return typeof window<"u"}function Kn(e){return Ku(e)?(e.nodeName||"").toLowerCase():"#document"}function mt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Zt(e){var t;return(t=(Ku(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ku(e){return Ka()?e instanceof Node||e instanceof mt(e).Node:!1}function Lt(e){return Ka()?e instanceof Element||e instanceof mt(e).Element:!1}function Yt(e){return Ka()?e instanceof HTMLElement||e instanceof mt(e).HTMLElement:!1}function pc(e){return!Ka()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof mt(e).ShadowRoot}function Bs(e){const{overflow:t,overflowX:r,overflowY:s,display:a}=Bt(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!["inline","contents"].includes(a)}function cx(e){return["table","td","th"].includes(Kn(e))}function Ya(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function el(e){const t=tl(),r=Lt(e)?Bt(e):e;return["transform","translate","scale","rotate","perspective"].some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(r.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(r.contain||"").includes(s))}function dx(e){let t=Or(e);for(;Yt(t)&&!Fn(t);){if(el(t))return t;if(Ya(t))return null;t=Or(t)}return null}function tl(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fn(e){return["html","body","#document"].includes(Kn(e))}function Bt(e){return mt(e).getComputedStyle(e)}function Qa(e){return Lt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Or(e){if(Kn(e)==="html")return e;const t=e.assignedSlot||e.parentNode||pc(e)&&e.host||Zt(e);return pc(t)?t.host:t}function Yu(e){const t=Or(e);return Fn(t)?e.ownerDocument?e.ownerDocument.body:e.body:Yt(t)&&Bs(t)?t:Yu(t)}function ws(e,t,r){var s;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=Yu(e),i=a===((s=e.ownerDocument)==null?void 0:s.body),o=mt(a);if(i){const l=uo(o);return t.concat(o,o.visualViewport||[],Bs(a)?a:[],l&&r?ws(l):[])}return t.concat(a,ws(a,[],r))}function uo(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Qu(e){const t=Bt(e);let r=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=Yt(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:s,l=Sa(r)!==i||Sa(s)!==o;return l&&(r=i,s=o),{width:r,height:s,$:l}}function rl(e){return Lt(e)?e:e.contextElement}function xn(e){const t=rl(e);if(!Yt(t))return Gt(1);const r=t.getBoundingClientRect(),{width:s,height:a,$:i}=Qu(t);let o=(i?Sa(r.width):r.width)/s,l=(i?Sa(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const ux=Gt(0);function Zu(e){const t=mt(e);return!tl()||!t.visualViewport?ux:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mx(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==mt(e)?!1:t}function nn(e,t,r,s){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=rl(e);let o=Gt(1);t&&(s?Lt(s)&&(o=xn(s)):o=xn(e));const l=mx(i,r,s)?Zu(i):Gt(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,m=a.width/o.x,u=a.height/o.y;if(i){const f=mt(i),p=s&&Lt(s)?mt(s):s;let h=f,g=uo(h);for(;g&&s&&p!==h;){const x=xn(g),v=g.getBoundingClientRect(),y=Bt(g),w=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*x.x,N=v.top+(g.clientTop+parseFloat(y.paddingTop))*x.y;c*=x.x,d*=x.y,m*=x.x,u*=x.y,c+=w,d+=N,h=mt(g),g=uo(h)}}return Ea({width:m,height:u,x:c,y:d})}function nl(e,t){const r=Qa(e).scrollLeft;return t?t.left+r:nn(Zt(e)).left+r}function Ju(e,t,r){r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=s.left+t.scrollLeft-(r?0:nl(e,s)),i=s.top+t.scrollTop;return{x:a,y:i}}function fx(e){let{elements:t,rect:r,offsetParent:s,strategy:a}=e;const i=a==="fixed",o=Zt(s),l=t?Ya(t.floating):!1;if(s===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=Gt(1);const m=Gt(0),u=Yt(s);if((u||!u&&!i)&&((Kn(s)!=="body"||Bs(o))&&(c=Qa(s)),Yt(s))){const p=nn(s);d=xn(s),m.x=p.x+s.clientLeft,m.y=p.y+s.clientTop}const f=o&&!u&&!i?Ju(o,c,!0):Gt(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+m.x+f.x,y:r.y*d.y-c.scrollTop*d.y+m.y+f.y}}function px(e){return Array.from(e.getClientRects())}function hx(e){const t=Zt(e),r=Qa(e),s=e.ownerDocument.body,a=dt(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=dt(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-r.scrollLeft+nl(e);const l=-r.scrollTop;return Bt(s).direction==="rtl"&&(o+=dt(t.clientWidth,s.clientWidth)-a),{width:a,height:i,x:o,y:l}}function gx(e,t){const r=mt(e),s=Zt(e),a=r.visualViewport;let i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=tl();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function vx(e,t){const r=nn(e,!0,t==="fixed"),s=r.top+e.clientTop,a=r.left+e.clientLeft,i=Yt(e)?xn(e):Gt(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=s*i.y;return{width:o,height:l,x:c,y:d}}function hc(e,t,r){let s;if(t==="viewport")s=gx(e,r);else if(t==="document")s=hx(Zt(e));else if(Lt(t))s=vx(t,r);else{const a=Zu(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Ea(s)}function Xu(e,t){const r=Or(e);return r===t||!Lt(r)||Fn(r)?!1:Bt(r).position==="fixed"||Xu(r,t)}function xx(e,t){const r=t.get(e);if(r)return r;let s=ws(e,[],!1).filter(l=>Lt(l)&&Kn(l)!=="body"),a=null;const i=Bt(e).position==="fixed";let o=i?Or(e):e;for(;Lt(o)&&!Fn(o);){const l=Bt(o),c=el(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Bs(o)&&!c&&Xu(e,o))?s=s.filter(m=>m!==o):a=l,o=Or(o)}return t.set(e,s),s}function bx(e){let{element:t,boundary:r,rootBoundary:s,strategy:a}=e;const o=[...r==="clippingAncestors"?Ya(t)?[]:xx(t,this._c):[].concat(r),s],l=o[0],c=o.reduce((d,m)=>{const u=hc(t,m,a);return d.top=dt(u.top,d.top),d.right=Rr(u.right,d.right),d.bottom=Rr(u.bottom,d.bottom),d.left=dt(u.left,d.left),d},hc(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function yx(e){const{width:t,height:r}=Qu(e);return{width:t,height:r}}function wx(e,t,r){const s=Yt(t),a=Zt(t),i=r==="fixed",o=nn(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Gt(0);function d(){c.x=nl(a)}if(s||!s&&!i)if((Kn(t)!=="body"||Bs(a))&&(l=Qa(t)),s){const p=nn(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else a&&d();i&&!s&&a&&d();const m=a&&!s&&!i?Ju(a,l):Gt(0),u=o.left+l.scrollLeft-c.x-m.x,f=o.top+l.scrollTop-c.y-m.y;return{x:u,y:f,width:o.width,height:o.height}}function Li(e){return Bt(e).position==="static"}function gc(e,t){if(!Yt(e)||Bt(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Zt(e)===r&&(r=r.ownerDocument.body),r}function em(e,t){const r=mt(e);if(Ya(e))return r;if(!Yt(e)){let a=Or(e);for(;a&&!Fn(a);){if(Lt(a)&&!Li(a))return a;a=Or(a)}return r}let s=gc(e,t);for(;s&&cx(s)&&Li(s);)s=gc(s,t);return s&&Fn(s)&&Li(s)&&!el(s)?r:s||dx(e)||r}const Nx=async function(e){const t=this.getOffsetParent||em,r=this.getDimensions,s=await r(e.floating);return{reference:wx(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function jx(e){return Bt(e).direction==="rtl"}const Sx={convertOffsetParentRelativeRectToViewportRelativeRect:fx,getDocumentElement:Zt,getClippingRect:bx,getOffsetParent:em,getElementRects:Nx,getClientRects:px,getDimensions:yx,getScale:xn,isElement:Lt,isRTL:jx};function tm(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Cx(e,t){let r=null,s;const a=Zt(e);function i(){var l;clearTimeout(s),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:m,top:u,width:f,height:p}=d;if(l||t(),!f||!p)return;const h=ua(u),g=ua(a.clientWidth-(m+f)),x=ua(a.clientHeight-(u+p)),v=ua(m),w={rootMargin:-h+"px "+-g+"px "+-x+"px "+-v+"px",threshold:dt(0,Rr(1,c))||1};let N=!0;function j(C){const P=C[0].intersectionRatio;if(P!==c){if(!N)return o();P?o(!1,P):s=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!tm(d,e.getBoundingClientRect())&&o(),N=!1}try{r=new IntersectionObserver(j,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return o(!0),i}function Ex(e,t,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=rl(e),m=a||i?[...d?ws(d):[],...ws(t)]:[];m.forEach(v=>{a&&v.addEventListener("scroll",r,{passive:!0}),i&&v.addEventListener("resize",r)});const u=d&&l?Cx(d,r):null;let f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[y]=v;y&&y.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let h,g=c?nn(e):null;c&&x();function x(){const v=nn(e);g&&!tm(g,v)&&r(),g=v,h=requestAnimationFrame(x)}return r(),()=>{var v;m.forEach(y=>{a&&y.removeEventListener("scroll",r),i&&y.removeEventListener("resize",r)}),u==null||u(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(h)}}const Px=ax,Ix=ix,Dx=rx,Tx=lx,kx=nx,vc=tx,Ax=ox,Rx=(e,t,r)=>{const s=new Map,a={platform:Sx,...r},i={...a.platform,_c:s};return ex(e,t,{...a,platform:i})};var Ox=typeof document<"u",Fx=function(){},ba=Ox?b.useLayoutEffect:Fx;function Pa(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(!Pa(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=r;s--!==0;){const i=a[s];if(!(i==="_owner"&&e.$$typeof)&&!Pa(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function rm(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function xc(e,t){const r=rm(e);return Math.round(t*r)/r}function Bi(e){const t=b.useRef(e);return ba(()=>{t.current=e}),t}function _x(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[m,u]=b.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=b.useState(s);Pa(f,s)||p(s);const[h,g]=b.useState(null),[x,v]=b.useState(null),y=b.useCallback(F=>{F!==C.current&&(C.current=F,g(F))},[]),w=b.useCallback(F=>{F!==P.current&&(P.current=F,v(F))},[]),N=i||h,j=o||x,C=b.useRef(null),P=b.useRef(null),S=b.useRef(m),D=c!=null,A=Bi(c),R=Bi(a),E=Bi(d),k=b.useCallback(()=>{if(!C.current||!P.current)return;const F={placement:t,strategy:r,middleware:f};R.current&&(F.platform=R.current),Rx(C.current,P.current,F).then(B=>{const W={...B,isPositioned:E.current!==!1};T.current&&!Pa(S.current,W)&&(S.current=W,qn.flushSync(()=>{u(W)}))})},[f,t,r,R,E]);ba(()=>{d===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,u(F=>({...F,isPositioned:!1})))},[d]);const T=b.useRef(!1);ba(()=>(T.current=!0,()=>{T.current=!1}),[]),ba(()=>{if(N&&(C.current=N),j&&(P.current=j),N&&j){if(A.current)return A.current(N,j,k);k()}},[N,j,k,A,D]);const _=b.useMemo(()=>({reference:C,floating:P,setReference:y,setFloating:w}),[y,w]),M=b.useMemo(()=>({reference:N,floating:j}),[N,j]),O=b.useMemo(()=>{const F={position:r,left:0,top:0};if(!M.floating)return F;const B=xc(M.floating,m.x),W=xc(M.floating,m.y);return l?{...F,transform:"translate("+B+"px, "+W+"px)",...rm(M.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:B,top:W}},[r,l,M.floating,m.x,m.y]);return b.useMemo(()=>({...m,update:k,refs:_,elements:M,floatingStyles:O}),[m,k,_,M,O])}const Mx=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:s,padding:a}=typeof e=="function"?e(r):e;return s&&t(s)?s.current!=null?vc({element:s.current,padding:a}).fn(r):{}:s?vc({element:s,padding:a}).fn(r):{}}}},Lx=(e,t)=>({...Px(e),options:[e,t]}),Bx=(e,t)=>({...Ix(e),options:[e,t]}),zx=(e,t)=>({...Ax(e),options:[e,t]}),$x=(e,t)=>({...Dx(e),options:[e,t]}),qx=(e,t)=>({...Tx(e),options:[e,t]}),Ux=(e,t)=>({...kx(e),options:[e,t]}),Hx=(e,t)=>({...Mx(e),options:[e,t]});var Gx="Arrow",nm=b.forwardRef((e,t)=>{const{children:r,width:s=10,height:a=5,...i}=e;return n.jsx(Ce.svg,{...i,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});nm.displayName=Gx;var Vx=nm;function sm(e){const[t,r]=b.useState(void 0);return yt(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}var sl="Popper",[am,Yn]=$n(sl),[Wx,im]=am(sl),om=e=>{const{__scopePopper:t,children:r}=e,[s,a]=b.useState(null);return n.jsx(Wx,{scope:t,anchor:s,onAnchorChange:a,children:r})};om.displayName=sl;var lm="PopperAnchor",cm=b.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:s,...a}=e,i=im(lm,r),o=b.useRef(null),l=$e(t,o);return b.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:n.jsx(Ce.div,{...a,ref:l})});cm.displayName=lm;var al="PopperContent",[Kx,Yx]=am(al),dm=b.forwardRef((e,t)=>{var q,ne,ve,J,Y,U;const{__scopePopper:r,side:s="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:m=0,sticky:u="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:h,...g}=e,x=im(al,r),[v,y]=b.useState(null),w=$e(t,ae=>y(ae)),[N,j]=b.useState(null),C=sm(N),P=(C==null?void 0:C.width)??0,S=(C==null?void 0:C.height)??0,D=s+(i!=="center"?"-"+i:""),A=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},R=Array.isArray(d)?d:[d],E=R.length>0,k={padding:A,boundary:R.filter(Zx),altBoundary:E},{refs:T,floatingStyles:_,placement:M,isPositioned:O,middlewareData:F}=_x({strategy:"fixed",placement:D,whileElementsMounted:(...ae)=>Ex(...ae,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[Lx({mainAxis:a+S,alignmentAxis:o}),c&&Bx({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?zx():void 0,...k}),c&&$x({...k}),qx({...k,apply:({elements:ae,rects:he,availableWidth:Te,availableHeight:Oe})=>{const{width:Le,height:Ze}=he.reference,Be=ae.floating.style;Be.setProperty("--radix-popper-available-width",`${Te}px`),Be.setProperty("--radix-popper-available-height",`${Oe}px`),Be.setProperty("--radix-popper-anchor-width",`${Le}px`),Be.setProperty("--radix-popper-anchor-height",`${Ze}px`)}}),N&&Hx({element:N,padding:l}),Jx({arrowWidth:P,arrowHeight:S}),f&&Ux({strategy:"referenceHidden",...k})]}),[B,W]=fm(M),K=An(h);yt(()=>{O&&(K==null||K())},[O,K]);const G=(q=F.arrow)==null?void 0:q.x,ee=(ne=F.arrow)==null?void 0:ne.y,Q=((ve=F.arrow)==null?void 0:ve.centerOffset)!==0,[me,Ie]=b.useState();return yt(()=>{v&&Ie(window.getComputedStyle(v).zIndex)},[v]),n.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{..._,transform:O?_.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[(J=F.transformOrigin)==null?void 0:J.x,(Y=F.transformOrigin)==null?void 0:Y.y].join(" "),...((U=F.hide)==null?void 0:U.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(Kx,{scope:r,placedSide:B,onArrowChange:j,arrowX:G,arrowY:ee,shouldHideArrow:Q,children:n.jsx(Ce.div,{"data-side":B,"data-align":W,...g,ref:w,style:{...g.style,animation:O?void 0:"none"}})})})});dm.displayName=al;var um="PopperArrow",Qx={top:"bottom",right:"left",bottom:"top",left:"right"},mm=b.forwardRef(function(t,r){const{__scopePopper:s,...a}=t,i=Yx(um,s),o=Qx[i.placedSide];return n.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:n.jsx(Vx,{...a,ref:r,style:{...a.style,display:"block"}})})});mm.displayName=um;function Zx(e){return e!==null}var Jx=e=>({name:"transformOrigin",options:e,fn(t){var x,v,y;const{placement:r,rects:s,middlewareData:a}=t,o=((x=a.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,m]=fm(r),u={start:"0%",center:"50%",end:"100%"}[m],f=(((v=a.arrow)==null?void 0:v.x)??0)+l/2,p=(((y=a.arrow)==null?void 0:y.y)??0)+c/2;let h="",g="";return d==="bottom"?(h=o?u:`${f}px`,g=`${-c}px`):d==="top"?(h=o?u:`${f}px`,g=`${s.floating.height+c}px`):d==="right"?(h=`${-c}px`,g=o?u:`${p}px`):d==="left"&&(h=`${s.floating.width+c}px`,g=o?u:`${p}px`),{data:{x:h,y:g}}}});function fm(e){const[t,r="center"]=e.split("-");return[t,r]}var pm=om,Za=cm,il=dm,ol=mm,[Ja,C2]=$n("Tooltip",[Yn]),ll=Yn(),hm="TooltipProvider",Xx=700,bc="tooltip.open",[eb,gm]=Ja(hm),vm=e=>{const{__scopeTooltip:t,delayDuration:r=Xx,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:i}=e,o=b.useRef(!0),l=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),n.jsx(eb,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:b.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:i})};vm.displayName=hm;var xm="Tooltip",[E2,Xa]=Ja(xm),mo="TooltipTrigger",tb=b.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=Xa(mo,r),i=gm(mo,r),o=ll(r),l=b.useRef(null),c=$e(t,l,a.onTriggerChange),d=b.useRef(!1),m=b.useRef(!1),u=b.useCallback(()=>d.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),n.jsx(Za,{asChild:!0,...o,children:n.jsx(Ce.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:c,onPointerMove:pe(e.onPointerMove,f=>{f.pointerType!=="touch"&&!m.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),m.current=!0)}),onPointerLeave:pe(e.onPointerLeave,()=>{a.onTriggerLeave(),m.current=!1}),onPointerDown:pe(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:pe(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:pe(e.onBlur,a.onClose),onClick:pe(e.onClick,a.onClose)})})});tb.displayName=mo;var rb="TooltipPortal",[P2,nb]=Ja(rb,{forceMount:void 0}),_n="TooltipContent",bm=b.forwardRef((e,t)=>{const r=nb(_n,e.__scopeTooltip),{forceMount:s=r.forceMount,side:a="top",...i}=e,o=Xa(_n,e.__scopeTooltip);return n.jsx(qa,{present:s||o.open,children:o.disableHoverableContent?n.jsx(ym,{side:a,...i,ref:t}):n.jsx(sb,{side:a,...i,ref:t})})}),sb=b.forwardRef((e,t)=>{const r=Xa(_n,e.__scopeTooltip),s=gm(_n,e.__scopeTooltip),a=b.useRef(null),i=$e(t,a),[o,l]=b.useState(null),{trigger:c,onClose:d}=r,m=a.current,{onPointerInTransitChange:u}=s,f=b.useCallback(()=>{l(null),u(!1)},[u]),p=b.useCallback((h,g)=>{const x=h.currentTarget,v={x:h.clientX,y:h.clientY},y=cb(v,x.getBoundingClientRect()),w=db(v,y),N=ub(g.getBoundingClientRect()),j=fb([...w,...N]);l(j),u(!0)},[u]);return b.useEffect(()=>()=>f(),[f]),b.useEffect(()=>{if(c&&m){const h=x=>p(x,m),g=x=>p(x,c);return c.addEventListener("pointerleave",h),m.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",h),m.removeEventListener("pointerleave",g)}}},[c,m,p,f]),b.useEffect(()=>{if(o){const h=g=>{const x=g.target,v={x:g.clientX,y:g.clientY},y=(c==null?void 0:c.contains(x))||(m==null?void 0:m.contains(x)),w=!mb(v,o);y?f():w&&(f(),d())};return document.addEventListener("pointermove",h),()=>document.removeEventListener("pointermove",h)}},[c,m,o,d,f]),n.jsx(ym,{...e,ref:i})}),[ab,ib]=Ja(xm,{isInside:!1}),ob=Mh("TooltipContent"),ym=b.forwardRef((e,t)=>{const{__scopeTooltip:r,children:s,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Xa(_n,r),d=ll(r),{onClose:m}=c;return b.useEffect(()=>(document.addEventListener(bc,m),()=>document.removeEventListener(bc,m)),[m]),b.useEffect(()=>{if(c.trigger){const u=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&m()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[c.trigger,m]),n.jsx(qo,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:u=>u.preventDefault(),onDismiss:m,children:n.jsxs(il,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(ob,{children:s}),n.jsx(ab,{scope:r,isInside:!0,children:n.jsx(tg,{id:c.contentId,role:"tooltip",children:a||s})})]})})});bm.displayName=_n;var wm="TooltipArrow",lb=b.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=ll(r);return ib(wm,r).isInside?null:n.jsx(ol,{...a,...s,ref:t})});lb.displayName=wm;function cb(e,t){const r=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,s,a,i)){case i:return"left";case a:return"right";case r:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function db(e,t,r=5){const s=[];switch(t){case"top":s.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":s.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":s.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":s.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return s}function ub(e){const{top:t,right:r,bottom:s,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:s},{x:a,y:s}]}function mb(e,t){const{x:r,y:s}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,m=l.y,u=c.x,f=c.y;m>s!=f>s&&r<(u-d)*(s-m)/(f-m)+d&&(a=!a)}return a}function fb(e){const t=e.slice();return t.sort((r,s)=>r.x<s.x?-1:r.x>s.x?1:r.y<s.y?-1:r.y>s.y?1:0),pb(t)}function pb(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var hb=vm,Nm=bm;const gb=hb,vb=b.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(Nm,{ref:s,sideOffset:t,className:de("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));vb.displayName=Nm.displayName;var Qn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},sn=typeof window>"u"||"Deno"in globalThis;function tt(){}function xb(e,t){return typeof e=="function"?e(t):e}function fo(e){return typeof e=="number"&&e>=0&&e!==1/0}function jm(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ir(e,t){return typeof e=="function"?e(t):e}function Ot(e,t){return typeof e=="function"?e(t):e}function yc(e,t){const{type:r="all",exact:s,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==cl(o,t.options))return!1}else if(!Ns(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function wc(e,t){const{exact:r,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(an(t.options.mutationKey)!==an(i))return!1}else if(!Ns(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function cl(e,t){return((t==null?void 0:t.queryKeyHashFn)||an)(e)}function an(e){return JSON.stringify(e,(t,r)=>po(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function Ns(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Ns(e[r],t[r])):!1}function Sm(e,t){if(e===t)return e;const r=Nc(e)&&Nc(t);if(r||po(e)&&po(t)){const s=r?e:Object.keys(e),a=s.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},c=new Set(s);let d=0;for(let m=0;m<o;m++){const u=r?m:i[m];(!r&&c.has(u)||r)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,d++):(l[u]=Sm(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&d++)}return a===o&&d===a?e:l}return t}function Ia(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Nc(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function po(e){if(!jc(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!jc(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function jc(e){return Object.prototype.toString.call(e)==="[object Object]"}function bb(e){return new Promise(t=>{setTimeout(t,e)})}function ho(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Sm(e,t):t}function yb(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function wb(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var dl=Symbol();function Cm(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===dl?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Em(e,t){return typeof e=="function"?e(...t):!!e}var Vr,gr,bn,Id,Nb=(Id=class extends Qn{constructor(){super();te(this,Vr);te(this,gr);te(this,bn);V(this,bn,t=>{if(!sn&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){I(this,gr)||this.setEventListener(I(this,bn))}onUnsubscribe(){var t;this.hasListeners()||((t=I(this,gr))==null||t.call(this),V(this,gr,void 0))}setEventListener(t){var r;V(this,bn,t),(r=I(this,gr))==null||r.call(this),V(this,gr,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){I(this,Vr)!==t&&(V(this,Vr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof I(this,Vr)=="boolean"?I(this,Vr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Vr=new WeakMap,gr=new WeakMap,bn=new WeakMap,Id),ul=new Nb,yn,vr,wn,Dd,jb=(Dd=class extends Qn{constructor(){super();te(this,yn,!0);te(this,vr);te(this,wn);V(this,wn,t=>{if(!sn&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){I(this,vr)||this.setEventListener(I(this,wn))}onUnsubscribe(){var t;this.hasListeners()||((t=I(this,vr))==null||t.call(this),V(this,vr,void 0))}setEventListener(t){var r;V(this,wn,t),(r=I(this,vr))==null||r.call(this),V(this,vr,t(this.setOnline.bind(this)))}setOnline(t){I(this,yn)!==t&&(V(this,yn,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return I(this,yn)}},yn=new WeakMap,vr=new WeakMap,wn=new WeakMap,Dd),Da=new jb;function go(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},r.reject=a=>{s({status:"rejected",reason:a}),t(a)},r}function Sb(e){return Math.min(1e3*2**e,3e4)}function Pm(e){return(e??"online")==="online"?Da.isOnline():!0}var Im=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function zi(e){return e instanceof Im}function Dm(e){let t=!1,r=0,s=!1,a;const i=go(),o=g=>{var x;s||(f(new Im(g)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>ul.isFocused()&&(e.networkMode==="always"||Da.isOnline())&&e.canRun(),m=()=>Pm(e.networkMode)&&e.canRun(),u=g=>{var x;s||(s=!0,(x=e.onSuccess)==null||x.call(e,g),a==null||a(),i.resolve(g))},f=g=>{var x;s||(s=!0,(x=e.onError)==null||x.call(e,g),a==null||a(),i.reject(g))},p=()=>new Promise(g=>{var x;a=v=>{(s||d())&&g(v)},(x=e.onPause)==null||x.call(e)}).then(()=>{var g;a=void 0,s||(g=e.onContinue)==null||g.call(e)}),h=()=>{if(s)return;let g;const x=r===0?e.initialPromise:void 0;try{g=x??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(u).catch(v=>{var C;if(s)return;const y=e.retry??(sn?0:3),w=e.retryDelay??Sb,N=typeof w=="function"?w(r,v):w,j=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,v);if(t||!j){f(v);return}r++,(C=e.onFail)==null||C.call(e,r,v),bb(N).then(()=>d()?void 0:p()).then(()=>{t?f(v):h()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:m,start:()=>(m()?h():p().then(h),i)}}var Cb=e=>setTimeout(e,0);function Eb(){let e=[],t=0,r=l=>{l()},s=l=>{l()},a=Cb;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var qe=Eb(),Wr,Td,Tm=(Td=class{constructor(){te(this,Wr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fo(this.gcTime)&&V(this,Wr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(sn?1/0:5*60*1e3))}clearGcTimeout(){I(this,Wr)&&(clearTimeout(I(this,Wr)),V(this,Wr,void 0))}},Wr=new WeakMap,Td),Nn,jn,vt,Kr,Qe,Rs,Yr,At,tr,kd,Pb=(kd=class extends Tm{constructor(t){super();te(this,At);te(this,Nn);te(this,jn);te(this,vt);te(this,Kr);te(this,Qe);te(this,Rs);te(this,Yr);V(this,Yr,!1),V(this,Rs,t.defaultOptions),this.setOptions(t.options),this.observers=[],V(this,Kr,t.client),V(this,vt,I(this,Kr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,V(this,Nn,Ib(this.options)),this.state=t.state??I(this,Nn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=I(this,Qe))==null?void 0:t.promise}setOptions(t){this.options={...I(this,Rs),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&I(this,vt).remove(this)}setData(t,r){const s=ho(this.state.data,t,this.options);return fe(this,At,tr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){fe(this,At,tr).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=I(this,Qe))==null?void 0:s.promise;return(a=I(this,Qe))==null||a.cancel(t),r?r.then(tt).catch(tt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(I(this,Nn))}isActive(){return this.observers.some(t=>Ot(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===dl||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ir(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!jm(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=I(this,Qe))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=I(this,Qe))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),I(this,vt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(I(this,Qe)&&(I(this,Yr)?I(this,Qe).cancel({revert:!0}):I(this,Qe).cancelRetry()),this.scheduleGc()),I(this,vt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||fe(this,At,tr).call(this,{type:"invalidate"})}fetch(t,r){var d,m,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(I(this,Qe))return I(this,Qe).continueRetry(),I(this,Qe).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const s=new AbortController,a=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(V(this,Yr,!0),s.signal)})},i=()=>{const f=Cm(this.options,r),h=(()=>{const g={client:I(this,Kr),queryKey:this.queryKey,meta:this.meta};return a(g),g})();return V(this,Yr,!1),this.options.persister?this.options.persister(f,h,this):f(h)},l=(()=>{const f={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:I(this,Kr),state:this.state,fetchFn:i};return a(f),f})();(d=this.options.behavior)==null||d.onFetch(l,this),V(this,jn,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=l.fetchOptions)==null?void 0:m.meta))&&fe(this,At,tr).call(this,{type:"fetch",meta:(u=l.fetchOptions)==null?void 0:u.meta});const c=f=>{var p,h,g,x;zi(f)&&f.silent||fe(this,At,tr).call(this,{type:"error",error:f}),zi(f)||((h=(p=I(this,vt).config).onError)==null||h.call(p,f,this),(x=(g=I(this,vt).config).onSettled)==null||x.call(g,this.state.data,f,this)),this.scheduleGc()};return V(this,Qe,Dm({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:f=>{var p,h,g,x;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(v){c(v);return}(h=(p=I(this,vt).config).onSuccess)==null||h.call(p,f,this),(x=(g=I(this,vt).config).onSettled)==null||x.call(g,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,p)=>{fe(this,At,tr).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{fe(this,At,tr).call(this,{type:"pause"})},onContinue:()=>{fe(this,At,tr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),I(this,Qe).start()}},Nn=new WeakMap,jn=new WeakMap,vt=new WeakMap,Kr=new WeakMap,Qe=new WeakMap,Rs=new WeakMap,Yr=new WeakMap,At=new WeakSet,tr=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...km(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return zi(a)&&a.revert&&I(this,jn)?{...I(this,jn),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),qe.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),I(this,vt).notify({query:this,type:"updated",action:t})})},kd);function km(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Pm(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Ib(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var $t,Ad,Db=(Ad=class extends Qn{constructor(t={}){super();te(this,$t);this.config=t,V(this,$t,new Map)}build(t,r,s){const a=r.queryKey,i=r.queryHash??cl(a,r);let o=this.get(i);return o||(o=new Pb({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){I(this,$t).has(t.queryHash)||(I(this,$t).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=I(this,$t).get(t.queryHash);r&&(t.destroy(),r===t&&I(this,$t).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){qe.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return I(this,$t).get(t)}getAll(){return[...I(this,$t).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>yc(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>yc(t,s)):r}notify(t){qe.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){qe.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){qe.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},$t=new WeakMap,Ad),qt,Xe,Qr,Ut,hr,Rd,Tb=(Rd=class extends Tm{constructor(t){super();te(this,Ut);te(this,qt);te(this,Xe);te(this,Qr);this.mutationId=t.mutationId,V(this,Xe,t.mutationCache),V(this,qt,[]),this.state=t.state||Am(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){I(this,qt).includes(t)||(I(this,qt).push(t),this.clearGcTimeout(),I(this,Xe).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){V(this,qt,I(this,qt).filter(r=>r!==t)),this.scheduleGc(),I(this,Xe).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){I(this,qt).length||(this.state.status==="pending"?this.scheduleGc():I(this,Xe).remove(this))}continue(){var t;return((t=I(this,Qr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,d,m,u,f,p,h,g,x,v,y,w,N,j,C,P,S;const r=()=>{fe(this,Ut,hr).call(this,{type:"continue"})};V(this,Qr,Dm({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(D,A)=>{fe(this,Ut,hr).call(this,{type:"failed",failureCount:D,error:A})},onPause:()=>{fe(this,Ut,hr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>I(this,Xe).canRun(this)}));const s=this.state.status==="pending",a=!I(this,Qr).canStart();try{if(s)r();else{fe(this,Ut,hr).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=I(this,Xe).config).onMutate)==null?void 0:o.call(i,t,this));const A=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));A!==this.state.context&&fe(this,Ut,hr).call(this,{type:"pending",context:A,variables:t,isPaused:a})}const D=await I(this,Qr).start();return await((m=(d=I(this,Xe).config).onSuccess)==null?void 0:m.call(d,D,t,this.state.context,this)),await((f=(u=this.options).onSuccess)==null?void 0:f.call(u,D,t,this.state.context)),await((h=(p=I(this,Xe).config).onSettled)==null?void 0:h.call(p,D,null,this.state.variables,this.state.context,this)),await((x=(g=this.options).onSettled)==null?void 0:x.call(g,D,null,t,this.state.context)),fe(this,Ut,hr).call(this,{type:"success",data:D}),D}catch(D){try{throw await((y=(v=I(this,Xe).config).onError)==null?void 0:y.call(v,D,t,this.state.context,this)),await((N=(w=this.options).onError)==null?void 0:N.call(w,D,t,this.state.context)),await((C=(j=I(this,Xe).config).onSettled)==null?void 0:C.call(j,void 0,D,this.state.variables,this.state.context,this)),await((S=(P=this.options).onSettled)==null?void 0:S.call(P,void 0,D,t,this.state.context)),D}finally{fe(this,Ut,hr).call(this,{type:"error",error:D})}}finally{I(this,Xe).runNext(this)}}},qt=new WeakMap,Xe=new WeakMap,Qr=new WeakMap,Ut=new WeakSet,hr=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),qe.batch(()=>{I(this,qt).forEach(s=>{s.onMutationUpdate(t)}),I(this,Xe).notify({mutation:this,type:"updated",action:t})})},Rd);function Am(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var rr,Rt,Os,Od,kb=(Od=class extends Qn{constructor(t={}){super();te(this,rr);te(this,Rt);te(this,Os);this.config=t,V(this,rr,new Set),V(this,Rt,new Map),V(this,Os,0)}build(t,r,s){const a=new Tb({mutationCache:this,mutationId:++la(this,Os)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){I(this,rr).add(t);const r=ma(t);if(typeof r=="string"){const s=I(this,Rt).get(r);s?s.push(t):I(this,Rt).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(I(this,rr).delete(t)){const r=ma(t);if(typeof r=="string"){const s=I(this,Rt).get(r);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&I(this,Rt).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=ma(t);if(typeof r=="string"){const s=I(this,Rt).get(r),a=s==null?void 0:s.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const r=ma(t);if(typeof r=="string"){const a=(s=I(this,Rt).get(r))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){qe.batch(()=>{I(this,rr).forEach(t=>{this.notify({type:"removed",mutation:t})}),I(this,rr).clear(),I(this,Rt).clear()})}getAll(){return Array.from(I(this,rr))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>wc(r,s))}findAll(t={}){return this.getAll().filter(r=>wc(t,r))}notify(t){qe.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return qe.batch(()=>Promise.all(t.map(r=>r.continue().catch(tt))))}},rr=new WeakMap,Rt=new WeakMap,Os=new WeakMap,Od);function ma(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Sc(e){return{onFetch:(t,r)=>{var m,u,f,p,h;const s=t.options,a=(f=(u=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:u.fetchMore)==null?void 0:f.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((h=t.state.data)==null?void 0:h.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const x=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=Cm(t.options,t.fetchOptions),y=async(w,N,j)=>{if(g)return Promise.reject();if(N==null&&w.pages.length)return Promise.resolve(w);const P=(()=>{const R={client:t.client,queryKey:t.queryKey,pageParam:N,direction:j?"backward":"forward",meta:t.options.meta};return x(R),R})(),S=await v(P),{maxPages:D}=t.options,A=j?wb:yb;return{pages:A(w.pages,S,D),pageParams:A(w.pageParams,N,D)}};if(a&&i.length){const w=a==="backward",N=w?Ab:Cc,j={pages:i,pageParams:o},C=N(s,j);l=await y(j,C,w)}else{const w=e??i.length;do{const N=c===0?o[0]??s.initialPageParam:Cc(s,l);if(c>0&&N==null)break;l=await y(l,N),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var g,x;return(x=(g=t.options).persister)==null?void 0:x.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function Cc(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function Ab(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var Me,xr,br,Sn,Cn,yr,En,Pn,Fd,Rb=(Fd=class{constructor(e={}){te(this,Me);te(this,xr);te(this,br);te(this,Sn);te(this,Cn);te(this,yr);te(this,En);te(this,Pn);V(this,Me,e.queryCache||new Db),V(this,xr,e.mutationCache||new kb),V(this,br,e.defaultOptions||{}),V(this,Sn,new Map),V(this,Cn,new Map),V(this,yr,0)}mount(){la(this,yr)._++,I(this,yr)===1&&(V(this,En,ul.subscribe(async e=>{e&&(await this.resumePausedMutations(),I(this,Me).onFocus())})),V(this,Pn,Da.subscribe(async e=>{e&&(await this.resumePausedMutations(),I(this,Me).onOnline())})))}unmount(){var e,t;la(this,yr)._--,I(this,yr)===0&&((e=I(this,En))==null||e.call(this),V(this,En,void 0),(t=I(this,Pn))==null||t.call(this),V(this,Pn,void 0))}isFetching(e){return I(this,Me).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return I(this,xr).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=I(this,Me).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=I(this,Me).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ir(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return I(this,Me).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=I(this,Me).get(s.queryHash),i=a==null?void 0:a.state.data,o=xb(t,i);if(o!==void 0)return I(this,Me).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return qe.batch(()=>I(this,Me).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=I(this,Me).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=I(this,Me);qe.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=I(this,Me);return qe.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=qe.batch(()=>I(this,Me).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(tt).catch(tt)}invalidateQueries(e,t={}){return qe.batch(()=>(I(this,Me).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=qe.batch(()=>I(this,Me).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(tt)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(tt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=I(this,Me).build(this,t);return r.isStaleByTime(Ir(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(tt).catch(tt)}fetchInfiniteQuery(e){return e.behavior=Sc(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(tt).catch(tt)}ensureInfiniteQueryData(e){return e.behavior=Sc(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Da.isOnline()?I(this,xr).resumePausedMutations():Promise.resolve()}getQueryCache(){return I(this,Me)}getMutationCache(){return I(this,xr)}getDefaultOptions(){return I(this,br)}setDefaultOptions(e){V(this,br,e)}setQueryDefaults(e,t){I(this,Sn).set(an(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...I(this,Sn).values()],r={};return t.forEach(s=>{Ns(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){I(this,Cn).set(an(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...I(this,Cn).values()],r={};return t.forEach(s=>{Ns(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...I(this,br).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=cl(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===dl&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...I(this,br).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){I(this,Me).clear(),I(this,xr).clear()}},Me=new WeakMap,xr=new WeakMap,br=new WeakMap,Sn=new WeakMap,Cn=new WeakMap,yr=new WeakMap,En=new WeakMap,Pn=new WeakMap,Fd),at,ye,Fs,et,Zr,In,wr,Nr,_s,Dn,Tn,Jr,Xr,jr,kn,Se,ds,vo,xo,bo,yo,wo,No,jo,Rm,_d,Ob=(_d=class extends Qn{constructor(t,r){super();te(this,Se);te(this,at);te(this,ye);te(this,Fs);te(this,et);te(this,Zr);te(this,In);te(this,wr);te(this,Nr);te(this,_s);te(this,Dn);te(this,Tn);te(this,Jr);te(this,Xr);te(this,jr);te(this,kn,new Set);this.options=r,V(this,at,t),V(this,Nr,null),V(this,wr,go()),this.options.experimental_prefetchInRender||I(this,wr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(I(this,ye).addObserver(this),Ec(I(this,ye),this.options)?fe(this,Se,ds).call(this):this.updateResult(),fe(this,Se,yo).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return So(I(this,ye),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return So(I(this,ye),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,fe(this,Se,wo).call(this),fe(this,Se,No).call(this),I(this,ye).removeObserver(this)}setOptions(t){const r=this.options,s=I(this,ye);if(this.options=I(this,at).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ot(this.options.enabled,I(this,ye))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");fe(this,Se,jo).call(this),I(this,ye).setOptions(this.options),r._defaulted&&!Ia(this.options,r)&&I(this,at).getQueryCache().notify({type:"observerOptionsUpdated",query:I(this,ye),observer:this});const a=this.hasListeners();a&&Pc(I(this,ye),s,this.options,r)&&fe(this,Se,ds).call(this),this.updateResult(),a&&(I(this,ye)!==s||Ot(this.options.enabled,I(this,ye))!==Ot(r.enabled,I(this,ye))||Ir(this.options.staleTime,I(this,ye))!==Ir(r.staleTime,I(this,ye)))&&fe(this,Se,vo).call(this);const i=fe(this,Se,xo).call(this);a&&(I(this,ye)!==s||Ot(this.options.enabled,I(this,ye))!==Ot(r.enabled,I(this,ye))||i!==I(this,jr))&&fe(this,Se,bo).call(this,i)}getOptimisticResult(t){const r=I(this,at).getQueryCache().build(I(this,at),t),s=this.createResult(r,t);return _b(this,s)&&(V(this,et,s),V(this,In,this.options),V(this,Zr,I(this,ye).state)),s}getCurrentResult(){return I(this,et)}trackResult(t,r){return new Proxy(t,{get:(s,a)=>(this.trackProp(a),r==null||r(a),Reflect.get(s,a))})}trackProp(t){I(this,kn).add(t)}getCurrentQuery(){return I(this,ye)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=I(this,at).defaultQueryOptions(t),s=I(this,at).getQueryCache().build(I(this,at),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(t){return fe(this,Se,ds).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),I(this,et)))}createResult(t,r){var D;const s=I(this,ye),a=this.options,i=I(this,et),o=I(this,Zr),l=I(this,In),d=t!==s?t.state:I(this,Fs),{state:m}=t;let u={...m},f=!1,p;if(r._optimisticResults){const A=this.hasListeners(),R=!A&&Ec(t,r),E=A&&Pc(t,s,r,a);(R||E)&&(u={...u,...km(m.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:h,errorUpdatedAt:g,status:x}=u;p=u.data;let v=!1;if(r.placeholderData!==void 0&&p===void 0&&x==="pending"){let A;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(A=i.data,v=!0):A=typeof r.placeholderData=="function"?r.placeholderData((D=I(this,Tn))==null?void 0:D.state.data,I(this,Tn)):r.placeholderData,A!==void 0&&(x="success",p=ho(i==null?void 0:i.data,A,r),f=!0)}if(r.select&&p!==void 0&&!v)if(i&&p===(o==null?void 0:o.data)&&r.select===I(this,_s))p=I(this,Dn);else try{V(this,_s,r.select),p=r.select(p),p=ho(i==null?void 0:i.data,p,r),V(this,Dn,p),V(this,Nr,null)}catch(A){V(this,Nr,A)}I(this,Nr)&&(h=I(this,Nr),p=I(this,Dn),g=Date.now(),x="error");const y=u.fetchStatus==="fetching",w=x==="pending",N=x==="error",j=w&&y,C=p!==void 0,S={status:x,fetchStatus:u.fetchStatus,isPending:w,isSuccess:x==="success",isError:N,isInitialLoading:j,isLoading:j,data:p,dataUpdatedAt:u.dataUpdatedAt,error:h,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:y,isRefetching:y&&!w,isLoadingError:N&&!C,isPaused:u.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:N&&C,isStale:ml(t,r),refetch:this.refetch,promise:I(this,wr)};if(this.options.experimental_prefetchInRender){const A=k=>{S.status==="error"?k.reject(S.error):S.data!==void 0&&k.resolve(S.data)},R=()=>{const k=V(this,wr,S.promise=go());A(k)},E=I(this,wr);switch(E.status){case"pending":t.queryHash===s.queryHash&&A(E);break;case"fulfilled":(S.status==="error"||S.data!==E.value)&&R();break;case"rejected":(S.status!=="error"||S.error!==E.reason)&&R();break}}return S}updateResult(){const t=I(this,et),r=this.createResult(I(this,ye),this.options);if(V(this,Zr,I(this,ye).state),V(this,In,this.options),I(this,Zr).data!==void 0&&V(this,Tn,I(this,ye)),Ia(r,t))return;V(this,et,r);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!I(this,kn).size)return!0;const o=new Set(i??I(this,kn));return this.options.throwOnError&&o.add("error"),Object.keys(I(this,et)).some(l=>{const c=l;return I(this,et)[c]!==t[c]&&o.has(c)})};fe(this,Se,Rm).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&fe(this,Se,yo).call(this)}},at=new WeakMap,ye=new WeakMap,Fs=new WeakMap,et=new WeakMap,Zr=new WeakMap,In=new WeakMap,wr=new WeakMap,Nr=new WeakMap,_s=new WeakMap,Dn=new WeakMap,Tn=new WeakMap,Jr=new WeakMap,Xr=new WeakMap,jr=new WeakMap,kn=new WeakMap,Se=new WeakSet,ds=function(t){fe(this,Se,jo).call(this);let r=I(this,ye).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(tt)),r},vo=function(){fe(this,Se,wo).call(this);const t=Ir(this.options.staleTime,I(this,ye));if(sn||I(this,et).isStale||!fo(t))return;const s=jm(I(this,et).dataUpdatedAt,t)+1;V(this,Jr,setTimeout(()=>{I(this,et).isStale||this.updateResult()},s))},xo=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(I(this,ye)):this.options.refetchInterval)??!1},bo=function(t){fe(this,Se,No).call(this),V(this,jr,t),!(sn||Ot(this.options.enabled,I(this,ye))===!1||!fo(I(this,jr))||I(this,jr)===0)&&V(this,Xr,setInterval(()=>{(this.options.refetchIntervalInBackground||ul.isFocused())&&fe(this,Se,ds).call(this)},I(this,jr)))},yo=function(){fe(this,Se,vo).call(this),fe(this,Se,bo).call(this,fe(this,Se,xo).call(this))},wo=function(){I(this,Jr)&&(clearTimeout(I(this,Jr)),V(this,Jr,void 0))},No=function(){I(this,Xr)&&(clearInterval(I(this,Xr)),V(this,Xr,void 0))},jo=function(){const t=I(this,at).getQueryCache().build(I(this,at),this.options);if(t===I(this,ye))return;const r=I(this,ye);V(this,ye,t),V(this,Fs,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Rm=function(t){qe.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(I(this,et))}),I(this,at).getQueryCache().notify({query:I(this,ye),type:"observerResultsUpdated"})})},_d);function Fb(e,t){return Ot(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Ec(e,t){return Fb(e,t)||e.state.data!==void 0&&So(e,t,t.refetchOnMount)}function So(e,t,r){if(Ot(t.enabled,e)!==!1&&Ir(t.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&ml(e,t)}return!1}function Pc(e,t,r,s){return(e!==t||Ot(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&ml(e,r)}function ml(e,t){return Ot(t.enabled,e)!==!1&&e.isStaleByTime(Ir(t.staleTime,e))}function _b(e,t){return!Ia(e.getCurrentResult(),t)}var Sr,Cr,it,nr,ar,ya,Co,Md,Mb=(Md=class extends Qn{constructor(r,s){super();te(this,ar);te(this,Sr);te(this,Cr);te(this,it);te(this,nr);V(this,Sr,r),this.setOptions(s),this.bindMethods(),fe(this,ar,ya).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const s=this.options;this.options=I(this,Sr).defaultMutationOptions(r),Ia(this.options,s)||I(this,Sr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:I(this,it),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&an(s.mutationKey)!==an(this.options.mutationKey)?this.reset():((a=I(this,it))==null?void 0:a.state.status)==="pending"&&I(this,it).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=I(this,it))==null||r.removeObserver(this)}onMutationUpdate(r){fe(this,ar,ya).call(this),fe(this,ar,Co).call(this,r)}getCurrentResult(){return I(this,Cr)}reset(){var r;(r=I(this,it))==null||r.removeObserver(this),V(this,it,void 0),fe(this,ar,ya).call(this),fe(this,ar,Co).call(this)}mutate(r,s){var a;return V(this,nr,s),(a=I(this,it))==null||a.removeObserver(this),V(this,it,I(this,Sr).getMutationCache().build(I(this,Sr),this.options)),I(this,it).addObserver(this),I(this,it).execute(r)}},Sr=new WeakMap,Cr=new WeakMap,it=new WeakMap,nr=new WeakMap,ar=new WeakSet,ya=function(){var s;const r=((s=I(this,it))==null?void 0:s.state)??Am();V(this,Cr,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Co=function(r){qe.batch(()=>{var s,a,i,o,l,c,d,m;if(I(this,nr)&&this.hasListeners()){const u=I(this,Cr).variables,f=I(this,Cr).context;(r==null?void 0:r.type)==="success"?((a=(s=I(this,nr)).onSuccess)==null||a.call(s,r.data,u,f),(o=(i=I(this,nr)).onSettled)==null||o.call(i,r.data,null,u,f)):(r==null?void 0:r.type)==="error"&&((c=(l=I(this,nr)).onError)==null||c.call(l,r.error,u,f),(m=(d=I(this,nr)).onSettled)==null||m.call(d,void 0,r.error,u,f))}this.listeners.forEach(u=>{u(I(this,Cr))})})},Md),Om=b.createContext(void 0),fl=e=>{const t=b.useContext(Om);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Lb=({client:e,children:t})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(Om.Provider,{value:e,children:t})),Fm=b.createContext(!1),Bb=()=>b.useContext(Fm);Fm.Provider;function zb(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var $b=b.createContext(zb()),qb=()=>b.useContext($b),Ub=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Hb=e=>{b.useEffect(()=>{e.clearReset()},[e])},Gb=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||Em(r,[e.error,s])),Vb=e=>{if(e.suspense){const t=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>t(r(...s)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Wb=(e,t)=>e.isLoading&&e.isFetching&&!t,Kb=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Ic=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Yb(e,t,r){var u,f,p,h,g;const s=Bb(),a=qb(),i=fl(),o=i.defaultQueryOptions(e);(f=(u=i.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||f.call(u,o),o._optimisticResults=s?"isRestoring":"optimistic",Vb(o),Ub(o,a),Hb(a);const l=!i.getQueryCache().get(o.queryHash),[c]=b.useState(()=>new t(i,o)),d=c.getOptimisticResult(o),m=!s&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(x=>{const v=m?c.subscribe(qe.batchCalls(x)):tt;return c.updateResult(),v},[c,m]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setOptions(o)},[o,c]),Kb(o,d))throw Ic(o,c,a);if(Gb({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((h=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||h.call(p,o,d),o.experimental_prefetchInRender&&!sn&&Wb(d,s)){const x=l?Ic(o,c,a):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;x==null||x.catch(tt).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function js(e,t){return Yb(e,Ob)}function $i(e,t){const r=fl(),[s]=b.useState(()=>new Mb(r,e));b.useEffect(()=>{s.setOptions(e)},[s,e]);const a=b.useSyncExternalStore(b.useCallback(o=>s.subscribe(qe.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=b.useCallback((o,l)=>{s.mutate(o,l).catch(tt)},[s]);if(a.error&&Em(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const Dc={it:{home:"Home",specialties:"Categorie",about:"Chi Siamo",menu:"Prodotti",gallery:"Galleria",reviews:"Recensioni",contact:"Contatti",discover:"Scopri",ourSpecialties:"Le Nostre Categorie",reservations:"Ordini",contactUs:"Contattaci",makeReservation:"Fai un Ordine",yourName:"Il Tuo Nome",phoneNumber:"Numero di Telefono",date:"Data",time:"Ora",numberOfGuests:"Quantit",specialRequests:"Richieste Speciali",requestReservation:"Invia Ordine",processingRequest:"Elaborazione...",findUs:"Trovaci",address:"Indirizzo",phone:"Telefono",email:"Email",hours:"Orari",ourMenu:"I Nostri Prodotti",menuDescription:"Esplora la nostra variet di composizioni floreali e servizi",downloadMenu:"Scarica Catalogo",menuUnavailable:"Il catalogo PDF non  ancora disponibile",menuComingSoon:"Il nostro catalogo completo sar presto disponibile",freshFlowers:"Fiori freschi per ogni occasione",indoorOutdoorPlants:"Piante da interno ed esterno per decorare con la natura",highQualityFakeFlowers:"Fiori finti di alta qualit, ideali per decorazioni durature",tailorMadeServices:"Servizi floreali su misura per cerimonie, eventi e ambienti",yearsExperience:"Anni di Esperienza",happyCustomers:"Clienti Felici",flowerVarieties:"Variet di Fiori"},en:{home:"Home",specialties:"Categories",about:"About",menu:"Products",gallery:"Gallery",reviews:"Reviews",contact:"Contact",discover:"Discover",ourSpecialties:"Our Categories",reservations:"Orders",contactUs:"Contact Us",makeReservation:"Place an Order",yourName:"Your Name",phoneNumber:"Phone Number",date:"Date",time:"Time",numberOfGuests:"Quantity",specialRequests:"Special Requests",requestReservation:"Submit Order",processingRequest:"Processing...",findUs:"Find Us",address:"Address",phone:"Phone",email:"Email",hours:"Hours",ourMenu:"Our Products",menuDescription:"Explore our diverse selection of floral arrangements and services",downloadMenu:"Download Catalog",menuUnavailable:"Product catalog PDF is not available yet",menuComingSoon:"Our complete catalog will be available soon"},fr:{home:"Accueil",specialties:"Catgories",about:" Propos",menu:"Produits",gallery:"Galerie",reviews:"Avis",contact:"Contact",discover:"Dcouvrir",ourSpecialties:"Nos Catgories",reservations:"Commandes",contactUs:"Nous Contacter",makeReservation:"Passer Commande",yourName:"Votre Nom",phoneNumber:"Numro de Tlphone",date:"Date",time:"Heure",numberOfGuests:"Quantit",specialRequests:"Demandes Spciales",requestReservation:"Envoyer Commande",processingRequest:"Traitement...",findUs:"Nous Trouver",address:"Adresse",phone:"Tlphone",email:"Email",hours:"Horaires",ourMenu:"Nos Produits",menuDescription:"Explorez notre slection varie d'arrangements floraux et services",downloadMenu:"Tlcharger Catalogue",menuUnavailable:"Le catalogue PDF n'est pas encore disponible",menuComingSoon:"Notre catalogue complet sera bientt disponible"},ar:{home:"",specialties:"",about:" ",menu:"",gallery:"",reviews:"",contact:" ",discover:"",ourSpecialties:"",reservations:"",contactUs:" ",makeReservation:" ",yourName:"",phoneNumber:" ",date:"",time:"",numberOfGuests:"",specialRequests:" ",requestReservation:" ",processingRequest:" ...",findUs:"",address:"",phone:"",email:" ",hours:" ",ourMenu:"",menuDescription:"      ",downloadMenu:" ",menuUnavailable:"  PDF   ",menuComingSoon:"    "},fa:{home:"",specialties:"",about:" ",menu:"",gallery:"",reviews:"",contact:"  ",discover:" ",ourSpecialties:" ",reservations:"",contactUs:"   ",makeReservation:" ",yourName:" ",phoneNumber:" ",date:"",time:"",numberOfGuests:"",specialRequests:"  ",requestReservation:" ",processingRequest:"  ...",findUs:"   ",address:"",phone:"",email:"",hours:" ",ourMenu:" ",menuDescription:"          ",downloadMenu:" ",menuUnavailable:"  PDF    ",menuComingSoon:"        "}},_m=b.createContext(void 0),Qb=({children:e})=>{const[t,r]=b.useState("it");b.useEffect(()=>{const o=localStorage.getItem("flowerShopSettings");if(o)try{const l=JSON.parse(o);l.defaultLanguage&&r(l.defaultLanguage)}catch{console.error("Failed to parse settings for language")}else{const l={totalSeats:50,reservationDuration:120,openingTime:"08:00",closingTime:"19:00",languages:["it","en","fr","ar","fa"],defaultLanguage:"it"};localStorage.setItem("flowerShopSettings",JSON.stringify(l))}document.documentElement.lang=t,t==="ar"||t==="fa"?document.documentElement.dir="rtl":document.documentElement.dir="ltr"},[t]);const i={language:t,setLanguage:o=>{r(o);const l=localStorage.getItem("flowerShopSettings");if(l)try{const c=JSON.parse(l);c.defaultLanguage=o,localStorage.setItem("flowerShopSettings",JSON.stringify(c))}catch{console.error("Failed to update language setting")}},t:o=>Dc[t][o]||Dc.en[o]||o};return n.jsx(_m.Provider,{value:i,children:e})},Mm=()=>{const e=b.useContext(_m);if(e===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return e},Zb=Va("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),z=b.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},i)=>{const o=s?Lh:"button";return n.jsx(o,{className:de(Zb({variant:t,size:r,className:e})),ref:i,...a})});z.displayName="Button";let lt=class extends b.Component{constructor(){super(...arguments);Ae(this,"state",{hasError:!1});Ae(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0})})}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,s){console.error(`ErrorBoundary caught an error in ${this.props.componentName||"component"}:`,r,s)}render(){var r;return this.state.hasError?this.props.fallback?this.props.fallback:n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-red-50 border border-red-200 rounded-lg m-4",children:[n.jsx(no,{className:"h-12 w-12 text-red-500 mb-4"}),n.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:["Something went wrong in ",this.props.componentName||"this component"]}),n.jsx("p",{className:"text-red-600 text-center mb-4 max-w-md",children:((r=this.state.error)==null?void 0:r.message)||"An unexpected error occurred"}),this.state.error&&n.jsxs("details",{className:"mb-4 max-w-2xl",children:[n.jsx("summary",{className:"cursor-pointer text-red-700 font-medium",children:"Show Error Details"}),n.jsx("pre",{className:"mt-2 p-3 bg-red-100 rounded text-xs text-red-800 overflow-auto max-h-40",children:this.state.error.stack})]}),n.jsxs(z,{onClick:this.handleRetry,variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-100",children:[n.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Try Again"]})]}):this.props.children}};const ie=b.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:de("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ie.displayName="Card";const xe=b.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:de("flex flex-col space-y-1.5 p-6",e),...t}));xe.displayName="CardHeader";const be=b.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:de("text-2xl font-semibold leading-none tracking-tight",e),...t}));be.displayName="CardTitle";const pl=b.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:de("text-sm text-muted-foreground",e),...t}));pl.displayName="CardDescription";const oe=b.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:de("p-6 pt-0",e),...t}));oe.displayName="CardContent";const Lm=b.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:de("flex items-center p-6 pt-0",e),...t}));Lm.displayName="CardFooter";const Jb="https://despodpgvkszyexvcbft.supabase.co",Xb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlc3BvZHBndmtzenlleHZjYmZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzNTcyMTAsImV4cCI6MjA2MzkzMzIxMH0.zyjFQA-Kr317M5l_6qjV_a-6ED2iU4wraRuYaa0iGEg",L=Kh(Jb,Xb),on=Object.freeze(Object.defineProperty({__proto__:null,supabase:L},Symbol.toStringTag,{value:"Module"})),ey=()=>{const[e,t]=b.useState(!1),[r,s]=b.useState([]),[a,i]=b.useState(!1),o=async()=>{i(!0),s([]);const c=[];c.push({name:"Environment Variables",status:"loading",message:"Checking environment configuration..."}),s([...c]);try{c[0]={name:"Environment Variables",status:"error",message:"Missing environment variables",details:"Supabase URL: , Anon Key: "}}catch(d){c[0]={name:"Environment Variables",status:"error",message:"Error checking environment variables",details:d instanceof Error?d.message:"Unknown error"}}s([...c]),c.push({name:"Supabase Connection",status:"loading",message:"Testing database connection..."}),s([...c]);try{const{error:d}=await L.from("settings").select("key").limit(1);c[1]={name:"Supabase Connection",status:d?"error":"success",message:d?"Database connection failed":"Database connection successful",details:d?d.message:"Connected to Supabase successfully"}}catch(d){c[1]={name:"Supabase Connection",status:"error",message:"Database connection error",details:d instanceof Error?d.message:"Unknown connection error"}}s([...c]),c.push({name:"Settings Table",status:"loading",message:"Checking settings table..."}),s([...c]);try{const{data:d,error:m}=await L.from("settings").select("*").limit(5);c[2]={name:"Settings Table",status:m?"error":"success",message:m?"Settings table access failed":`Settings table accessible (${(d==null?void 0:d.length)||0} records)`,details:m?m.message:`Found ${(d==null?void 0:d.length)||0} settings records`}}catch(d){c[2]={name:"Settings Table",status:"error",message:"Settings table error",details:d instanceof Error?d.message:"Unknown table error"}}s([...c]),c.push({name:"Logo Settings",status:"loading",message:"Checking logo configuration..."}),s([...c]);try{const m=!!localStorage.getItem("logoSettings");c[3]={name:"Logo Settings",status:m?"success":"error",message:m?"Logo settings found":"Logo settings missing",details:m?"Logo configuration available in localStorage":"No logo settings found"}}catch(d){c[3]={name:"Logo Settings",status:"error",message:"Logo settings error",details:d instanceof Error?d.message:"Unknown logo error"}}s([...c]),i(!1)},l=c=>{switch(c){case"loading":return n.jsx(ge,{className:"h-4 w-4 animate-spin text-blue-500"});case"success":return n.jsx(Ke,{className:"h-4 w-4 text-green-500"});case"error":return n.jsx(ju,{className:"h-4 w-4 text-red-500"})}};return e?n.jsx("div",{className:"fixed bottom-4 right-4 z-50 w-96",children:n.jsxs(ie,{className:"bg-white/95 backdrop-blur-sm shadow-lg",children:[n.jsx(xe,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(be,{className:"text-sm",children:"System Diagnostics"}),n.jsx(z,{onClick:()=>t(!1),variant:"ghost",size:"sm",children:n.jsx(ja,{className:"h-4 w-4"})})]})}),n.jsxs(oe,{className:"space-y-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(z,{onClick:o,disabled:a,className:"w-full",size:"sm",children:a?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"h-4 w-4 mr-2 animate-spin"}),"Running Tests..."]}):"Run Diagnostics"}),n.jsx(z,{onClick:()=>{window.stripeConfigCache&&delete window.stripeConfigCache,localStorage.removeItem("stripeConfig"),window.location.reload()},variant:"outline",className:"w-full",size:"sm",children:"Clear Cache & Reload"})]}),r.length>0&&n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:r.map((c,d)=>n.jsxs("div",{className:"flex items-start space-x-2 p-2 bg-gray-50 rounded text-xs",children:[l(c.status),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-gray-900",children:c.name}),n.jsx("div",{className:"text-gray-600",children:c.message}),c.details&&n.jsx("div",{className:"text-gray-500 mt-1",children:c.details})]})]},d))})]})]})}):n.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:n.jsxs(z,{onClick:()=>t(!0),variant:"outline",size:"sm",className:"bg-white/90 backdrop-blur-sm",children:[n.jsx(xs,{className:"h-4 w-4 mr-2"}),"Diagnostics"]})})},ty=()=>{const[e,t]=b.useState(!1),[r,s]=b.useState(!1);return b.useEffect(()=>{const i=setTimeout(async()=>{if(!(e||r)){s(!0);try{console.log(" [BackgroundInitializer] Starting initialization...");const{settingsService:o}=await wt(async()=>{const{settingsService:f}=await Promise.resolve().then(()=>xf);return{settingsService:f}},void 0),{initializeDatabase:l}=await wt(async()=>{const{initializeDatabase:f}=await Promise.resolve().then(()=>h0);return{initializeDatabase:f}},void 0),c=l(),d=new Promise((f,p)=>{setTimeout(()=>p(new Error("Database initialization timeout")),15e3)});try{await Promise.race([c,d])||console.warn(" [BackgroundInitializer] Database initialization returned false, but continuing...")}catch(f){console.warn(" [BackgroundInitializer] Database initialization failed, but continuing:",f)}const m=o.initialize(),u=new Promise((f,p)=>{setTimeout(()=>p(new Error("Settings initialization timeout")),1e4)});try{await Promise.race([m,u]),console.log(" [BackgroundInitializer] Settings initialized successfully")}catch(f){console.warn(" [BackgroundInitializer] Settings initialization failed, but continuing:",f)}console.log(" [BackgroundInitializer] Initialization completed"),t(!0)}catch(o){console.error(" [BackgroundInitializer] Initialization failed:",o),t(!0)}finally{s(!1)}}},100);return()=>clearTimeout(i)},[e,r]),null};var ei="Popover",[Bm,T2]=$n(ei,[Yn]),zs=Yn(),[ry,Mr]=Bm(ei),zm=e=>{const{__scopePopover:t,children:r,open:s,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=zs(t),c=b.useRef(null),[d,m]=b.useState(!1),[u,f]=vs({prop:s,defaultProp:a??!1,onChange:i,caller:ei});return n.jsx(pm,{...l,children:n.jsx(ry,{scope:t,contentId:Ua(),triggerRef:c,open:u,onOpenChange:f,onOpenToggle:b.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:d,onCustomAnchorAdd:b.useCallback(()=>m(!0),[]),onCustomAnchorRemove:b.useCallback(()=>m(!1),[]),modal:o,children:r})})};zm.displayName=ei;var $m="PopoverAnchor",ny=b.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Mr($m,r),i=zs(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return b.useEffect(()=>(o(),()=>l()),[o,l]),n.jsx(Za,{...i,...s,ref:t})});ny.displayName=$m;var qm="PopoverTrigger",Um=b.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Mr(qm,r),i=zs(r),o=$e(t,a.triggerRef),l=n.jsx(Ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Km(a.open),...s,ref:o,onClick:pe(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:n.jsx(Za,{asChild:!0,...i,children:l})});Um.displayName=qm;var hl="PopoverPortal",[sy,ay]=Bm(hl,{forceMount:void 0}),Hm=e=>{const{__scopePopover:t,forceMount:r,children:s,container:a}=e,i=Mr(hl,t);return n.jsx(sy,{scope:t,forceMount:r,children:n.jsx(qa,{present:r||i.open,children:n.jsx($o,{asChild:!0,container:a,children:s})})})};Hm.displayName=hl;var Mn="PopoverContent",Gm=b.forwardRef((e,t)=>{const r=ay(Mn,e.__scopePopover),{forceMount:s=r.forceMount,...a}=e,i=Mr(Mn,e.__scopePopover);return n.jsx(qa,{present:s||i.open,children:i.modal?n.jsx(oy,{...a,ref:t}):n.jsx(ly,{...a,ref:t})})});Gm.displayName=Mn;var iy=$d("PopoverContent.RemoveScroll"),oy=b.forwardRef((e,t)=>{const r=Mr(Mn,e.__scopePopover),s=b.useRef(null),a=$e(t,s),i=b.useRef(!1);return b.useEffect(()=>{const o=s.current;if(o)return Bd(o)},[]),n.jsx(zd,{as:iy,allowPinchZoom:!0,children:n.jsx(Vm,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:pe(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:pe(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),ly=b.forwardRef((e,t)=>{const r=Mr(Mn,e.__scopePopover),s=b.useRef(!1),a=b.useRef(!1);return n.jsx(Vm,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(s.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Vm=b.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:m,...u}=e,f=Mr(Mn,r),p=zs(r);return qd(),n.jsx(Ud,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:n.jsx(qo,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:m,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>f.onOpenChange(!1),children:n.jsx(il,{"data-state":Km(f.open),role:"dialog",id:f.contentId,...p,...u,ref:t,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Wm="PopoverClose",cy=b.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Mr(Wm,r);return n.jsx(Ce.button,{type:"button",...s,ref:t,onClick:pe(e.onClick,()=>a.onOpenChange(!1))})});cy.displayName=Wm;var dy="PopoverArrow",uy=b.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=zs(r);return n.jsx(ol,{...a,...s,ref:t})});uy.displayName=dy;function Km(e){return e?"open":"closed"}var my=zm,fy=Um,py=Hm,Ym=Gm;const Qm=my,Zm=fy,gl=b.forwardRef(({className:e,align:t="center",sideOffset:r=4,...s},a)=>n.jsx(py,{children:n.jsx(Ym,{ref:a,align:t,sideOffset:r,className:de("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));gl.displayName=Ym.displayName;const hy=()=>{const[e,t]=b.useState("it"),[r,s]=b.useState(!1),a=i=>{t(i)};return n.jsxs(Qm,{open:r,onOpenChange:s,children:[n.jsx(Zm,{asChild:!0,children:n.jsxs(z,{variant:"outline",size:"sm",className:"bg-white/90 border-gray-300 text-gray-700 hover:bg-gray-50 px-3 flex gap-2 shadow-sm",children:[n.jsx(Cg,{size:14,className:"text-gray-600"}),n.jsx("span",{className:"font-medium",children:e.toUpperCase()})]})}),n.jsx(gl,{className:"w-40 p-0 bg-white border border-gray-200 shadow-lg",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx(z,{variant:e==="it"?"default":"ghost",onClick:()=>{a("it"),s(!1)},className:`rounded-none justify-start text-sm ${e==="it"?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-100"}`,children:" Italiano"}),n.jsx(z,{variant:e==="en"?"default":"ghost",onClick:()=>{a("en"),s(!1)},className:`rounded-none justify-start text-sm ${e==="en"?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-100"}`,children:" English"}),n.jsx(z,{variant:e==="fr"?"default":"ghost",onClick:()=>{a("fr"),s(!1)},className:`rounded-none justify-start text-sm ${e==="fr"?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-100"}`,children:" Franais"}),n.jsx(z,{variant:e==="ar"?"default":"ghost",onClick:()=>{a("ar"),s(!1)},className:`rounded-none justify-start text-sm ${e==="ar"?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-100"}`,children:" "}),n.jsx(z,{variant:e==="fa"?"default":"ghost",onClick:()=>{a("fa"),s(!1)},className:`rounded-none justify-start text-sm ${e==="fa"?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-100"}`,children:" "})]})})]})},$s=()=>{const e={logoUrl:"https://despodpgvkszyexvcbft.supabase.co/storage/v1/object/public/uploads/logos/1749735172947-oi6nr6gnk7.png",altText:"Francesco Fiori & Piante Logo"},[t,r]=b.useState(!1),[s,a]=b.useState(!1),i=o=>({home:"Home",specialties:"Categorie",menu:"Prodotti",gallery:"Galleria",about:"Chi Siamo",makeReservation:"Fai un Ordine"})[o]||o;return n.jsx("header",{className:"fixed top-0 w-full bg-white/95 backdrop-blur-md shadow-sm border-b border-peach-100 z-50",children:n.jsx("div",{className:"container mx-auto px-4 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-8 animate-fade-in-left",children:[n.jsxs("div",{className:"flex items-center space-x-3 logo-container hover-scale",children:[!t&&!s&&n.jsx("div",{className:"h-12 w-12 bg-gradient-to-br from-peach-100 to-coral-100 rounded animate-pulse flex items-center justify-center",children:n.jsx(Gr,{className:"text-peach-400 animate-bounce",size:20})}),!s&&n.jsx("img",{src:e.logoUrl,alt:e.altText,className:`h-12 w-auto logo-smooth-load animate-scale-in hover-glow transition-opacity duration-300 ${t?"opacity-100":"opacity-0"}`,onLoad:o=>{console.log(" [Header] Logo loaded successfully"),o.currentTarget.classList.add("loaded"),r(!0)},onError:o=>{console.error(" [Header] Logo failed to load:",e.logoUrl),a(!0)}}),s&&n.jsx("div",{className:"h-12 flex items-center px-3 bg-gradient-to-r from-peach-500 to-coral-500 text-white rounded-lg font-bold text-sm",children:"Francesco Fiori"})]}),n.jsxs("nav",{className:"hidden md:flex space-x-8",children:[n.jsxs("a",{href:"/",className:"text-gray-700 hover:text-peach-500 transition-colors font-medium font-inter relative group animate-fade-in-up animate-stagger-1 hover-scale",children:[i("home"),n.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-peach-500 to-coral-500 transition-all duration-300 group-hover:w-full animate-shimmer"})]}),n.jsxs("a",{href:"/#categories",className:"text-gray-700 hover:text-coral-500 transition-colors font-medium font-inter relative group animate-fade-in-up animate-stagger-2 hover-scale",children:[i("specialties"),n.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-coral-500 to-peach-500 transition-all duration-300 group-hover:w-full animate-shimmer"})]}),n.jsxs(tc,{to:"/menu",className:"text-gray-700 hover:text-emerald-500 transition-colors font-medium font-inter relative group animate-fade-in-up animate-stagger-3 hover-scale",children:[i("menu"),n.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-emerald-500 to-emerald-600 transition-all duration-300 group-hover:w-full animate-shimmer"})]}),n.jsxs("a",{href:"/#gallery",className:"text-gray-700 hover:text-amber-500 transition-colors font-medium font-inter relative group animate-fade-in-up animate-stagger-4 hover-scale",children:[i("gallery"),n.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-amber-500 to-amber-600 transition-all duration-300 group-hover:w-full animate-shimmer"})]}),n.jsxs("a",{href:"/#about",className:"text-gray-700 hover:text-peach-500 transition-colors font-medium font-inter relative group animate-fade-in-up animate-stagger-5 hover-scale",children:[i("about"),n.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-peach-500 to-coral-500 transition-all duration-300 group-hover:w-full animate-shimmer"})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4 animate-fade-in-right",children:[n.jsx("div",{className:"animate-scale-in animate-stagger-1",children:n.jsx(hy,{})}),n.jsxs(tc,{to:"/order",className:"hidden sm:flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-peach-500 to-coral-500 text-white rounded-full hover:from-peach-600 hover:to-coral-600 transition-all duration-300 shadow-md hover:shadow-lg font-medium hover-lift animate-pulse-glow animate-scale-in animate-stagger-2",children:[n.jsx(Ar,{size:16,className:"animate-wiggle"}),i("makeReservation")]}),n.jsxs("button",{className:"relative p-3 text-gray-700 hover:text-peach-600 transition-colors bg-gradient-to-br from-peach-50 to-amber-50 hover:from-peach-100 hover:to-amber-100 rounded-full group shadow-md hover:shadow-lg hover-lift animate-bounce-gentle animate-scale-in animate-stagger-3",children:[n.jsx(rn,{size:20,className:"group-hover:animate-wiggle"}),n.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-coral-500 to-peach-500 text-white text-xs rounded-full flex items-center justify-center font-inter font-semibold shadow-md animate-heartbeat",children:"0"}),n.jsx(Gr,{className:"absolute -bottom-1 -right-1 text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-bounce animate-float",size:12})]})]})]})})})},gy=()=>{const[e,t]=b.useState({heading:"Francesco Fiori & Piante",subheading:"Creazioni floreali uniche per ogni occasione speciale",backgroundImage:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2071&q=80"}),[r,s]=b.useState({logoUrl:"https://despodpgvkszyexvcbft.supabase.co/storage/v1/object/public/uploads/logos/1749735172947-oi6nr6gnk7.png",altText:"Francesco Fiori & Piante Logo"}),[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,d]=b.useState(!0);return b.useEffect(()=>{const u=setTimeout(async()=>{try{const{settingsService:f}=await wt(async()=>{const{settingsService:j}=await Promise.resolve().then(()=>xf);return{settingsService:j}},void 0),p=f.initialize(),h=new Promise((j,C)=>{setTimeout(()=>C(new Error("Settings init timeout")),5e3)});await Promise.race([p,h]);const g=f.getSetting("heroContent",e),x=new Promise((j,C)=>{setTimeout(()=>C(new Error("Hero content timeout")),3e3)}),v=await Promise.race([g,x]);t(v);const y=f.getSetting("logoSettings",r),w=new Promise((j,C)=>{setTimeout(()=>C(new Error("Logo settings timeout")),3e3)}),N=await Promise.race([y,w]);s(N),console.log(" [Hero] Content loaded successfully")}catch(f){console.warn(" [Hero] Failed to load content, using defaults:",f)}finally{d(!1)}},500);return()=>clearTimeout(u)},[]),n.jsx("section",{className:"relative min-h-screen bg-gradient-to-br from-peach-50 via-white to-amber-50 overflow-hidden",children:n.jsxs("div",{className:"container mx-auto px-4 pt-32 pb-20",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center min-h-[80vh]",children:[n.jsx("div",{className:"text-center lg:text-left space-y-8 animate-fade-in-left",children:n.jsx("div",{className:"flex justify-center lg:justify-start mb-8",children:n.jsxs("div",{className:"relative",children:[!o&&n.jsx("div",{className:"h-96 md:h-[480px] w-96 bg-gradient-to-br from-peach-100 to-coral-100 rounded-3xl animate-pulse flex items-center justify-center",children:n.jsx(Gr,{className:"text-peach-300 animate-float",size:64})}),r.logoUrl&&n.jsx("img",{src:r.logoUrl,alt:r.altText,className:`h-96 md:h-[480px] w-auto object-contain drop-shadow-2xl transition-all duration-700 hover-scale animate-scale-in ${o?"opacity-100":"opacity-0"}`,onLoad:()=>{console.log(" [Hero] Large logo loaded successfully"),l(!0)},onError:m=>{console.error(" [Hero] Large logo failed to load:",r.logoUrl),l(!0)}}),n.jsxs("div",{className:"hidden text-center",children:[n.jsx(Gr,{className:"h-24 w-24 text-peach-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 font-playfair",children:"Francesco Fiori & Piante"})]})]})})}),n.jsx("div",{className:"relative animate-fade-in-right animate-stagger-1",children:n.jsxs("div",{className:"relative rounded-3xl overflow-hidden shadow-2xl bg-gradient-to-br from-white via-peach-50 to-amber-50 p-8 hover-lift",children:[!a&&n.jsx("div",{className:"absolute inset-8 rounded-2xl bg-gradient-to-br from-peach-100 to-coral-100 animate-pulse flex items-center justify-center",children:n.jsx(Gr,{className:"text-peach-300 animate-float",size:64})}),n.jsx("img",{src:e.backgroundImage,alt:"Beautiful flower arrangement",className:`w-full h-96 md:h-[500px] object-cover rounded-2xl transition-opacity duration-700 hover-scale ${a?"opacity-100":"opacity-0"}`,onLoad:()=>{i(!0)},onError:m=>{console.error(` Hero image failed to load: ${m.currentTarget.src}`);const u="https://images.unsplash.com/photo-1486718448742-163732cd1544?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80";m.currentTarget.src!==u?m.currentTarget.src=u:i(!1)}}),n.jsx("div",{className:"absolute inset-8 rounded-2xl bg-gradient-to-t from-black/20 via-transparent to-transparent"})]})})]}),n.jsxs("div",{className:"text-center space-y-8 animate-fade-in-up animate-stagger-2 mt-12",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-playfair font-bold text-gray-800 leading-tight animate-scale-in",children:n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-peach-500 via-coral-500 to-peach-600 animate-shimmer",children:e.heading})}),n.jsx("p",{className:"text-xl md:text-2xl text-gray-600 font-inter font-light max-w-3xl mx-auto leading-relaxed animate-fade-in-up animate-stagger-1",children:e.subheading})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center pt-4 animate-fade-in-up animate-stagger-2",children:[n.jsx("button",{className:"group bg-gradient-to-r from-peach-500 via-coral-500 to-peach-600 text-white px-10 py-4 rounded-full font-semibold font-inter hover:from-peach-600 hover:via-coral-600 hover:to-peach-700 transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl hover-lift animate-pulse-glow",children:n.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[n.jsx("span",{children:"Shop Flowers"}),n.jsx(Gr,{className:"group-hover:animate-bloom",size:18})]})}),n.jsx("button",{className:"group bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-10 py-4 rounded-full font-semibold font-inter hover:from-emerald-600 hover:to-emerald-700 transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl hover-lift animate-bounce-gentle",children:n.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[n.jsx("span",{children:"Browse Plants"}),n.jsx(Gr,{className:"group-hover:animate-bloom",size:18})]})})]})]})]})})};function vy(e){return Object.prototype.toString.call(e)==="[object Object]"}function Tc(e){return vy(e)||Array.isArray(e)}function xy(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function vl(e,t){const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;const a=JSON.stringify(Object.keys(e.breakpoints||{})),i=JSON.stringify(Object.keys(t.breakpoints||{}));return a!==i?!1:r.every(o=>{const l=e[o],c=t[o];return typeof l=="function"?`${l}`==`${c}`:!Tc(l)||!Tc(c)?l===c:vl(l,c)})}function kc(e){return e.concat().sort((t,r)=>t.name>r.name?1:-1).map(t=>t.options)}function by(e,t){if(e.length!==t.length)return!1;const r=kc(e),s=kc(t);return r.every((a,i)=>{const o=s[i];return vl(a,o)})}function xl(e){return typeof e=="number"}function Eo(e){return typeof e=="string"}function ti(e){return typeof e=="boolean"}function Ac(e){return Object.prototype.toString.call(e)==="[object Object]"}function _e(e){return Math.abs(e)}function bl(e){return Math.sign(e)}function ps(e,t){return _e(e-t)}function yy(e,t){if(e===0||t===0||_e(e)<=_e(t))return 0;const r=ps(_e(e),_e(t));return _e(r/e)}function wy(e){return Math.round(e*100)/100}function Ss(e){return Cs(e).map(Number)}function Mt(e){return e[qs(e)]}function qs(e){return Math.max(0,e.length-1)}function yl(e,t){return t===qs(e)}function Rc(e,t=0){return Array.from(Array(e),(r,s)=>t+s)}function Cs(e){return Object.keys(e)}function Jm(e,t){return[e,t].reduce((r,s)=>(Cs(s).forEach(a=>{const i=r[a],o=s[a],l=Ac(i)&&Ac(o);r[a]=l?Jm(i,o):o}),r),{})}function Po(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function Ny(e,t){const r={start:s,center:a,end:i};function s(){return 0}function a(c){return i(c)/2}function i(c){return t-c}function o(c,d){return Eo(e)?r[e](c):e(t,c,d)}return{measure:o}}function Es(){let e=[];function t(a,i,o,l={passive:!0}){let c;if("addEventListener"in a)a.addEventListener(i,o,l),c=()=>a.removeEventListener(i,o,l);else{const d=a;d.addListener(o),c=()=>d.removeListener(o)}return e.push(c),s}function r(){e=e.filter(a=>a())}const s={add:t,clear:r};return s}function jy(e,t,r,s){const a=Es(),i=1e3/60;let o=null,l=0,c=0;function d(){a.add(e,"visibilitychange",()=>{e.hidden&&h()})}function m(){p(),a.clear()}function u(x){if(!c)return;o||(o=x,r(),r());const v=x-o;for(o=x,l+=v;l>=i;)r(),l-=i;const y=l/i;s(y),c&&(c=t.requestAnimationFrame(u))}function f(){c||(c=t.requestAnimationFrame(u))}function p(){t.cancelAnimationFrame(c),o=null,l=0,c=0}function h(){o=null,l=0}return{init:d,destroy:m,start:f,stop:p,update:r,render:s}}function Sy(e,t){const r=t==="rtl",s=e==="y",a=s?"y":"x",i=s?"x":"y",o=!s&&r?-1:1,l=m(),c=u();function d(h){const{height:g,width:x}=h;return s?g:x}function m(){return s?"top":r?"right":"left"}function u(){return s?"bottom":r?"left":"right"}function f(h){return h*o}return{scroll:a,cross:i,startEdge:l,endEdge:c,measureSize:d,direction:f}}function ln(e=0,t=0){const r=_e(e-t);function s(d){return d<e}function a(d){return d>t}function i(d){return s(d)||a(d)}function o(d){return i(d)?s(d)?e:t:d}function l(d){return r?d-r*Math.ceil((d-t)/r):d}return{length:r,max:t,min:e,constrain:o,reachedAny:i,reachedMax:a,reachedMin:s,removeOffset:l}}function Xm(e,t,r){const{constrain:s}=ln(0,e),a=e+1;let i=o(t);function o(f){return r?_e((a+f)%a):s(f)}function l(){return i}function c(f){return i=o(f),u}function d(f){return m().set(l()+f)}function m(){return Xm(e,l(),r)}const u={get:l,set:c,add:d,clone:m};return u}function Cy(e,t,r,s,a,i,o,l,c,d,m,u,f,p,h,g,x,v,y){const{cross:w,direction:N}=e,j=["INPUT","SELECT","TEXTAREA"],C={passive:!1},P=Es(),S=Es(),D=ln(50,225).constrain(p.measure(20)),A={mouse:300,touch:400},R={mouse:500,touch:600},E=h?43:25;let k=!1,T=0,_=0,M=!1,O=!1,F=!1,B=!1;function W(U){if(!y)return;function ae(Te){(ti(y)||y(U,Te))&&Ie(Te)}const he=t;P.add(he,"dragstart",Te=>Te.preventDefault(),C).add(he,"touchmove",()=>{},C).add(he,"touchend",()=>{}).add(he,"touchstart",ae).add(he,"mousedown",ae).add(he,"touchcancel",ne).add(he,"contextmenu",ne).add(he,"click",ve,!0)}function K(){P.clear(),S.clear()}function G(){const U=B?r:t;S.add(U,"touchmove",q,C).add(U,"touchend",ne).add(U,"mousemove",q,C).add(U,"mouseup",ne)}function ee(U){const ae=U.nodeName||"";return j.includes(ae)}function Q(){return(h?R:A)[B?"mouse":"touch"]}function me(U,ae){const he=u.add(bl(U)*-1),Te=m.byDistance(U,!h).distance;return h||_e(U)<D?Te:x&&ae?Te*.5:m.byIndex(he.get(),0).distance}function Ie(U){const ae=Po(U,s);B=ae,F=h&&ae&&!U.buttons&&k,k=ps(a.get(),o.get())>=2,!(ae&&U.button!==0)&&(ee(U.target)||(M=!0,i.pointerDown(U),d.useFriction(0).useDuration(0),a.set(o),G(),T=i.readPoint(U),_=i.readPoint(U,w),f.emit("pointerDown")))}function q(U){if(!Po(U,s)&&U.touches.length>=2)return ne(U);const he=i.readPoint(U),Te=i.readPoint(U,w),Oe=ps(he,T),Le=ps(Te,_);if(!O&&!B&&(!U.cancelable||(O=Oe>Le,!O)))return ne(U);const Ze=i.pointerMove(U);Oe>g&&(F=!0),d.useFriction(.3).useDuration(.75),l.start(),a.add(N(Ze)),U.preventDefault()}function ne(U){const he=m.byDistance(0,!1).index!==u.get(),Te=i.pointerUp(U)*Q(),Oe=me(N(Te),he),Le=yy(Te,Oe),Ze=E-10*Le,Be=v+Le/50;O=!1,M=!1,S.clear(),d.useDuration(Ze).useFriction(Be),c.distance(Oe,!h),B=!1,f.emit("pointerUp")}function ve(U){F&&(U.stopPropagation(),U.preventDefault(),F=!1)}function J(){return M}return{init:W,destroy:K,pointerDown:J}}function Ey(e,t){let s,a;function i(u){return u.timeStamp}function o(u,f){const h=`client${(f||e.scroll)==="x"?"X":"Y"}`;return(Po(u,t)?u:u.touches[0])[h]}function l(u){return s=u,a=u,o(u)}function c(u){const f=o(u)-o(a),p=i(u)-i(s)>170;return a=u,p&&(s=u),f}function d(u){if(!s||!a)return 0;const f=o(a)-o(s),p=i(u)-i(s),h=i(u)-i(a)>170,g=f/p;return p&&!h&&_e(g)>.1?g:0}return{pointerDown:l,pointerMove:c,pointerUp:d,readPoint:o}}function Py(){function e(r){const{offsetTop:s,offsetLeft:a,offsetWidth:i,offsetHeight:o}=r;return{top:s,right:a+i,bottom:s+o,left:a,width:i,height:o}}return{measure:e}}function Iy(e){function t(s){return e*(s/100)}return{measure:t}}function Dy(e,t,r,s,a,i,o){const l=[e].concat(s);let c,d,m=[],u=!1;function f(x){return a.measureSize(o.measure(x))}function p(x){if(!i)return;d=f(e),m=s.map(f);function v(y){for(const w of y){if(u)return;const N=w.target===e,j=s.indexOf(w.target),C=N?d:m[j],P=f(N?e:s[j]);if(_e(P-C)>=.5){x.reInit(),t.emit("resize");break}}}c=new ResizeObserver(y=>{(ti(i)||i(x,y))&&v(y)}),r.requestAnimationFrame(()=>{l.forEach(y=>c.observe(y))})}function h(){u=!0,c&&c.disconnect()}return{init:p,destroy:h}}function Ty(e,t,r,s,a,i){let o=0,l=0,c=a,d=i,m=e.get(),u=0;function f(){const C=s.get()-e.get(),P=!c;let S=0;return P?(o=0,r.set(s),e.set(s),S=C):(r.set(e),o+=C/c,o*=d,m+=o,e.add(o),S=m-u),l=bl(S),u=m,j}function p(){const C=s.get()-t.get();return _e(C)<.001}function h(){return c}function g(){return l}function x(){return o}function v(){return w(a)}function y(){return N(i)}function w(C){return c=C,j}function N(C){return d=C,j}const j={direction:g,duration:h,velocity:x,seek:f,settled:p,useBaseFriction:y,useBaseDuration:v,useFriction:N,useDuration:w};return j}function ky(e,t,r,s,a){const i=a.measure(10),o=a.measure(50),l=ln(.1,.99);let c=!1;function d(){return!(c||!e.reachedAny(r.get())||!e.reachedAny(t.get()))}function m(p){if(!d())return;const h=e.reachedMin(t.get())?"min":"max",g=_e(e[h]-t.get()),x=r.get()-t.get(),v=l.constrain(g/o);r.subtract(x*v),!p&&_e(x)<i&&(r.set(e.constrain(r.get())),s.useDuration(25).useBaseFriction())}function u(p){c=!p}return{shouldConstrain:d,constrain:m,toggleActive:u}}function Ay(e,t,r,s,a){const i=ln(-t+e,0),o=u(),l=m(),c=f();function d(h,g){return ps(h,g)<=1}function m(){const h=o[0],g=Mt(o),x=o.lastIndexOf(h),v=o.indexOf(g)+1;return ln(x,v)}function u(){return r.map((h,g)=>{const{min:x,max:v}=i,y=i.constrain(h),w=!g,N=yl(r,g);return w?v:N||d(x,y)?x:d(v,y)?v:y}).map(h=>parseFloat(h.toFixed(3)))}function f(){if(t<=e+a)return[i.max];if(s==="keepSnaps")return o;const{min:h,max:g}=l;return o.slice(h,g)}return{snapsContained:c,scrollContainLimit:l}}function Ry(e,t,r){const s=t[0],a=r?s-e:Mt(t);return{limit:ln(a,s)}}function Oy(e,t,r,s){const i=t.min+.1,o=t.max+.1,{reachedMin:l,reachedMax:c}=ln(i,o);function d(f){return f===1?c(r.get()):f===-1?l(r.get()):!1}function m(f){if(!d(f))return;const p=e*(f*-1);s.forEach(h=>h.add(p))}return{loop:m}}function Fy(e){const{max:t,length:r}=e;function s(i){const o=i-t;return r?o/-r:0}return{get:s}}function _y(e,t,r,s,a){const{startEdge:i,endEdge:o}=e,{groupSlides:l}=a,c=u().map(t.measure),d=f(),m=p();function u(){return l(s).map(g=>Mt(g)[o]-g[0][i]).map(_e)}function f(){return s.map(g=>r[i]-g[i]).map(g=>-_e(g))}function p(){return l(d).map(g=>g[0]).map((g,x)=>g+c[x])}return{snaps:d,snapsAligned:m}}function My(e,t,r,s,a,i){const{groupSlides:o}=a,{min:l,max:c}=s,d=m();function m(){const f=o(i),p=!e||t==="keepSnaps";return r.length===1?[i]:p?f:f.slice(l,c).map((h,g,x)=>{const v=!g,y=yl(x,g);if(v){const w=Mt(x[0])+1;return Rc(w)}if(y){const w=qs(i)-Mt(x)[0]+1;return Rc(w,Mt(x)[0])}return h})}return{slideRegistry:d}}function Ly(e,t,r,s,a){const{reachedAny:i,removeOffset:o,constrain:l}=s;function c(h){return h.concat().sort((g,x)=>_e(g)-_e(x))[0]}function d(h){const g=e?o(h):l(h),x=t.map((y,w)=>({diff:m(y-g,0),index:w})).sort((y,w)=>_e(y.diff)-_e(w.diff)),{index:v}=x[0];return{index:v,distance:g}}function m(h,g){const x=[h,h+r,h-r];if(!e)return h;if(!g)return c(x);const v=x.filter(y=>bl(y)===g);return v.length?c(v):Mt(x)-r}function u(h,g){const x=t[h]-a.get(),v=m(x,g);return{index:h,distance:v}}function f(h,g){const x=a.get()+h,{index:v,distance:y}=d(x),w=!e&&i(x);if(!g||w)return{index:v,distance:h};const N=t[v]-y,j=h+m(N,0);return{index:v,distance:j}}return{byDistance:f,byIndex:u,shortcut:m}}function By(e,t,r,s,a,i,o){function l(u){const f=u.distance,p=u.index!==t.get();i.add(f),f&&(s.duration()?e.start():(e.update(),e.render(1),e.update())),p&&(r.set(t.get()),t.set(u.index),o.emit("select"))}function c(u,f){const p=a.byDistance(u,f);l(p)}function d(u,f){const p=t.clone().set(u),h=a.byIndex(p.get(),f);l(h)}return{distance:c,index:d}}function zy(e,t,r,s,a,i,o,l){const c={passive:!0,capture:!0};let d=0;function m(p){if(!l)return;function h(g){if(new Date().getTime()-d>10)return;o.emit("slideFocusStart"),e.scrollLeft=0;const y=r.findIndex(w=>w.includes(g));xl(y)&&(a.useDuration(0),s.index(y,0),o.emit("slideFocus"))}i.add(document,"keydown",u,!1),t.forEach((g,x)=>{i.add(g,"focus",v=>{(ti(l)||l(p,v))&&h(x)},c)})}function u(p){p.code==="Tab"&&(d=new Date().getTime())}return{init:m}}function us(e){let t=e;function r(){return t}function s(c){t=o(c)}function a(c){t+=o(c)}function i(c){t-=o(c)}function o(c){return xl(c)?c:c.get()}return{get:r,set:s,add:a,subtract:i}}function ef(e,t){const r=e.scroll==="x"?o:l,s=t.style;let a=null,i=!1;function o(f){return`translate3d(${f}px,0px,0px)`}function l(f){return`translate3d(0px,${f}px,0px)`}function c(f){if(i)return;const p=wy(e.direction(f));p!==a&&(s.transform=r(p),a=p)}function d(f){i=!f}function m(){i||(s.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:m,to:c,toggleActive:d}}function $y(e,t,r,s,a,i,o,l,c){const m=Ss(a),u=Ss(a).reverse(),f=v().concat(y());function p(P,S){return P.reduce((D,A)=>D-a[A],S)}function h(P,S){return P.reduce((D,A)=>p(D,S)>0?D.concat([A]):D,[])}function g(P){return i.map((S,D)=>({start:S-s[D]+.5+P,end:S+t-.5+P}))}function x(P,S,D){const A=g(S);return P.map(R=>{const E=D?0:-r,k=D?r:0,T=D?"end":"start",_=A[R][T];return{index:R,loopPoint:_,slideLocation:us(-1),translate:ef(e,c[R]),target:()=>l.get()>_?E:k}})}function v(){const P=o[0],S=h(u,P);return x(S,r,!1)}function y(){const P=t-o[0]-1,S=h(m,P);return x(S,-r,!0)}function w(){return f.every(({index:P})=>{const S=m.filter(D=>D!==P);return p(S,t)<=.1})}function N(){f.forEach(P=>{const{target:S,translate:D,slideLocation:A}=P,R=S();R!==A.get()&&(D.to(R),A.set(R))})}function j(){f.forEach(P=>P.translate.clear())}return{canLoop:w,clear:j,loop:N,loopPoints:f}}function qy(e,t,r){let s,a=!1;function i(c){if(!r)return;function d(m){for(const u of m)if(u.type==="childList"){c.reInit(),t.emit("slidesChanged");break}}s=new MutationObserver(m=>{a||(ti(r)||r(c,m))&&d(m)}),s.observe(e,{childList:!0})}function o(){s&&s.disconnect(),a=!0}return{init:i,destroy:o}}function Uy(e,t,r,s){const a={};let i=null,o=null,l,c=!1;function d(){l=new IntersectionObserver(h=>{c||(h.forEach(g=>{const x=t.indexOf(g.target);a[x]=g}),i=null,o=null,r.emit("slidesInView"))},{root:e.parentElement,threshold:s}),t.forEach(h=>l.observe(h))}function m(){l&&l.disconnect(),c=!0}function u(h){return Cs(a).reduce((g,x)=>{const v=parseInt(x),{isIntersecting:y}=a[v];return(h&&y||!h&&!y)&&g.push(v),g},[])}function f(h=!0){if(h&&i)return i;if(!h&&o)return o;const g=u(h);return h&&(i=g),h||(o=g),g}return{init:d,destroy:m,get:f}}function Hy(e,t,r,s,a,i){const{measureSize:o,startEdge:l,endEdge:c}=e,d=r[0]&&a,m=h(),u=g(),f=r.map(o),p=x();function h(){if(!d)return 0;const y=r[0];return _e(t[l]-y[l])}function g(){if(!d)return 0;const y=i.getComputedStyle(Mt(s));return parseFloat(y.getPropertyValue(`margin-${c}`))}function x(){return r.map((y,w,N)=>{const j=!w,C=yl(N,w);return j?f[w]+m:C?f[w]+u:N[w+1][l]-y[l]}).map(_e)}return{slideSizes:f,slideSizesWithGaps:p,startGap:m,endGap:u}}function Gy(e,t,r,s,a,i,o,l,c){const{startEdge:d,endEdge:m,direction:u}=e,f=xl(r);function p(v,y){return Ss(v).filter(w=>w%y===0).map(w=>v.slice(w,w+y))}function h(v){return v.length?Ss(v).reduce((y,w,N)=>{const j=Mt(y)||0,C=j===0,P=w===qs(v),S=a[d]-i[j][d],D=a[d]-i[w][m],A=!s&&C?u(o):0,R=!s&&P?u(l):0,E=_e(D-R-(S+A));return N&&E>t+c&&y.push(w),P&&y.push(v.length),y},[]).map((y,w,N)=>{const j=Math.max(N[w-1]||0);return v.slice(j,y)}):[]}function g(v){return f?p(v,r):h(v)}return{groupSlides:g}}function Vy(e,t,r,s,a,i,o){const{align:l,axis:c,direction:d,startIndex:m,loop:u,duration:f,dragFree:p,dragThreshold:h,inViewThreshold:g,slidesToScroll:x,skipSnaps:v,containScroll:y,watchResize:w,watchSlides:N,watchDrag:j,watchFocus:C}=i,P=2,S=Py(),D=S.measure(t),A=r.map(S.measure),R=Sy(c,d),E=R.measureSize(D),k=Iy(E),T=Ny(l,E),_=!u&&!!y,M=u||!!y,{slideSizes:O,slideSizesWithGaps:F,startGap:B,endGap:W}=Hy(R,D,A,r,M,a),K=Gy(R,E,x,u,D,A,B,W,P),{snaps:G,snapsAligned:ee}=_y(R,T,D,A,K),Q=-Mt(G)+Mt(F),{snapsContained:me,scrollContainLimit:Ie}=Ay(E,Q,ee,y,P),q=_?me:ee,{limit:ne}=Ry(Q,q,u),ve=Xm(qs(q),m,u),J=ve.clone(),Y=Ss(r),U=({dragHandler:St,scrollBody:rs,scrollBounds:pn,options:{loop:lr}})=>{lr||pn.constrain(St.pointerDown()),rs.seek()},ae=({scrollBody:St,translate:rs,location:pn,offsetLocation:lr,previousLocation:cr,scrollLooper:aa,slideLooper:dr,dragHandler:Ti,animation:ki,eventHandler:ns,scrollBounds:ia,options:{loop:oa}},hn)=>{const Ct=St.settled(),Ai=!ia.shouldConstrain(),le=oa?Ct:Ct&&Ai,je=le&&!Ti.pointerDown();je&&ki.stop();const ke=pn.get()*hn+cr.get()*(1-hn);lr.set(ke),oa&&(aa.loop(St.direction()),dr.loop()),rs.to(lr.get()),je&&ns.emit("settle"),le||ns.emit("scroll")},he=jy(s,a,()=>U(ts),St=>ae(ts,St)),Te=.68,Oe=q[ve.get()],Le=us(Oe),Ze=us(Oe),Be=us(Oe),rt=us(Oe),Nt=Ty(Le,Be,Ze,rt,f,Te),fn=Ly(u,q,Q,ne,rt),jt=By(he,ve,J,Nt,fn,rt,o),na=Fy(ne),sa=Es(),nt=Uy(t,r,o,g),{slideRegistry:Jt}=My(_,y,q,Ie,K,Y),Di=zy(e,r,Jt,jt,Nt,sa,o,C),ts={ownerDocument:s,ownerWindow:a,eventHandler:o,containerRect:D,slideRects:A,animation:he,axis:R,dragHandler:Cy(R,e,s,a,rt,Ey(R,a),Le,he,jt,Nt,fn,ve,o,k,p,h,v,Te,j),eventStore:sa,percentOfView:k,index:ve,indexPrevious:J,limit:ne,location:Le,offsetLocation:Be,previousLocation:Ze,options:i,resizeHandler:Dy(t,o,a,r,R,w,S),scrollBody:Nt,scrollBounds:ky(ne,Be,rt,Nt,k),scrollLooper:Oy(Q,ne,Be,[Le,Be,Ze,rt]),scrollProgress:na,scrollSnapList:q.map(na.get),scrollSnaps:q,scrollTarget:fn,scrollTo:jt,slideLooper:$y(R,E,Q,O,F,G,q,Be,r),slideFocus:Di,slidesHandler:qy(t,o,N),slidesInView:nt,slideIndexes:Y,slideRegistry:Jt,slidesToScroll:K,target:rt,translate:ef(R,t)};return ts}function Wy(){let e={},t;function r(d){t=d}function s(d){return e[d]||[]}function a(d){return s(d).forEach(m=>m(t,d)),c}function i(d,m){return e[d]=s(d).concat([m]),c}function o(d,m){return e[d]=s(d).filter(u=>u!==m),c}function l(){e={}}const c={init:r,emit:a,off:o,on:i,clear:l};return c}const Ky={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function Yy(e){function t(i,o){return Jm(i,o||{})}function r(i){const o=i.breakpoints||{},l=Cs(o).filter(c=>e.matchMedia(c).matches).map(c=>o[c]).reduce((c,d)=>t(c,d),{});return t(i,l)}function s(i){return i.map(o=>Cs(o.breakpoints||{})).reduce((o,l)=>o.concat(l),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:r,optionsMediaQueries:s}}function Qy(e){let t=[];function r(i,o){return t=o.filter(({options:l})=>e.optionsAtMedia(l).active!==!1),t.forEach(l=>l.init(i,e)),o.reduce((l,c)=>Object.assign(l,{[c.name]:c}),{})}function s(){t=t.filter(i=>i.destroy())}return{init:r,destroy:s}}function Ta(e,t,r){const s=e.ownerDocument,a=s.defaultView,i=Yy(a),o=Qy(i),l=Es(),c=Wy(),{mergeOptions:d,optionsAtMedia:m,optionsMediaQueries:u}=i,{on:f,off:p,emit:h}=c,g=R;let x=!1,v,y=d(Ky,Ta.globalOptions),w=d(y),N=[],j,C,P;function S(){const{container:Y,slides:U}=w;C=(Eo(Y)?e.querySelector(Y):Y)||e.children[0];const he=Eo(U)?C.querySelectorAll(U):U;P=[].slice.call(he||C.children)}function D(Y){const U=Vy(e,C,P,s,a,Y,c);if(Y.loop&&!U.slideLooper.canLoop()){const ae=Object.assign({},Y,{loop:!1});return D(ae)}return U}function A(Y,U){x||(y=d(y,Y),w=m(y),N=U||N,S(),v=D(w),u([y,...N.map(({options:ae})=>ae)]).forEach(ae=>l.add(ae,"change",R)),w.active&&(v.translate.to(v.location.get()),v.animation.init(),v.slidesInView.init(),v.slideFocus.init(J),v.eventHandler.init(J),v.resizeHandler.init(J),v.slidesHandler.init(J),v.options.loop&&v.slideLooper.loop(),C.offsetParent&&P.length&&v.dragHandler.init(J),j=o.init(J,N)))}function R(Y,U){const ae=K();E(),A(d({startIndex:ae},Y),U),c.emit("reInit")}function E(){v.dragHandler.destroy(),v.eventStore.clear(),v.translate.clear(),v.slideLooper.clear(),v.resizeHandler.destroy(),v.slidesHandler.destroy(),v.slidesInView.destroy(),v.animation.destroy(),o.destroy(),l.clear()}function k(){x||(x=!0,l.clear(),E(),c.emit("destroy"),c.clear())}function T(Y,U,ae){!w.active||x||(v.scrollBody.useBaseFriction().useDuration(U===!0?0:w.duration),v.scrollTo.index(Y,ae||0))}function _(Y){const U=v.index.add(1).get();T(U,Y,-1)}function M(Y){const U=v.index.add(-1).get();T(U,Y,1)}function O(){return v.index.add(1).get()!==K()}function F(){return v.index.add(-1).get()!==K()}function B(){return v.scrollSnapList}function W(){return v.scrollProgress.get(v.offsetLocation.get())}function K(){return v.index.get()}function G(){return v.indexPrevious.get()}function ee(){return v.slidesInView.get()}function Q(){return v.slidesInView.get(!1)}function me(){return j}function Ie(){return v}function q(){return e}function ne(){return C}function ve(){return P}const J={canScrollNext:O,canScrollPrev:F,containerNode:ne,internalEngine:Ie,destroy:k,off:p,on:f,emit:h,plugins:me,previousScrollSnap:G,reInit:g,rootNode:q,scrollNext:_,scrollPrev:M,scrollProgress:W,scrollSnapList:B,scrollTo:T,selectedScrollSnap:K,slideNodes:ve,slidesInView:ee,slidesNotInView:Q};return A(t,r),setTimeout(()=>c.emit("init"),0),J}Ta.globalOptions=void 0;function wl(e={},t=[]){const r=b.useRef(e),s=b.useRef(t),[a,i]=b.useState(),[o,l]=b.useState(),c=b.useCallback(()=>{a&&a.reInit(r.current,s.current)},[a]);return b.useEffect(()=>{vl(r.current,e)||(r.current=e,c())},[e,c]),b.useEffect(()=>{by(s.current,t)||(s.current=t,c())},[t,c]),b.useEffect(()=>{if(xy()&&o){Ta.globalOptions=wl.globalOptions;const d=Ta(o,r.current,s.current);return i(d),()=>d.destroy()}else i(void 0)},[o,i]),[l,a]}wl.globalOptions=void 0;const tf=b.createContext(null);function ri(){const e=b.useContext(tf);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const rf=b.forwardRef(({orientation:e="horizontal",opts:t,setApi:r,plugins:s,className:a,children:i,...o},l)=>{const[c,d]=wl({...t,axis:e==="horizontal"?"x":"y"},s),[m,u]=b.useState(!1),[f,p]=b.useState(!1),h=b.useCallback(y=>{y&&(u(y.canScrollPrev()),p(y.canScrollNext()))},[]),g=b.useCallback(()=>{d==null||d.scrollPrev()},[d]),x=b.useCallback(()=>{d==null||d.scrollNext()},[d]),v=b.useCallback(y=>{y.key==="ArrowLeft"?(y.preventDefault(),g()):y.key==="ArrowRight"&&(y.preventDefault(),x())},[g,x]);return b.useEffect(()=>{!d||!r||r(d)},[d,r]),b.useEffect(()=>{if(d)return h(d),d.on("reInit",h),d.on("select",h),()=>{d==null||d.off("select",h)}},[d,h]),n.jsx(tf.Provider,{value:{carouselRef:c,api:d,opts:t,orientation:e||((t==null?void 0:t.axis)==="y"?"vertical":"horizontal"),scrollPrev:g,scrollNext:x,canScrollPrev:m,canScrollNext:f},children:n.jsx("div",{ref:l,onKeyDownCapture:v,className:de("relative",a),role:"region","aria-roledescription":"carousel",...o,children:i})})});rf.displayName="Carousel";const nf=b.forwardRef(({className:e,...t},r)=>{const{carouselRef:s,orientation:a}=ri();return n.jsx("div",{ref:s,className:"overflow-hidden",children:n.jsx("div",{ref:r,className:de("flex",a==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...t})})});nf.displayName="CarouselContent";const sf=b.forwardRef(({className:e,...t},r)=>{const{orientation:s}=ri();return n.jsx("div",{ref:r,role:"group","aria-roledescription":"slide",className:de("min-w-0 shrink-0 grow-0 basis-full",s==="horizontal"?"pl-4":"pt-4",e),...t})});sf.displayName="CarouselItem";const af=b.forwardRef(({className:e,variant:t="outline",size:r="icon",...s},a)=>{const{orientation:i,scrollPrev:o,canScrollPrev:l}=ri();return n.jsxs(z,{ref:a,variant:t,size:r,className:de("absolute  h-8 w-8 rounded-full",i==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!l,onClick:o,...s,children:[n.jsx(Su,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Previous slide"})]})});af.displayName="CarouselPrevious";const of=b.forwardRef(({className:e,variant:t="outline",size:r="icon",...s},a)=>{const{orientation:i,scrollNext:o,canScrollNext:l}=ri();return n.jsxs(z,{ref:a,variant:t,size:r,className:de("absolute h-8 w-8 rounded-full",i==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!l,onClick:o,...s,children:[n.jsx(Ng,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Next slide"})]})});of.displayName="CarouselNext";const Zy=Va("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ue({className:e,variant:t,...r}){return n.jsx("div",{className:de(Zy({variant:t}),e),...r})}const Jy=({category:e})=>n.jsxs("div",{className:"bg-gradient-to-br from-white to-peach-50/30 rounded-2xl p-8 shadow-lg border border-peach-100/50",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.icon,n.jsx("h3",{className:"text-2xl font-bold text-gray-800 font-playfair",children:e.title})]}),n.jsx("div",{className:"mb-6",children:n.jsxs(rf,{className:"w-full max-w-xs mx-auto",children:[n.jsx(nf,{children:e.images.map((t,r)=>n.jsx(sf,{children:n.jsxs("div",{className:"aspect-square overflow-hidden rounded-xl relative",children:[n.jsx("img",{src:t,alt:`${e.title} ${r+1}`,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-500"}),e.labels&&e.labels.length>0&&n.jsx("div",{className:"absolute top-2 left-2 flex flex-wrap gap-1",children:e.labels.map((s,a)=>n.jsxs(Ue,{variant:"outline",className:"bg-white/90 text-blue-700 border-blue-200 text-xs backdrop-blur-sm",children:[n.jsx(Un,{className:"w-3 h-3 mr-1"}),s]},a))})]})},r))}),n.jsx(af,{className:"bg-white/80 hover:bg-white border-peach-200"}),n.jsx(of,{className:"bg-white/80 hover:bg-white border-peach-200"})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-700 font-inter leading-relaxed",children:e.explanation}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3 font-playfair",children:"Caratteristiche:"}),n.jsx("ul",{className:"space-y-2",children:e.features.map((t,r)=>n.jsxs("li",{className:"flex items-center gap-2 text-gray-600 font-inter",children:[n.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-peach-400 to-coral-500 rounded-full"}),t]},r))})]})]})]}),Xy=()=>{const[e,t]=b.useState([]),[r,s]=b.useState({}),[a,i]=b.useState(!0);b.useEffect(()=>{o(),l()},[]);const o=async()=>{try{const{data:d,error:m}=await L.from("category_pictures").select("*").eq("is_active",!0).order("position");!m&&d&&t(d)}catch(d){console.log("Could not load category pictures:",d)}},l=async()=>{try{console.log("[Categories] Loading category galleries from database...");const d=["matrimoni","fiori_piante","fiori_finti","funerali"],m={};for(const u of d){const{data:f,error:p}=await L.from("content_sections").select("content_value").eq("section_key",`category_${u}_images`).single();if(!p&&(f!=null&&f.content_value))try{const h=JSON.parse(f.content_value);console.log(`[Categories] Loaded ${u} gallery:`,h);let g=[],x=[];Array.isArray(h)&&(h.length>0&&typeof h[0]=="string"?(g=h.filter(v=>v&&v.trim()),x=[]):(g=h.filter(v=>v&&v.url&&v.url.trim()).map(v=>v.url.trim()),x=h.filter(v=>v&&v.url&&v.url.trim()).map(v=>v.label||""))),m[u]={images:g,labels:x}}catch(h){console.error(`[Categories] Error parsing ${u} gallery:`,h)}else console.log(`[Categories] No gallery data found for ${u}`)}s(m),console.log("[Categories] All category galleries loaded:",m)}catch(d){console.error("[Categories] Error loading category galleries:",d)}finally{i(!1)}},c=()=>{var m,u,f,p,h,g,x,v;const d={fiori_piante:["https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1440342359743-84fcb8c21f21?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1416879595882-3373a0480b5b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1518335935020-cfd6580c1ab4?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"],fiori_finti:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1502780402662-acc01917738e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1454391304352-2bf4678b1a7a?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"],matrimoni:["https://images.unsplash.com/photo-1519225421980-715cb0215aed?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1511285560929-80b456fea0bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1606800052052-a08af7148866?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1521543298264-785fba19d562?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"],funerali:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1595207759571-3a4df3c49230?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1490750967868-88aa4486c946?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1583160247711-2191776b4b91?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"]};return[{title:"Fiori & Piante",description:"Fiori freschi e piante di qualit premium",images:((m=r.fiori_piante)==null?void 0:m.images)||d.fiori_piante,explanation:"Da Francesco Fiori & Piante, troverai un'ampia scelta di fiori freschi di stagione e piante ornamentali per ogni ambiente. Che tu stia cercando una pianta verde per il tuo salotto o un mazzo colorato per sorprendere una persona cara, siamo qui per consigliarti con passione e competenza.",features:["Fiori freschi tagliati quotidianamente","Piante da interno e esterno","Composizioni personalizzate","Garanzia di freschezza","Cura e manutenzione inclusa"],labels:((u=r.fiori_piante)==null?void 0:u.labels)||[],icon:n.jsx(Pr,{className:"text-emerald-500",size:28})},{title:"Fiori Finti",description:"Eleganti composizioni artificiali",images:((f=r.fiori_finti)==null?void 0:f.images)||d.fiori_finti,explanation:"Per chi desidera la bellezza dei fiori senza pensieri, proponiamo una collezione curata di fiori artificiali di alta qualit.",features:["Materiali di alta qualit","Aspetto realistico","Nessuna manutenzione richiesta","Durata illimitata","Resistenti agli allergeni","Perfetti per ogni ambiente"],labels:((p=r.fiori_finti)==null?void 0:p.labels)||[],icon:n.jsx(Tu,{className:"text-amber-500",size:28})},{title:"Matrimoni",description:"Allestimenti floreali per il giorno speciale",images:((h=r.matrimoni)==null?void 0:h.images)||d.matrimoni,explanation:"Rendiamo unico il giorno pi importante della tua vita con allestimenti floreali personalizzati per matrimoni. Bouquet da sposa, centrotavola, archi floreali e decorazioni per chiesa e location: tutto viene progettato su misura per raccontare la vostra storia d'amore con i fiori.",features:["Bouquet da sposa personalizzati","Centrotavola eleganti","Archi floreali per cerimonie","Decorazioni per chiesa","Allestimenti per location","Progettazione su misura","Consulenza personalizzata","Servizio completo matrimoni"],labels:((g=r.matrimoni)==null?void 0:g.labels)||[],icon:n.jsx(Pu,{className:"text-rose-500",size:28})},{title:"Funerali",description:"Composizioni di cordoglio e commemorazione",images:((x=r.funerali)==null?void 0:x.images)||d.funerali,explanation:"Nel momento del dolore, offriamo composizioni floreali sobrie ed eleganti per onorare la memoria dei tuoi cari.",features:["Composizioni tradizionali e moderne","Corone e cuscini floreali","Mazzi di cordoglio","Consegna tempestiva","Servizio discreto e rispettoso","Personalizzazione su richiesta"],labels:((v=r.funerali)==null?void 0:v.labels)||[],icon:n.jsx(Fu,{className:"text-sage-500",size:28})}]};return n.jsx("section",{id:"categories",className:"py-20 bg-gradient-to-br from-peach-50/30 via-white to-amber-50/30 overflow-hidden",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"text-center mb-12 animate-fade-in-up",children:[n.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-4 font-playfair animate-scale-in",children:"Esplora per Categoria"}),n.jsx("p",{className:"text-xl text-gray-600 font-inter animate-fade-in-up animate-stagger-1",children:"Scopri l'eleganza floreale firmata Francesco: fiori, piante e creazioni per ogni occasione. "})]}),n.jsxs("div",{className:"mb-16 animate-slide-in-up animate-stagger-2",children:[n.jsxs("div",{className:"text-center mb-8 animate-fade-in-down",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-2 font-playfair animate-bounce-gentle",children:"La Nostra Galleria"}),n.jsx("p",{className:"text-gray-600 animate-fade-in-up animate-stagger-1",children:"Scopri alcuni dei nostri lavori pi belli (incluso il tuo cane! )"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:!a&&e&&e.length>0?e.map((d,m)=>n.jsxs("div",{className:`group relative overflow-hidden rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 bg-white hover-lift animate-scale-in animate-stagger-${Math.min(m+1,5)}`,children:[n.jsx("div",{className:"aspect-[4/3] overflow-hidden",children:n.jsx("img",{src:d.image_url,alt:d.alt_text||`Gallery picture ${d.position}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 hover-glow"})}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),d.alt_text&&n.jsx("div",{className:"absolute bottom-4 left-4 right-4 text-white opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0",children:n.jsx("p",{className:"text-sm font-medium animate-fade-in-up",children:d.alt_text})}),n.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-all duration-300",children:n.jsx(Pr,{className:"text-white animate-float",size:20})})]},d.id)):[1,2,3].map(d=>n.jsx("div",{className:`group relative overflow-hidden rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 bg-white hover-lift animate-fade-in-up animate-stagger-${d}`,children:n.jsx("div",{className:"aspect-[4/3] overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-gray-500 animate-bounce-gentle",children:[n.jsx(Pr,{size:48,className:"mx-auto mb-2 text-gray-400 animate-float"}),n.jsxs("p",{className:"text-sm animate-fade-in-up",children:["Picture ",d]}),n.jsx("p",{className:"text-xs animate-fade-in-up animate-stagger-1",children:"Upload via Admin Panel"})]})})},d))})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 animate-fade-in-up animate-stagger-3",children:c().map((d,m)=>n.jsx("div",{className:`animate-scale-in animate-stagger-${Math.min(m+1,5)} hover-lift`,children:n.jsx(Jy,{category:d})},m))})]})})},e0=({product:e,name:t,price:r,image:s,description:a,onOrder:i,onViewDetails:o})=>{const l=(e==null?void 0:e.name)||t||"",c=e?`${e.price.toFixed(2)}`:r||"",d=(e==null?void 0:e.image_url)||s||"",m=(e==null?void 0:e.description)||a||"",u=(e==null?void 0:e.is_available)!==!1,f=(e==null?void 0:e.stock_quantity)||0,p=()=>{e&&i&&u&&i(e)},h=()=>{e&&o&&o(e)};return n.jsxs("div",{className:"bg-gradient-to-br from-white to-peach-50/30 rounded-xl shadow-lg overflow-hidden group hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 border border-peach-100/50",children:[n.jsxs("div",{className:"relative overflow-hidden",children:[n.jsx("img",{src:d,alt:l,className:"w-full h-64 object-cover group-hover:scale-110 transition-transform duration-500",onError:g=>{const x=g.target;x.src="/placeholder.svg"}}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-peach-900/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e&&n.jsx("div",{className:"absolute top-3 left-3",children:u?f<=5&&f>0?n.jsxs("span",{className:"bg-amber-500 text-white px-2 py-1 rounded-full text-xs font-semibold",children:["Ultimi ",f]}):null:n.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded-full text-xs font-semibold",children:"Non Disponibile"})}),e&&e.labels&&e.labels.length>0&&n.jsx("div",{className:"absolute bottom-3 left-3 flex flex-wrap gap-1",children:e.labels.map((g,x)=>n.jsxs(Ue,{variant:"outline",className:"bg-white/90 text-blue-700 border-blue-200 text-xs backdrop-blur-sm",children:[n.jsx(Un,{className:"w-3 h-3 mr-1"}),g]},x))}),e&&(i||o)&&n.jsx("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300 space-y-2",children:o&&n.jsx("button",{onClick:h,className:"bg-white/90 backdrop-blur-sm text-gray-700 p-2 rounded-full hover:bg-white transition-all duration-300 shadow-lg",title:"Visualizza dettagli",children:n.jsx(xs,{size:16})})})]}),n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2 font-playfair",children:l}),n.jsx("p",{className:"text-gray-600 mb-4 text-sm font-inter line-clamp-2",children:m}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-600 to-coral-600 font-playfair",children:c}),e&&i?n.jsx("button",{onClick:p,disabled:!u,className:`p-3 rounded-full transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-110 group/btn ${u?"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white hover:from-emerald-600 hover:to-emerald-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:u?"Ordina ora":"Non disponibile",children:n.jsx(rn,{size:20,className:u?"group-hover/btn:animate-bounce":""})}):n.jsx("button",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white p-3 rounded-full hover:from-emerald-600 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-110 group/btn",children:n.jsx(rn,{size:20,className:"group-hover/btn:animate-bounce"})})]}),e&&n.jsx("div",{className:"mt-3",children:n.jsx("span",{className:"inline-block bg-peach-100 text-peach-800 px-2 py-1 rounded-full text-xs font-medium",children:e.category})})]})]})},t0=$h,r0=Bh,lf=b.forwardRef(({className:e,...t},r)=>n.jsx(Hd,{ref:r,className:de("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));lf.displayName=Hd.displayName;const cf=b.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(r0,{children:[n.jsx(lf,{}),n.jsxs(Gd,{ref:s,className:de("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n.jsxs(zh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(Kt,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cf.displayName=Gd.displayName;const df=({className:e,...t})=>n.jsx("div",{className:de("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});df.displayName="DialogHeader";const uf=b.forwardRef(({className:e,...t},r)=>n.jsx(Vd,{ref:r,className:de("text-lg font-semibold leading-none tracking-tight",e),...t}));uf.displayName=Vd.displayName;const n0=b.forwardRef(({className:e,...t},r)=>n.jsx(Wd,{ref:r,className:de("text-sm text-muted-foreground",e),...t}));n0.displayName=Wd.displayName;const ce=b.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:de("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...r}));ce.displayName="Input";const Qt=b.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:de("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Qt.displayName="Textarea";var s0="Label",mf=b.forwardRef((e,t)=>n.jsx(Ce.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));mf.displayName=s0;var ff=mf;const a0=Va("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=b.forwardRef(({className:e,...t},r)=>n.jsx(ff,{ref:r,className:de(a0(),e),...t}));Z.displayName=ff.displayName;const Us=qh,cn=b.forwardRef(({className:e,...t},r)=>n.jsx(Kd,{ref:r,className:de("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));cn.displayName=Kd.displayName;const we=b.forwardRef(({className:e,...t},r)=>n.jsx(Yd,{ref:r,className:de("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));we.displayName=Yd.displayName;const Fe=b.forwardRef(({className:e,...t},r)=>n.jsx(Qd,{ref:r,className:de("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Fe.displayName=Qd.displayName;let wa=null,qr=null;const i0=async()=>{if(!window.stripeConfigCache&&qr&&(qr=null,wa=null),qr)return qr;try{const{data:e,error:t}=await L.from("settings").select("value").eq("key","stripeConfig").single();if(t||!(e!=null&&e.value))throw new Error("Stripe configuration not found. Please configure Stripe in the admin panel.");return qr=e.value,window.stripeConfigCache=qr,qr}catch(e){throw console.error("Error loading Stripe config:",e),new Error("Failed to load Stripe configuration")}},o0=async()=>{if(!wa){const e=await i0();if(!(e!=null&&e.publishableKey))throw new Error("Stripe publishable key not configured");wa=Yh(e.publishableKey)}return wa};class l0{constructor(){Ae(this,"stripe",null)}async getStripeInstance(){return this.stripe||(this.stripe=o0()),await this.stripe}async createCheckoutSession(t,r,s,a){try{const i=t.reduce((u,f)=>u+f.price*f.quantity,0),l={line_items:t.map(u=>{const f={name:u.name,images:u.image?[u.image]:[]};return u.description&&u.description.trim()!==""&&(f.description=u.description.trim()),{price_data:{currency:"eur",product_data:f,unit_amount:Math.round(u.price*100)},quantity:u.quantity}}),mode:"payment",customer_email:r.email,billing_address_collection:"required",shipping_address_collection:{allowed_countries:["IT","FR","DE","ES","AT","CH"]},success_url:`${window.location.origin}/payment/success?session_id={CHECKOUT_SESSION_ID}&order_id=${s}`,cancel_url:`${window.location.origin}/payment/cancel?order_id=${s}`,metadata:{order_id:s,customer_name:r.name,customer_phone:r.phone||"",...a},payment_intent_data:{metadata:{order_id:s,customer_name:r.name}}},d=await fetch("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const m=await d.json();return{sessionId:m.id,url:m.url}}catch(i){throw console.error("Error creating checkout session:",i),new Error("Failed to create checkout session. Please try again.")}}async redirectToCheckout(t){try{const r=await this.getStripeInstance();if(!r)throw new Error("Stripe failed to initialize");const{error:s}=await r.redirectToCheckout({sessionId:t});if(s)throw s}catch(r){throw console.error("Error redirecting to checkout:",r),new Error("Failed to redirect to checkout. Please try again.")}}async checkoutAndRedirect(t,r,s,a){try{const i=await this.createCheckoutSession(t,r,s,a);await this.redirectToCheckout(i.sessionId)}catch(i){throw console.error("Error in checkout flow:",i),i}}async verifyPayment(t){try{const s=await fetch(`/verify-payment?session_id=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(r){throw console.error("Error verifying payment:",r),new Error("Failed to verify payment status")}}async updateOrderAfterPayment(t,r){try{const{error:s}=await L.from("orders").update({status:"paid",stripe_session_id:r.stripeSessionId,stripe_payment_intent_id:r.paymentIntentId,payment_status:r.status,paid_amount:r.amountPaid,paid_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",t);if(s)throw s;await L.from("order_status_history").insert({order_id:t,status:"paid",notes:`Payment completed via Stripe. Payment Intent: ${r.paymentIntentId}`,created_by:"system"})}catch(s){throw console.error("Error updating order after payment:",s),new Error("Failed to update order status")}}async handleFailedPayment(t,r){try{const{error:s}=await L.from("orders").update({status:"payment_failed",payment_status:"failed",updated_at:new Date().toISOString()}).eq("id",t);if(s)throw s;await L.from("order_status_history").insert({order_id:t,status:"payment_failed",notes:`Payment failed. Reason: ${r||"Unknown"}`,created_by:"system"})}catch(s){throw console.error("Error handling failed payment:",s),new Error("Failed to update order status for failed payment")}}async getPublicStripeInstance(){return await this.getStripeInstance()}}const ka=new l0,pf=({items:e,customerInfo:t,orderId:r,onCreateOrder:s,onSuccess:a,onError:i,disabled:o=!1,className:l="",children:c})=>{const[d,m]=b.useState(!1),{toast:u}=Ee(),f=async()=>{if(!e.length||!t.name||!t.email){const h="Missing required information for checkout";u({title:"Checkout Error",description:h,variant:"destructive"}),i==null||i(h);return}try{m(!0);let h=r;if(s&&!r&&(h=await s()),!h)throw new Error("Order ID is required for payment processing");const g=e.reduce((x,v)=>x+v.price*v.quantity,0);u({title:"Redirecting to Payment",description:`Processing payment of ${g.toFixed(2)}...`});try{console.log("Creating real Stripe checkout session..."),await ka.checkoutAndRedirect(e,t,h,{source:"francesco_fiori_website",order_type:"product_order"})}catch(x){throw console.error("Real Stripe checkout failed:",x),x}a==null||a()}catch(h){console.error("Checkout error:",h);const g=h instanceof Error?h.message:"Payment processing failed";u({title:"Payment Error",description:g,variant:"destructive"}),i==null||i(g)}finally{m(!1)}},p=e.reduce((h,g)=>h+g.price*g.quantity,0);return n.jsxs("div",{className:`space-y-4 ${l}`,children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Order Summary"}),n.jsxs("div",{className:"space-y-2",children:[e.map((h,g)=>n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-gray-600",children:[h.name,"  ",h.quantity]}),n.jsxs("span",{className:"font-medium",children:["",(h.price*h.quantity).toFixed(2)]})]},g)),n.jsx("div",{className:"border-t pt-2 mt-2",children:n.jsxs("div",{className:"flex justify-between font-semibold",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{children:["",p.toFixed(2)]})]})})]})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Billing Information"}),n.jsxs("div",{className:"text-sm text-blue-700",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Name:"})," ",t.name]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",t.email]}),t.phone&&n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",t.phone]})]})]}),n.jsx(z,{onClick:f,disabled:o||d||!e.length,className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white font-semibold py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",size:"lg",children:d?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"h-5 w-5 mr-2 animate-spin"}),"Processing Payment..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ls,{className:"h-5 w-5 mr-2"}),c||`Pay ${p.toFixed(2)} with Stripe`]})}),n.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[n.jsx("p",{children:" Secure payment powered by Stripe"}),n.jsx("p",{children:"Your payment information is encrypted and secure"})]})]})},c0=({product:e,isOpen:t,onClose:r})=>{const[s,a]=b.useState(!1),[i,o]=b.useState({customerName:"",customerEmail:"",customerPhone:"",quantity:1,specialRequests:"",deliveryDate:"",deliveryAddress:""}),{toast:l}=Ee(),c=(h,g)=>{o(x=>({...x,[h]:g}))},d=h=>{o(g=>({...g,quantity:Math.max(1,g.quantity+(h?1:-1))}))},m=()=>e?e.price*i.quantity:0,u=()=>{const h=Date.now().toString(),g=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`ORD-${h.slice(-6)}${g}`},f=async()=>{if(!e)return null;try{const h=u(),g=m(),{data:x,error:v}=await L.from("orders").insert({order_number:h,customer_name:i.customerName,customer_email:i.customerEmail,customer_phone:i.customerPhone||null,total_amount:g,status:"payment_pending",payment_status:"pending",billing_address:{street:i.deliveryAddress,city:"",postalCode:"",country:"Italy"},shipping_address:{street:i.deliveryAddress,city:"",postalCode:"",country:"Italy"},notes:`Product Order - ${e.name}
Quantity: ${i.quantity}
Special Requests: ${i.specialRequests}
Delivery Date: ${i.deliveryDate}`}).select().single();if(v)throw v;const{error:y}=await L.from("order_items").insert({order_id:x.id,product_id:e.id,product_name:e.name,quantity:i.quantity,price:e.price});if(y)throw y;return x}catch(h){throw console.error("Order creation error:",h),h}},p=async h=>{h.preventDefault()};return e?n.jsx(t0,{open:t,onOpenChange:r,children:n.jsxs(cf,{className:"max-w-2xl max-h-[95vh] overflow-y-auto",children:[n.jsx(df,{children:n.jsxs(uf,{className:"flex items-center gap-2",children:[n.jsx(rn,{className:"h-6 w-6"}),"Ordina: ",e.name]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4 p-4 bg-gray-50 rounded-lg",children:[n.jsx("img",{src:e.image_url,alt:e.name,className:"w-20 h-20 object-cover rounded-lg"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-lg",children:e.name}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.description}),n.jsxs("p",{className:"text-xl font-bold text-emerald-600 mt-2",children:["",e.price.toFixed(2)]})]})]}),n.jsxs("form",{onSubmit:p,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Z,{htmlFor:"customerName",className:"flex items-center gap-2",children:[n.jsx(Ou,{className:"h-4 w-4"}),"Nome Completo *"]}),n.jsx(ce,{id:"customerName",value:i.customerName,onChange:h=>c("customerName",h.target.value),placeholder:"Il tuo nome completo",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Z,{htmlFor:"customerEmail",className:"flex items-center gap-2",children:[n.jsx(Du,{className:"h-4 w-4"}),"Email *"]}),n.jsx(ce,{id:"customerEmail",type:"email",value:i.customerEmail,onChange:h=>c("customerEmail",h.target.value),placeholder:"la-tua-email@esempio.com",required:!0})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Z,{htmlFor:"customerPhone",className:"flex items-center gap-2",children:[n.jsx(Wa,{className:"h-4 w-4"}),"Telefono"]}),n.jsx(ce,{id:"customerPhone",value:i.customerPhone,onChange:h=>c("customerPhone",h.target.value),placeholder:"+39 123 456 7890"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{htmlFor:"deliveryDate",children:"Data di Consegna"}),n.jsx(ce,{id:"deliveryDate",type:"date",value:i.deliveryDate,onChange:h=>c("deliveryDate",h.target.value)})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{children:"Quantit"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(z,{type:"button",variant:"outline",size:"sm",onClick:()=>d(!1),disabled:i.quantity<=1,children:n.jsx(Pg,{className:"h-4 w-4"})}),n.jsx("span",{className:"text-lg font-semibold w-12 text-center",children:i.quantity}),n.jsx(z,{type:"button",variant:"outline",size:"sm",onClick:()=>d(!0),children:n.jsx(Ar,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Z,{htmlFor:"deliveryAddress",className:"flex items-center gap-2",children:[n.jsx(so,{className:"h-4 w-4"}),"Indirizzo di Consegna *"]}),n.jsx(ce,{id:"deliveryAddress",value:i.deliveryAddress,onChange:h=>c("deliveryAddress",h.target.value),placeholder:"Via, Citt, CAP",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{htmlFor:"specialRequests",children:"Richieste Speciali"}),n.jsx(Qt,{id:"specialRequests",value:i.specialRequests,onChange:h=>c("specialRequests",h.target.value),placeholder:"Eventuali richieste particolari o personalizzazioni...",rows:3})]}),n.jsx("div",{className:"bg-emerald-50 p-4 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[n.jsx("span",{children:"Totale:"}),n.jsxs("span",{className:"text-emerald-600",children:["",m().toFixed(2)]})]})}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Scegli il metodo di pagamento"}),n.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Form valid: ",i.customerName&&i.customerEmail&&i.deliveryAddress?"Yes":"No"]}),n.jsxs(Us,{defaultValue:"stripe",className:"w-full",children:[n.jsxs(cn,{className:"grid w-full grid-cols-2 mb-4",children:[n.jsxs(we,{value:"stripe",className:"flex items-center gap-2",children:[n.jsx(Ls,{className:"h-4 w-4"}),"Paga Ora (Stripe)"]}),n.jsx(we,{value:"later",children:"Paga Dopo"})]}),n.jsxs(Fe,{value:"stripe",className:"space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Pagamento Sicuro con Stripe"}),n.jsx("p",{className:"text-blue-700 text-sm",children:"Paga subito con carta di credito o debito. Il tuo ordine sar confermato immediatamente."})]}),i.customerName&&i.customerEmail&&i.deliveryAddress?n.jsx(pf,{items:[{id:e.id,name:e.name,price:e.price,quantity:i.quantity,image:e.image_url||void 0,description:e.description||void 0}],customerInfo:{name:i.customerName,email:i.customerEmail,phone:i.customerPhone||void 0},onCreateOrder:async()=>{const h=await f();if(!h)throw new Error("Failed to create order");return h.id},onSuccess:()=>{l({title:"Ordine Completato! ",description:"Il pagamento  stato elaborato con successo."}),o({customerName:"",customerEmail:"",customerPhone:"",quantity:1,specialRequests:"",deliveryDate:"",deliveryAddress:""}),r()},onError:h=>{l({title:"Errore nel Pagamento",description:h,variant:"destructive"})}}):n.jsx("div",{className:"bg-amber-50 p-4 rounded-lg",children:n.jsx("p",{className:"text-amber-800 text-sm",children:"Compila tutti i campi obbligatori sopra per procedere al pagamento."})})]}),n.jsxs(Fe,{value:"later",className:"space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Ordina Ora, Paga Dopo"}),n.jsx("p",{className:"text-gray-700 text-sm",children:"Il tuo ordine sar salvato e ti contatteremo per confermare i dettagli e il pagamento."})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(z,{type:"button",variant:"outline",onClick:r,className:"flex-1",children:"Annulla"}),n.jsx(z,{type:"button",disabled:s||!i.customerName||!i.customerEmail||!i.deliveryAddress,onClick:async()=>{a(!0);try{const h=await f();h&&(await L.from("order_notifications").insert({order_id:h.id,notification_type:"new_order",is_read:!1}),l({title:"Ordine Inviato con Successo! ",description:`Il tuo ordine #${h.order_number}  stato ricevuto. Ti contatteremo presto per confermare i dettagli.`}),o({customerName:"",customerEmail:"",customerPhone:"",quantity:1,specialRequests:"",deliveryDate:"",deliveryAddress:""}),r())}catch(h){l({title:"Errore nell'invio dell'ordine",description:h.message||"Riprova o contattaci direttamente.",variant:"destructive"})}finally{a(!1)}},className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:s?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Invio in corso..."]}):n.jsxs(n.Fragment,{children:[n.jsx(rn,{className:"mr-2 h-4 w-4"}),"Conferma Ordine"]})})]})]})]})]})]})]})]})}):null},hf=()=>{const[e,t]=b.useState({}),[r,s]=b.useState(null),[a,i]=b.useState(!1),[o,l]=b.useState(!0),[c,d]=b.useState("I Nostri Prodotti"),[m,u]=b.useState("Scopri la nostra selezione di fiori e composizioni per ogni occasione");b.useEffect(()=>{f(),p()},[]);const f=async()=>{try{const{data:j,error:C}=await L.from("products").select(`
          *,
          categories (
            name,
            slug
          )
        `).eq("is_active",!0).order("sort_order",{ascending:!0});if(!C&&j){const P={};j.forEach(S=>{var R,E;const D=((R=S.categories)==null?void 0:R.slug)||"uncategorized";P[D]||(P[D]=[]);const A={...S,category:((E=S.categories)==null?void 0:E.name)||"Uncategorized",category_slug:D,is_available:(S.stock_quantity||0)>0,images:S.gallery?Array.isArray(S.gallery)?S.gallery:[S.image_url].filter(Boolean):[S.image_url].filter(Boolean)};P[D].push(A)}),t(P)}}catch(j){console.log("Could not load products:",j)}finally{l(!1)}},p=async()=>{try{const{data:j,error:C}=await L.from("content_sections").select("section_key, content_value").in("section_key",["products_heading","products_subheading"]);!C&&j&&j.forEach(P=>{P.section_key==="products_heading"&&P.content_value&&d(P.content_value),P.section_key==="products_subheading"&&P.content_value&&u(P.content_value)})}catch(j){console.log("Could not load content:",j)}},h=j=>{s(j),i(!0)},g=()=>{i(!1),s(null)},x=j=>{switch(j){case"fiori-piante":return n.jsx(Pr,{className:"text-emerald-500",size:28});case"fiori-finti":return n.jsx(Tu,{className:"text-amber-500",size:28});case"matrimoni":return n.jsx(Pu,{className:"text-rose-500",size:28});case"funerali":return n.jsx(Fu,{className:"text-sage-500",size:28});default:return n.jsx(Pr,{className:"text-emerald-500",size:28})}},v=j=>{switch(j){case"fiori-piante":return"from-peach-400 to-coral-500";case"fiori-finti":return"from-amber-400 to-peach-500";case"matrimoni":return"from-rose-400 to-pink-500";case"funerali":return"from-sage-400 to-emerald-500";default:return"from-peach-400 to-coral-500"}},y=j=>{switch(j){case"fiori-piante":return"Fiori & Piante";case"fiori-finti":return"Fiori Finti";case"matrimoni":return"Matrimoni";case"funerali":return"Funerali";default:return j}};if(o)return n.jsx("section",{id:"products",className:"py-20 bg-white",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"text-center animate-fade-in-up",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto animate-pulse-glow"}),n.jsx("p",{className:"mt-4 text-gray-600 animate-bounce-gentle",children:"Caricamento prodotti..."})]})})});const N=["matrimoni","fiori-piante","fiori-finti","funerali"].filter(j=>e[j]&&e[j].length>0);return n.jsxs(n.Fragment,{children:[n.jsx("section",{id:"products",className:"py-20 bg-gradient-to-br from-white via-blue-50/30 to-purple-50/30 overflow-hidden",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"text-center mb-12 animate-fade-in-up",children:[n.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-4 font-playfair animate-scale-in",children:c}),n.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto font-inter animate-fade-in-up animate-stagger-1",children:m})]}),n.jsx("div",{className:"space-y-16",children:N.map((j,C)=>{const P=e[j]||[],S=y(j),D=x(j),A=v(j);return n.jsxs("div",{className:`space-y-8 animate-slide-in-up animate-stagger-${Math.min(C+2,5)}`,children:[n.jsxs("div",{className:"text-center animate-fade-in-down",children:[n.jsx("div",{className:"flex items-center justify-center mb-4",children:n.jsx("div",{className:`p-4 rounded-full bg-gradient-to-r ${A} shadow-lg hover-lift animate-bounce-gentle`,children:n.jsx("div",{className:"bg-white p-2 rounded-full animate-heartbeat",children:D})})}),n.jsx("h3",{className:"text-3xl font-bold text-gray-800 mb-2 font-playfair animate-fade-in-up",children:S}),n.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-emerald-400 to-emerald-600 mx-auto rounded-full animate-shimmer"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:P.slice(0,4).map((R,E)=>n.jsx("div",{className:`animate-scale-in animate-stagger-${Math.min(E+1,5)} hover-lift`,children:n.jsx(e0,{product:R,onOrder:h})},R.id))}),P.length>4&&n.jsx("div",{className:"text-center animate-fade-in-up animate-stagger-5",children:n.jsxs("button",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-6 py-3 rounded-full hover:from-emerald-600 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 hover-glow animate-pulse-glow",children:[n.jsx(Dg,{size:20,className:"animate-wiggle"}),"Vedi tutti i prodotti ",S,n.jsxs("span",{className:"bg-white/20 px-2 py-1 rounded-full text-sm animate-bounce-gentle",children:["+",P.length-4]})]})})]},j)})}),n.jsx("div",{className:"mt-16 text-center animate-slide-in-up animate-stagger-5",children:n.jsxs("div",{className:"bg-gradient-to-br from-peach-50/50 via-white to-amber-50/50 rounded-2xl p-8 border border-peach-100/50 hover-lift animate-pulse-glow",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4 font-playfair animate-fade-in-up",children:"Non trovi quello che cerchi?"}),n.jsx("p",{className:"text-gray-600 mb-6 font-inter animate-fade-in-up animate-stagger-1",children:"Contattaci per composizioni personalizzate e consulenze su misura per le tue esigenze"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center animate-fade-in-up animate-stagger-2",children:[n.jsx("button",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-8 py-3 rounded-full hover:from-emerald-600 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 hover-glow animate-heartbeat",children:"Richiedi Preventivo Personalizzato"}),n.jsx("button",{className:"border-2 border-emerald-500 text-emerald-600 px-8 py-3 rounded-full hover:bg-emerald-50 transition-all duration-300 hover-lift animate-bounce-gentle",children:"Contattaci"})]})]})})]})}),n.jsx(c0,{product:r,isOpen:a,onClose:g})]})},d0=()=>{const{language:e,t}=Mm(),r={it:{title:"Chi Siamo - Francesco Fiori & Piante",storyTitle:"La Nostra Storia",paragraph1:"Francesco Fiori & Piante nasce dalla passione per la bellezza naturale e dall'esperienza artigianale tramandata nel tempo. Dai momenti pi delicati come i funerali, ai giorni pi belli come i matrimoni, offriamo composizioni floreali create con amore e cura.",paragraph2:"Le nostre creazioni nascono da una profonda passione per la bellezza naturale. Solo fiori selezionati, solo eleganza made in Torino.  Situati all'interno del Mercato di Porta Palazzo, offriamo esperienza artigianale e passione per la bellezza naturale.",quote:" Trovaci a Porta Palazzo, Torino  nel cuore del mercato pi vivace e colorato della citt.",quoteAuthor:"Un viaggio tra profumi, colori e armonie floreali",servicesTitle:"Nel nostro negozio puoi trovare:",services:["Fiori freschi per ogni occasione","Piante da interno ed esterno per decorare con la natura","Fiori finti di alta qualit, ideali per decorazioni durature","Servizi floreali su misura per cerimonie, eventi e ambienti"],stats:{years:"Anni di Esperienza",customers:"Clienti Felici",varieties:"Variet di Fiori"},closingMessage:"Vieni a trovarci da Francesco Fiori & Piante e porta un tocco di natura nella tua vita.",tagline:"Creiamo bellezza, un fiore alla volta"},en:{title:"About Francesco Fiori & Piante",storyTitle:"Our Story",paragraph1:"Francesco Fiori & Piante was born from a passion for natural beauty and artisanal experience passed down through time. From the most delicate moments like funerals, to the most beautiful days like weddings, we offer floral arrangements created with love and care.",paragraph2:"Our creations are born from a deep passion for natural beauty. Only selected flowers, only elegance made in Turin.  Located inside the Porta Palazzo Market, we offer artisanal experience and passion for natural beauty.",quote:" Find us at Porta Palazzo, Turin  in the heart of the city's most vibrant and colorful market.",quoteAuthor:"A journey through scents, colors and floral harmonies",servicesTitle:"In our shop you can find:",services:["Fresh flowers for every occasion","Indoor and outdoor plants to decorate with nature","High quality fake flowers, ideal for long-lasting decorations","Tailor-made floral services for ceremonies, events, and environments"],stats:{years:"Years Experience",customers:"Happy Customers",varieties:"Flower Varieties"},closingMessage:"Come visit us at Francesco Fiori & Piante and bring a touch of nature into your life.",tagline:"Creating beauty, one flower at a time"},fr:{title:" Propos de Francesco Fiori & Piante",storyTitle:"Notre Histoire",paragraph1:"Francesco Fiori & Piante est n d'une passion pour la beaut naturelle et l'exprience artisanale transmise  travers le temps. Des moments les plus dlicats comme les funrailles, aux plus beaux jours comme les mariages, nous offrons des arrangements floraux crs avec amour et soin.",paragraph2:"Nos crations naissent d'une passion profonde pour la beaut naturelle. Seulement des fleurs slectionnes, seulement l'lgance made in Turin.  Situs  l'intrieur du March de Porta Palazzo, nous offrons une exprience artisanale et une passion pour la beaut naturelle.",quote:" Trouvez-nous  Porta Palazzo, Turin  au cur du march le plus vivant et color de la ville.",quoteAuthor:"Un voyage  travers les parfums, couleurs et harmonies florales",servicesTitle:"Dans notre boutique vous pouvez trouver:",services:["Fleurs fraches pour chaque occasion","Plantes d'intrieur et d'extrieur pour dcorer avec la nature","Fleurs artificielles de haute qualit, idales pour des dcorations durables","Services floraux sur mesure pour crmonies, vnements et environnements"],stats:{years:"Annes d'Exprience",customers:"Clients Satisfaits",varieties:"Varits de Fleurs"},closingMessage:"Venez nous rendre visite chez Francesco Fiori & Piante et apportez une touche de nature dans votre vie.",tagline:"Crer la beaut, une fleur  la fois"},ar:{title:"   ",storyTitle:"",paragraph1:"            .                  .",paragraph2:"      .        .            .",quote:"              .",quoteAuthor:"     ",servicesTitle:"    :",services:["   ","    ","       ","     "],stats:{years:" ",customers:" ",varieties:" "},closingMessage:"           .",tagline:"      "},fa:{title:"    ",storyTitle:" ",paragraph1:"                   .                       .",paragraph2:"         .       .                 .",quote:"                   .",quoteAuthor:"       ",servicesTitle:"     :",services:["    ","       ","        ","       "],stats:{years:" ",customers:" ",varieties:" "},closingMessage:"                .",tagline:"      "}},s=r[e]||r.it;return n.jsx("section",{id:"about",className:"py-20 bg-gradient-to-br from-emerald-50 via-peach-50 to-amber-50",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx(Pr,{className:"mx-auto text-transparent bg-clip-text bg-gradient-to-r from-amber-500 to-coral-500 mb-4",size:48}),n.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-6 font-playfair",children:s.title})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[n.jsxs("div",{className:"text-left",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-4 font-playfair",children:s.storyTitle}),n.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed font-inter",children:s.paragraph1}),n.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed font-inter",children:s.paragraph2}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3 font-playfair",children:s.servicesTitle}),n.jsx("ul",{className:"space-y-2",children:s.services.map((i,o)=>n.jsxs("li",{className:"flex items-start gap-3 text-gray-600 font-inter",children:[n.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-peach-400 to-coral-500 rounded-full mt-2 flex-shrink-0"}),n.jsx("span",{children:i})]},o))})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-peach-50 to-coral-50 rounded-xl",children:[n.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-peach-600 to-coral-600 font-playfair",children:"20+"}),n.jsx("div",{className:"text-sm text-gray-600 font-inter",children:s.stats.years})]}),n.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-xl",children:[n.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-emerald-700 font-playfair",children:"5000+"}),n.jsx("div",{className:"text-sm text-gray-600 font-inter",children:s.stats.customers})]}),n.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl",children:[n.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-600 to-coral-600 font-playfair",children:"100+"}),n.jsx("div",{className:"text-sm text-gray-600 font-inter",children:s.stats.varieties})]})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"relative rounded-xl overflow-hidden shadow-2xl",children:n.jsx("img",{src:"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",alt:"Francesco Florist at work",className:"rounded-xl"})}),n.jsxs("div",{className:"absolute -bottom-6 -left-6 bg-gradient-to-br from-white to-peach-50 p-6 rounded-xl shadow-lg border border-peach-200 max-w-sm",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-800 font-playfair mb-3",children:s.quote}),s.quote&&n.jsx("ul",{className:"text-xs text-gray-600 font-inter space-y-1",children:s.services.map((i,o)=>n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-peach-500 mr-2",children:""}),n.jsx("span",{children:i})]},o))}),s.quoteAuthor&&n.jsx("p",{className:"text-xs text-gray-600 font-inter italic mt-2",children:s.quoteAuthor})]})]})]}),n.jsx("div",{className:"mt-16 text-center",children:n.jsxs("div",{className:"bg-gradient-to-br from-white to-peach-50 p-8 rounded-2xl shadow-lg border border-peach-200 max-w-3xl mx-auto",children:[n.jsx("p",{className:"text-lg text-gray-700 font-inter leading-relaxed mb-4",children:s.closingMessage}),n.jsxs("div",{className:"flex items-center justify-center gap-2 text-peach-600",children:[n.jsx(Pr,{size:20}),n.jsx("span",{className:"text-sm font-medium",children:s.tagline}),n.jsx(Pr,{size:20})]})]})})]})})})},Hs=()=>n.jsx("footer",{className:"bg-gray-800 text-white py-12",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[n.jsxs("div",{className:"col-span-1 md:col-span-2",children:[n.jsx("div",{className:"flex items-center space-x-3 mb-4",children:n.jsx("img",{src:"/lovable-uploads/c329c8f3-84d0-4928-bcae-d840d21eb631.png",alt:"Francesco Fiori & Piante",className:"h-8 w-auto filter brightness-0 invert"})}),n.jsx("p",{className:"text-gray-300 mb-4 max-w-md",children:"Creating beautiful floral arrangements and providing premium plants for over 20 years. Your trusted partner for life's special moments."}),n.jsxs("div",{className:"text-sm text-gray-400",children:[n.jsx("p",{children:"Via dei Fiori 123, 00100 Roma, Italy"}),n.jsx("p",{children:"Tel: +39 06 1234 5678"}),n.jsx("p",{children:"Email: info@francescofiori.it"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Quick Links"}),n.jsxs("ul",{className:"space-y-2 text-gray-300",children:[n.jsx("li",{children:n.jsx("a",{href:"#home",className:"hover:text-yellow-400 transition-colors",children:"Home"})}),n.jsx("li",{children:n.jsx("a",{href:"#flowers",className:"hover:text-yellow-400 transition-colors",children:"Flowers"})}),n.jsx("li",{children:n.jsx("a",{href:"#plants",className:"hover:text-yellow-400 transition-colors",children:"Plants"})}),n.jsx("li",{children:n.jsx("a",{href:"#bouquets",className:"hover:text-yellow-400 transition-colors",children:"Bouquets"})}),n.jsx("li",{children:n.jsx("a",{href:"#about",className:"hover:text-yellow-400 transition-colors",children:"About"})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Services"}),n.jsxs("ul",{className:"space-y-2 text-gray-300",children:[n.jsx("li",{children:"Wedding Arrangements"}),n.jsx("li",{children:"Corporate Events"}),n.jsx("li",{children:"Funeral Flowers"}),n.jsx("li",{children:"Plant Care Services"}),n.jsx("li",{children:"Custom Bouquets"})]})]})]}),n.jsx("div",{className:"border-t border-gray-700 mt-8 pt-8 text-center text-gray-400",children:n.jsx("p",{children:" 2024 Francesco Fiori & Piante. All rights reserved."})})]})}),u0=()=>n.jsxs("div",{className:"min-h-screen font-inter overflow-x-hidden",children:[n.jsx($s,{}),n.jsx(lt,{componentName:"Hero",children:n.jsx("div",{className:"animate-fade-in-up",children:n.jsx(gy,{})})}),n.jsx(lt,{componentName:"Categories",children:n.jsx("div",{className:"animate-fade-in-left animate-stagger-1",children:n.jsx(Xy,{})})}),n.jsx(lt,{componentName:"Products",children:n.jsx("div",{className:"animate-fade-in-right animate-stagger-2",children:n.jsx(hf,{})})}),n.jsx(lt,{componentName:"About",children:n.jsx("div",{className:"animate-slide-in-up animate-stagger-3",children:n.jsx(d0,{})})}),n.jsx(lt,{componentName:"Footer",children:n.jsx("div",{className:"animate-fade-in-up animate-stagger-4",children:n.jsx(Hs,{})})})]}),Oc=[{name:"Fiori & Piante",slug:"fiori-piante",description:"Fiori freschi e piante di qualit premium",image_url:"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,sort_order:1},{name:"Fiori Finti",slug:"fiori-finti",description:"Eleganti composizioni artificiali",image_url:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,sort_order:2},{name:"Matrimoni",slug:"matrimoni",description:"Allestimenti floreali per il giorno speciale",image_url:"https://images.unsplash.com/photo-1519225421980-715cb0215aed?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,sort_order:3},{name:"Funerali",slug:"funerali",description:"Composizioni di cordoglio e commemorazione",image_url:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,sort_order:4}];async function Io(){try{console.log("[InitCategories] Checking if categories need to be initialized...");const{data:e,error:t}=await L.from("categories").select("id").limit(1);if(t)return console.error("[InitCategories] Error checking existing categories:",t),console.error("[InitCategories] Error details:",t.message,t.details),console.log("[InitCategories] This might mean the categories table does not exist"),!1;if(e&&e.length>0)return console.log("[InitCategories] Categories already exist, skipping initialization"),console.log("[InitCategories] Found",e.length,"existing categories"),!0;console.log("[InitCategories] No categories found, initializing default categories..."),console.log("[InitCategories] Default categories to insert:",Oc);const{data:r,error:s}=await L.from("categories").insert(Oc).select();return s?(console.error("[InitCategories] Error inserting default categories:",s),console.error("[InitCategories] Error details:",s.message,s.details),!1):(console.log("[InitCategories] Default categories initialized successfully"),console.log("[InitCategories] Inserted categories:",r),!0)}catch(e){return console.error("[InitCategories] Error in initializeCategories:",e),!1}}const gf=async(e=!1)=>{try{if(console.log("[InitializeProducts] Starting product initialization..."),!e){const{data:u,error:f}=await L.from("products").select("id").limit(1);if(f)return console.error("[InitializeProducts] Error checking existing products:",f),!1;if(u&&u.length>0)return console.log("[InitializeProducts] Products already exist, skipping initialization"),!0}const{data:t,error:r}=await L.from("categories").select("id, name, slug");if(r)return console.error("[InitializeProducts] Error fetching categories:",r),!1;if(!t||t.length===0)return console.error("[InitializeProducts] No categories found. Please initialize categories first."),!1;const s=t.reduce((u,f)=>(u[f.slug]=f.id,u),{});console.log("[InitializeProducts] Category mapping:",s);const i=[{name:"Bouquet Sposa Elegante",description:"Bouquet raffinato con rose bianche e peonie per il giorno pi importante",price:85,slug:"bouquet-sposa-elegante",category_id:s.matrimoni,image_url:"https://images.unsplash.com/photo-1519225421980-715cb0215aed?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!0,stock_quantity:10,sort_order:1},{name:"Centrotavola Matrimonio",description:"Elegante centrotavola con fiori misti e candele per ricevimento",price:45,slug:"centrotavola-matrimonio",category_id:s.matrimoni,image_url:"https://images.unsplash.com/photo-1511285560929-80b456fea0bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!1,stock_quantity:15,sort_order:2},{name:"Addobbo Chiesa",description:"Composizione floreale per altare con fiori bianchi e verdi",price:120,slug:"addobbo-chiesa",category_id:s.matrimoni,image_url:"https://images.unsplash.com/photo-1606800052052-a08af7148866?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!1,stock_quantity:5,sort_order:3},{name:"Bouquet Damigelle",description:"Piccoli bouquet coordinati per le damigelle d'onore",price:35,slug:"bouquet-damigelle",category_id:s.matrimoni,image_url:"https://images.unsplash.com/photo-1521543298264-785fba19d562?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!1,stock_quantity:20,sort_order:4},{name:"Bouquet Rose Rosse",description:"Classico bouquet di rose rosse fresche, simbolo di amore eterno",price:55,slug:"bouquet-rose-rosse",category_id:s["fiori-piante"],image_url:"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!0,stock_quantity:25,sort_order:1},{name:"Pianta Monstera",description:"Elegante pianta da interno, perfetta per decorare casa o ufficio",price:35,slug:"pianta-monstera",category_id:s["fiori-piante"],image_url:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!1,stock_quantity:12,sort_order:2},{name:"Gigli Bianchi",description:"Freschi gigli bianchi dal profumo delicato e raffinato",price:40,slug:"gigli-bianchi",category_id:s["fiori-piante"],image_url:"https://images.unsplash.com/photo-1466721591366-2d5fba72006d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!1,stock_quantity:18,sort_order:3},{name:"Composizione Mista",description:"Colorata composizione con fiori di stagione in vaso decorativo",price:65,slug:"composizione-mista",category_id:s["fiori-piante"],image_url:"https://images.unsplash.com/photo-1518335935020-cfd6580c1ab4?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!0,stock_quantity:8,sort_order:4},{name:"Orchidea Artificiale",description:"Elegante orchidea artificiale di alta qualit, indistinguibile dal vero",price:45,slug:"orchidea-artificiale",category_id:s["fiori-finti"],image_url:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!0,stock_quantity:15,sort_order:1},{name:"Bouquet Peonie Finte",description:"Splendido bouquet di peonie artificiali per decorazioni durature",price:38,slug:"bouquet-peonie-finte",category_id:s["fiori-finti"],image_url:"https://images.unsplash.com/photo-1502780402662-acc01917738e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!1,stock_quantity:20,sort_order:2},{name:"Centro Tavola Artificiale",description:"Composizione artificiale per tavolo con fiori misti colorati",price:52,slug:"centro-tavola-artificiale",category_id:s["fiori-finti"],image_url:"https://images.unsplash.com/photo-1454391304352-2bf4678b1a7a?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!1,stock_quantity:10,sort_order:3},{name:"Piante Grasse Artificiali",description:"Set di piante grasse artificiali in vasi decorativi moderni",price:28,slug:"piante-grasse-artificiali",category_id:s["fiori-finti"],image_url:"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!1,stock_quantity:25,sort_order:4},{name:"Corona Funebre Classica",description:"Elegante corona funebre con fiori bianchi e verdi per ultimo saluto",price:75,slug:"corona-funebre-classica",category_id:s.funerali,image_url:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!0,stock_quantity:8,sort_order:1},{name:"Cuscino Floreale",description:"Cuscino floreale di cordoglio con fiori freschi e nastro personalizzato",price:65,slug:"cuscino-floreale",category_id:s.funerali,image_url:"https://images.unsplash.com/photo-1595207759571-3a4df3c49230?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!1,stock_quantity:12,sort_order:2},{name:"Mazzo di Cordoglio",description:"Sobrio mazzo di fiori bianchi per esprimere vicinanza nel dolore",price:45,slug:"mazzo-di-cordoglio",category_id:s.funerali,image_url:"https://images.unsplash.com/photo-1490750967868-88aa4486c946?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!1,stock_quantity:15,sort_order:3},{name:"Composizione Commemorativa",description:"Composizione floreale per commemorazione con fiori di stagione",price:55,slug:"composizione-commemorativa",category_id:s.funerali,image_url:"https://images.unsplash.com/photo-1583160247711-2191776b4b91?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",is_active:!0,is_featured:!1,stock_quantity:10,sort_order:4}].filter(u=>u.category_id);if(i.length===0)return console.error("[InitializeProducts] No valid products to insert (missing categories)"),!1;console.log(`[InitializeProducts] Inserting ${i.length} products...`);const{data:o,error:l}=await L.from("products").select("slug");if(l)return console.error("[InitializeProducts] Error checking existing products:",l),!1;const c=new Set((o==null?void 0:o.map(u=>u.slug))||[]),d=i.filter(u=>!c.has(u.slug));if(d.length===0)return console.log("[InitializeProducts] All products already exist"),!0;console.log(`[InitializeProducts] Inserting ${d.length} new products...`);const{error:m}=await L.from("products").insert(d);return m?(console.error("[InitializeProducts] Error inserting products:",m),!1):(console.log("[InitializeProducts] Products initialized successfully"),!0)}catch(t){return console.error("[InitializeProducts] Error during initialization:",t),!1}};async function m0(){try{console.log("[InitDB] Ensuring settings table exists...");const{error:e}=await L.rpc("exec_sql",{sql:`
        CREATE TABLE IF NOT EXISTS settings (
          key TEXT PRIMARY KEY,
          value JSONB,
          created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
          updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
        );

        CREATE INDEX IF NOT EXISTS idx_settings_key ON settings(key);
        CREATE INDEX IF NOT EXISTS idx_settings_updated_at ON settings(updated_at);

        -- Enable RLS
        ALTER TABLE settings ENABLE ROW LEVEL SECURITY;

        -- Create RLS policies
        DROP POLICY IF EXISTS "Allow public read access to settings" ON settings;
        CREATE POLICY "Allow public read access to settings"
          ON settings
          FOR SELECT
          USING (true);

        DROP POLICY IF EXISTS "Allow authenticated users to update settings" ON settings;
        CREATE POLICY "Allow authenticated users to update settings"
          ON settings
          FOR UPDATE
          USING (auth.role() = 'authenticated')
          WITH CHECK (auth.role() = 'authenticated');

        DROP POLICY IF EXISTS "Allow authenticated users to insert settings" ON settings;
        CREATE POLICY "Allow authenticated users to insert settings"
          ON settings
          FOR INSERT
          WITH CHECK (auth.role() = 'authenticated');
      `});return e?console.log("[InitDB] Settings table creation via RPC failed, table might already exist:",e.message):console.log("[InitDB] Settings table ensured"),!0}catch(e){return console.error("[InitDB] Error ensuring settings table:",e),!0}}async function f0(){try{console.log("[InitDB] Ensuring content_sections table exists...");const{error:e}=await L.rpc("exec_sql",{sql:`
        CREATE TABLE IF NOT EXISTS content_sections (
          id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
          section_key TEXT NOT NULL UNIQUE,
          section_name TEXT NOT NULL,
          content_type TEXT NOT NULL,
          content_value TEXT,
          metadata JSONB,
          is_active BOOLEAN DEFAULT true,
          created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
          updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
        );

        CREATE INDEX IF NOT EXISTS idx_content_sections_section_key ON content_sections(section_key);
        CREATE INDEX IF NOT EXISTS idx_content_sections_active ON content_sections(is_active);
        CREATE INDEX IF NOT EXISTS idx_content_sections_metadata ON content_sections USING GIN(metadata);
      `});return e?console.log("[InitDB] Table creation via RPC failed, table might already exist:",e.message):console.log("[InitDB] Content sections table ensured"),!0}catch(e){return console.error("[InitDB] Error ensuring content_sections table:",e),!0}}async function ni(){try{if(console.log("[InitDB] Starting comprehensive database initialization..."),console.log("[InitDB] Step 0a: Ensuring settings table..."),await m0(),console.log("[InitDB] Step 0b: Ensuring content_sections table..."),await f0(),console.log("[InitDB] Step 1: Initializing categories..."),!await Io())return console.error("[InitDB] Failed to initialize categories"),!1;if(console.log("[InitDB] Categories initialized successfully"),console.log("[InitDB] Step 2: Initializing products..."),!await gf())return console.error("[InitDB] Failed to initialize products"),!1;console.log("[InitDB] Products initialized successfully"),console.log("[InitDB] Step 3: Initializing content sections...");const r=[{section_key:"hero_main_content",section_name:"Hero Section - Main Content",content_type:"json",content_value:JSON.stringify({heading:"Francesco Fiori & Piante",subheading:"Scopri l'eleganza floreale firmata Francesco: fiori, piante e creazioni per ogni occasione. ",backgroundImage:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2071&q=80"}),metadata:{section:"hero"},is_active:!0},{section_key:"category_matrimoni_images",section_name:"Category Images: Matrimoni",content_type:"json",content_value:JSON.stringify(["https://images.unsplash.com/photo-1519225421980-715cb0215aed?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1511285560929-80b456fea0bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1606800052052-a08af7148866?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1521543298264-785fba19d562?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"]),metadata:{section:"categories"},is_active:!0},{section_key:"category_matrimoni_features",section_name:"Matrimoni - Features",content_type:"json",content_value:JSON.stringify(["Consulenza personalizzata","Bouquet sposa e damigelle","Allestimenti chiesa e location","Centrotavola e decorazioni","Addobbi floreali completi","Servizio completo per matrimoni"]),metadata:{section:"categories"},is_active:!0},{section_key:"category_matrimoni_explanation",section_name:"Matrimoni - Explanation",content_type:"textarea",content_value:"Rendiamo unico il giorno pi importante della tua vita con allestimenti floreali personalizzati per matrimoni. Bouquet da sposa, centrotavola, archi floreali e decorazioni per chiesa e location: tutto viene progettato su misura per raccontare la vostra storia d'amore con i fiori.",metadata:{section:"categories"},is_active:!0},{section_key:"category_fiori_piante_images",section_name:"Category Images: Fiori & Piante",content_type:"json",content_value:JSON.stringify(["https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1440342359743-84fcb8c21f21?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1416879595882-3373a0480b5b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1518335935020-cfd6580c1ab4?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"]),metadata:{section:"categories"},is_active:!0},{section_key:"category_fiori_finti_images",section_name:"Category Images: Fiori Finti",content_type:"json",content_value:JSON.stringify(["https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1502780402662-acc01917738e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1454391304352-2bf4678b1a7a?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"]),metadata:{section:"categories"},is_active:!0},{section_key:"category_funerali_images",section_name:"Category Images: Funerali",content_type:"json",content_value:JSON.stringify(["https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1595207759571-3a4df3c49230?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1490750967868-88aa4486c946?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80","https://images.unsplash.com/photo-1583160247711-2191776b4b91?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"]),metadata:{section:"categories"},is_active:!0}],{data:s,error:a}=await L.from("content_sections").select("section_key").in("section_key",r.map(d=>d.section_key));if(a)return console.error("[InitDB] Error checking existing sections:",a),!1;const i=(s==null?void 0:s.map(d=>d.section_key))||[],o=r.filter(d=>!i.includes(d.section_key));if(o.length===0)return console.log("[InitDB] All category content sections already exist"),!0;console.log(`[InitDB] Inserting ${o.length} new content sections...`);const{data:l,error:c}=await L.from("content_sections").insert(o).select();return c?(console.error("[InitDB] Error inserting content sections:",c),!1):(console.log("[InitDB] Successfully inserted content sections:",l),console.log("[InitDB] Step 4: Initializing default settings..."),await p0(),!0)}catch(e){return console.error("[InitDB] Error in initializeDatabase:",e),!1}}async function p0(){try{console.log("[InitDB] Initializing default settings...");const e=[{key:"heroContent",value:{heading:"Francesco Fiori & Piante",subheading:"Scopri l'eleganza floreale firmata Francesco: fiori, piante e creazioni per ogni occasione. ",backgroundImage:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2071&q=80"}},{key:"logoSettings",value:{logoUrl:"https://despodpgvkszyexvcbft.supabase.co/storage/v1/object/public/uploads/logos/1749735172947-oi6nr6gnk7.png",altText:"Francesco Fiori & Piante Logo"}},{key:"aboutContent",value:{heading:"Chi Siamo",subheading:"Passione per la bellezza naturale e l'arte floreale",backgroundImage:"",backgroundColor:"#FEF7CD",paragraphs:["Francesco Fiori & Piante offre composizioni floreali per ogni occasione, dai funerali ai matrimoni. Troverai fiori freschi, piante da interno ed esterno, fiori finti di alta qualit e servizi su misura. Situati all'interno del Mercato di Porta Palazzo a Torino, portiamo esperienza artigianale e passione per la bellezza naturale."]}},{key:"restaurantSettings",value:{totalSeats:50,reservationDuration:120,openingTime:"11:30",closingTime:"22:00",languages:["it","en","ar","fa"],defaultLanguage:"it"}},{key:"contactContent",value:{address:"Piazza della Repubblica, 10100 Torino TO",phone:"+393498851455",email:"info@francescofiori.it",mapUrl:"https://maps.google.com",hours:"Lun-Dom: 08:00 - 19:00"}}],{data:t,error:r}=await L.from("settings").select("key").in("key",e.map(o=>o.key));if(r)return console.error("[InitDB] Error checking existing settings:",r),!1;const s=(t==null?void 0:t.map(o=>o.key))||[],a=e.filter(o=>!s.includes(o.key));if(a.length===0)return console.log("[InitDB] All default settings already exist"),!0;console.log(`[InitDB] Inserting ${a.length} new settings...`);const{error:i}=await L.from("settings").insert(a);return i?(console.error("[InitDB] Error inserting settings:",i),!1):(console.log("[InitDB] Successfully inserted default settings"),!0)}catch(e){return console.error("[InitDB] Error in initializeDefaultSettings:",e),!1}}async function vf(){try{console.log("[InitDB] Testing database connection...");const{data:e,error:t}=await L.from("content_sections").select("count").limit(1);return t?(console.error("[InitDB] Database connection failed:",t),!1):(console.log("[InitDB] Database connection successful"),!0)}catch(e){return console.error("[InitDB] Database connection error:",e),!1}}const h0=Object.freeze(Object.defineProperty({__proto__:null,initializeDatabase:ni,testDatabaseConnection:vf},Symbol.toStringTag,{value:"Module"})),Gs=({currentImage:e,onImageSelected:t,onMultipleImagesSelected:r,buttonLabel:s,className:a,bucketName:i="specialties",folderPath:o,acceptedFileTypes:l="image/*",maxFileSize:c=10*1024*1024,multiple:d=!1,maxFiles:m=10})=>{const[u,f]=b.useState(!1),[p,h]=b.useState(e),[g,x]=b.useState([]),[v,y]=b.useState(null),[w,N]=b.useState({}),j=b.useRef(null),{toast:C}=Ee();$.useEffect(()=>{e!==p&&h(e)},[e]);const P=async D=>{const A=D.target.files;if(!A||A.length===0)return;const R=Array.from(A);if(R.length>1&&!d){C({title:"Multiple files not allowed",description:"Please select only one file",variant:"destructive"});return}if(d&&R.length>m){C({title:"Too many files",description:`Please select no more than ${m} files`,variant:"destructive"});return}for(const E of R)if(E.size>c){const k=Math.round(c/1048576);C({title:"File too large",description:`${E.name} exceeds ${k}MB limit`,variant:"destructive"});return}f(!0),y(null),N({}),console.log(`Starting upload for ${R.length} file(s)`),console.log("Using bucket:",i,"and folder:",o||"root");try{const E=R[0],k=E.name.split(".").pop(),T=`${Date.now()}-${Math.random().toString(36).substring(2)}.${k}`,_=o?`${o}/${T}`:T,{data:M,error:O}=await L.storage.listBuckets();if(!O&&M){if(!M.find(Q=>Q.name===i)){console.log(`Bucket ${i} not found. Available buckets:`,M.map(me=>me.name)),console.log(`Attempting to create ${i} bucket...`);const{error:Q}=await L.storage.createBucket(i,{public:!0,fileSizeLimit:52428800});Q?(console.warn("Could not create bucket:",Q),console.log("Will proceed with upload anyway...")):console.log(`Successfully created ${i} bucket`)}}else O&&(console.warn("Could not list buckets:",O),console.log("Will proceed with upload anyway..."));const{data:F,error:B}=await L.storage.from(i).upload(_,E,{cacheControl:"3600",upsert:!0});if(B)throw console.error("Upload error:",B),new Error(B.message||"Failed to upload file");if(!F)throw new Error("No data returned from upload");const{data:W}=L.storage.from(i).getPublicUrl(_),K=W.publicUrl;console.log("File uploaded successfully:",K),console.log(" ImageUploader: Calling onImageSelected with URL:",K),t(K),h(K),console.log(" ImageUploader: Preview image set to:",K);const G=l.includes("audio");C({title:G?"Audio uploaded":"Image uploaded",description:G?"The audio file has been uploaded successfully":"The image has been uploaded successfully"})}catch(E){console.error("Error uploading files:",E),y(E.message||"Upload failed"),C({title:"Upload failed",description:E.message||"There was an error uploading your files. Please try again.",variant:"destructive"})}finally{f(!1),N({})}},S=()=>{j.current&&j.current.click()};return n.jsxs("div",{className:`border-2 border-dashed border-gray-300 rounded-lg p-4 ${a||""}`,children:[n.jsx("input",{ref:j,type:"file",accept:l,onChange:P,multiple:d,className:"hidden"}),u?n.jsxs("div",{className:"flex flex-col items-center justify-center h-32",children:[n.jsx(ge,{className:"h-10 w-10 animate-spin text-peach-500"}),n.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Uploading..."})]}):p?n.jsxs("div",{className:"relative",children:[l.includes("audio")?n.jsxs("div",{className:"flex flex-col items-center justify-center h-32 bg-gray-50 rounded-md",children:[n.jsx(ao,{size:32,className:"text-gray-400 mb-2"}),n.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Audio file uploaded"}),n.jsxs("audio",{controls:!0,className:"mt-2 max-w-full",children:[n.jsx("source",{src:p}),"Your browser does not support the audio element."]})]}):n.jsx("img",{src:p,alt:"Selected image",className:"max-h-48 mx-auto rounded-md object-contain",onError:D=>{const A=D.target;A.src="/placeholder.svg",console.error("Failed to load image:",p)}}),n.jsx(z,{type:"button",onClick:S,className:"absolute top-2 right-2 bg-peach-500/70 hover:bg-peach-600 text-white rounded-full p-1",size:"icon",children:n.jsx(Ru,{size:16})})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center h-32 cursor-pointer",onClick:S,children:[l.includes("audio")?n.jsx(ao,{size:32,className:"text-gray-400 mb-2"}):n.jsx(Wo,{size:32,className:"text-gray-400 mb-2"}),n.jsx("p",{className:"text-center text-sm text-gray-500",children:s||(l.includes("audio")?"Click to upload an audio file":"Click to upload an image")}),v&&n.jsx("p",{className:"text-center text-xs text-red-500 mt-2",children:v})]})]})},Fc=e=>{try{return typeof e=="object"&&e!==null?e:JSON.parse(JSON.stringify(e))}catch(t){throw console.error("Error parsing JSON:",t),t}};class g0{constructor(){Ae(this,"subscribers",{});Ae(this,"initialized",!1);Ae(this,"settingsCache",{});Ae(this,"initializationPromise",null);Ae(this,"initializationInProgress",!1)}async initialize(){if(!this.initialized){if(this.initializationPromise)return this.initializationPromise;if(this.initializationInProgress)return await new Promise(t=>setTimeout(t,100)),this.initialize();this.initializationInProgress=!0,this.initializationPromise=this._initialize();try{await this.initializationPromise}finally{this.initializationInProgress=!1}return this.initializationPromise}}async _initialize(){try{const t=L.from("settings").select("key").limit(1),r=new Promise((i,o)=>{setTimeout(()=>o(new Error("Settings check timed out")),5e3)});let s;try{s=await Promise.race([t,r])}catch(i){console.warn("Settings check failed, proceeding anyway:",i),s={data:[]}}const a=(s==null?void 0:s.data)||[];if(!a||a.length===0){console.log("No settings found, initializing defaults");const i={totalSeats:50,reservationDuration:120,openingTime:"11:30",closingTime:"22:00",languages:["it","en","ar","fa"],defaultLanguage:"it"},o={address:"Piazza della Repubblica, 10100 Torino TO",phone:"+393498851455",email:"info@francescofiori.it",mapUrl:"https://maps.google.com",hours:"Lun-Dom: 08:00 - 19:00"},l={heading:"La Nostra Galleria",subheading:"Scorci delle nostre creazioni floreali e dell'atmosfera del negozio"},c=[{id:"1",src:"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",alt:"Saffron Rice with Tahdig",featured:!0},{id:"2",src:"https://images.unsplash.com/photo-1486718448742-163732cd1544?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",alt:"Traditional Kabab Platter",featured:!1},{id:"3",src:"https://images.unsplash.com/photo-1482881497185-d4a9ddbe4151?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",alt:"Persian Dessert Selection",featured:!1},{id:"4",src:"https://images.unsplash.com/photo-1460574283810-2aab119d8511?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",alt:"Restaurant Interior",featured:!0},{id:"5",src:"https://images.unsplash.com/photo-1494891848038-7bd202a2afeb?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",alt:"Architectural Details",featured:!1},{id:"6",src:"https://images.unsplash.com/photo-1466442929976-97f336a657be?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",alt:"Persian Dining Experience",featured:!0}],d={logoUrl:"https://despodpgvkszyexvcbft.supabase.co/storage/v1/object/public/uploads/logos/1749735172947-oi6nr6gnk7.png",altText:"Francesco Fiori & Piante Logo"},m=[this.updateSetting("restaurantSettings",i),this.updateSetting("contactContent",o),this.updateSetting("galleryContent",l),this.updateSetting("galleryImages",c),this.updateSetting("logoSettings",d),this.updateSetting("popups",[]),this.updateSetting("reservations",[])];await Promise.allSettled(m),console.log("Settings initialized in database")}else console.log("Settings already exist in database, skipping initialization");console.log(" [SettingsService] localStorage operations disabled - using database only"),this.initialized=!0}catch(t){console.error("Error initializing settings:",t)}finally{this.initializationPromise=null}}_preloadFromLocalStorage(){console.log(" [SettingsService] localStorage preloading disabled - using database only")}async getSetting(t,r,s){try{if(console.log(` [SettingsService] Fetching ${t} from DATABASE ONLY (no localStorage)`),this.settingsCache[t])return console.log(` [SettingsService] Found ${t} in memory cache`),this.settingsCache[t];console.log(` [SettingsService] Fetching ${t} from Supabase database...`);const a=L.from("settings").select("*").eq("key",t).single();if(s!=null&&s.aborted)throw new Error("Aborted");const i=new Promise((l,c)=>{setTimeout(()=>c(new Error("Supabase request timed out")),15e3)}),o=await Promise.race([a,i]);if(o.error)throw o.error;return this.settingsCache[t]=o.data.value,console.log(` [SettingsService] Successfully fetched ${t} from database`),console.log(` [SettingsService] ${t} data:`,JSON.stringify(o.data.value,null,2)),o.data.value}catch(a){if(s!=null&&s.aborted)throw new Error("Request aborted");return console.warn(` [SettingsService] Error getting setting ${t} from database:`,a),r}}subscribe(t,r){return this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push(r),()=>{this.subscribers[t]=this.subscribers[t].filter(s=>s!==r)}}notifySubscribers(t,r){this.subscribers[t]&&this.subscribers[t].forEach(s=>{try{s(r)}catch(a){console.error(`Error in subscriber callback for ${t}:`,a)}});try{window.dispatchEvent(new Event("databaseUpdated")),window.dispatchEvent(new CustomEvent("databaseChange",{detail:{key:t,value:r}}))}catch(s){console.warn("Error dispatching database events:",s)}}async saveContentChanges(t,r){try{console.log(` [SettingsService] Saving ${t} content to DATABASE ONLY:`,r),this.settingsCache[`${t}Content`]=r;try{const a=Fc(r),{error:i}=await L.from("settings").upsert({key:`${t}Content`,value:a,updated_at:new Date().toISOString()},{onConflict:"key"});if(i)throw console.error(` [SettingsService] Database save error for ${t}Content:`,i),i;console.log(` [SettingsService] Successfully saved ${t} content to database`)}catch(a){throw console.error(` [SettingsService] Database save for ${t}Content failed:`,a),a}const s=Date.now();return window.dispatchEvent(new CustomEvent("databaseUpdated",{detail:{key:`${t}Content`,timestamp:s}})),!0}catch(s){return console.error(` [SettingsService] Error saving ${t} content:`,s),!1}}async updateSetting(t,r){try{console.log(` [SettingsService] Updating ${t} in DATABASE ONLY:`,r),this.settingsCache[t]=r;try{const s=Fc(r),{error:a}=await L.from("settings").upsert({key:t,value:s,updated_at:new Date().toISOString()},{onConflict:"key"});if(a)throw console.error(` [SettingsService] Database error updating ${t}:`,a),a;console.log(` [SettingsService] Successfully updated ${t} in database`)}catch(s){throw console.error(` [SettingsService] Database update for ${t} failed:`,s),s}return this.notifySubscribers(t,r),!0}catch(s){return console.error(` [SettingsService] Error updating setting ${t}:`,s),!1}}cleanup(){this.subscribers={},this.settingsCache={},this.initialized=!1,this.initializationPromise=null,this.initializationInProgress=!1}}const sr=new g0,xf=Object.freeze(Object.defineProperty({__proto__:null,settingsService:sr},Symbol.toStringTag,{value:"Module"}));function bf(e,t){const[r,s]=b.useState(t),[a,i]=b.useState(!0),[o,l]=b.useState(navigator.onLine);b.useEffect(()=>{const m=()=>{l(!0),c()},u=()=>l(!1);return window.addEventListener("online",m),window.addEventListener("offline",u),()=>{window.removeEventListener("online",m),window.removeEventListener("offline",u)}},[]),b.useEffect(()=>{const m=L.channel(`public:settings:${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"settings",filter:`key=eq.${e}`},u=>{var f;if(console.log(`Settings: Received realtime update for ${e}:`,u),u.new&&((f=u.new)==null?void 0:f.value)!==void 0)try{const p=u.new.value;s(p),console.log(`Settings: Updated ${e} via Supabase realtime`),localStorage.setItem(e,JSON.stringify(p))}catch(p){console.warn(`Settings: Error processing realtime update for ${e}:`,p)}}).subscribe();return()=>{L.removeChannel(m)}},[e]);const c=b.useCallback(async()=>{i(!0);try{console.log(`[useSetting] Loading setting: ${e}`);const m=sr.getSetting(e,t),u=new Promise((p,h)=>{setTimeout(()=>h(new Error(`Timeout loading setting ${e}`)),1e4)}),f=await Promise.race([m,u]);console.log(`[useSetting] Loaded setting ${e}:`,f),s(f)}catch(m){console.error(`[useSetting] Error loading setting ${e}:`,m),console.log(`[useSetting] Using default value for ${e}:`,t),s(t)}finally{i(!1)}},[e,t]);return b.useEffect(()=>{const u=(async()=>{try{console.log(`[useSetting] Initializing settings service for ${e}`),await sr.initialize(),await c();const f=sr.subscribe(e,h=>{console.log(`[useSetting] Received subscription update for ${e}:`,h),s(h)}),p=h=>{var v;const g=h,x=h;((g==null?void 0:g.key)===e||((v=x==null?void 0:x.detail)==null?void 0:v.key)===e)&&(console.log(`[useSetting] Storage event detected for ${e}, reloading...`),c())};return window.addEventListener("storage",p),window.addEventListener("localStorageUpdated",p),()=>{f(),window.removeEventListener("storage",p),window.removeEventListener("localStorageUpdated",p)}}catch(f){return console.error(`[useSetting] Error initializing settings for ${e}:`,f),s(t),i(!1),()=>{}}})();return()=>{u.then(f=>{typeof f=="function"&&f()}).catch(f=>{console.warn(`[useSetting] Error during cleanup for ${e}:`,f)})}},[e,c,t]),[r,async m=>{const u=await sr.updateSetting(e,m);return u&&s(m),u},a]}function v0(){return bf("logoSettings",{logoUrl:"https://despodpgvkszyexvcbft.supabase.co/storage/v1/object/public/uploads/logos/1749735172947-oi6nr6gnk7.png",altText:"Francesco Fiori & Piante Logo"})}function yf(){return bf("heroContent",{heading:"Francesco Fiori & Piante",subheading:"Creazioni floreali uniche per ogni occasione speciale",backgroundImage:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2071&q=80"})}const qi=({section:e,onSave:t,saving:r})=>{const{toast:s}=Ee(),[a,i]=b.useState(!1),[o,l]=b.useState(""),[c,d,m]=yf();b.useEffect(()=>{l(e.content_value||"")},[e.content_value]);let u;try{u=e.content_value?JSON.parse(e.content_value):{}}catch{u={}}const f=async()=>{try{e.section_key.includes("hero")&&u.backgroundImage&&(console.log(" ContentEditor: Updating hero content in settings table"),await d({heading:u.heading||"",subheading:u.subheading||"",backgroundImage:u.backgroundImage||""}),console.log(" ContentEditor: Hero content updated in settings table")),t(e.id,o),i(!1),s({title:"Success",description:"Content updated successfully"})}catch(h){console.error("ContentEditor: Error saving:",h),s({title:"Error",description:"Failed to update content",variant:"destructive"})}},p=h=>{try{const g={...u,backgroundImage:h};l(JSON.stringify(g,null,2)),console.log(" ContentEditor: Image uploaded, content updated:",g)}catch(g){console.error("Error updating image:",g)}};return n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{className:"flex items-center justify-between",children:[e.section_name,n.jsxs(z,{onClick:()=>i(!a),variant:"outline",size:"sm",children:[n.jsx(ku,{className:"h-4 w-4 mr-1"}),a?"Cancel":"Edit"]})]})}),n.jsx(oe,{children:a?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Content (JSON)"}),n.jsx(Qt,{value:o,onChange:h=>l(h.target.value),rows:10,className:"font-mono text-sm"})]}),e.section_key.includes("hero")&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Hero Background Image"}),n.jsx(Gs,{currentImage:u.backgroundImage,onImageSelected:p,bucketName:"uploads",folderPath:"hero-images"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a new hero background image. This will update both the content sections and settings tables."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(z,{onClick:f,disabled:r,children:r?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"h-4 w-4 mr-1 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"h-4 w-4 mr-1"}),"Save Changes"]})}),n.jsx(z,{onClick:()=>i(!1),variant:"outline",children:"Cancel"})]})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Section Key:"}),n.jsx("p",{className:"font-mono text-sm",children:e.section_key})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Content Type:"}),n.jsx("p",{className:"text-sm",children:e.content_type})]}),u.heading&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Heading:"}),n.jsx("p",{className:"font-semibold",children:u.heading})]}),u.subheading&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Subheading:"}),n.jsx("p",{className:"text-sm",children:u.subheading})]}),u.backgroundImage&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Background Image:"}),n.jsx("img",{src:u.backgroundImage,alt:"Background",className:"w-full h-24 object-cover rounded mt-1",onError:h=>{const g=h.target;g.src="/placeholder.svg"}})]})]})})]})};function Do(e,t){return Do=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Do(e,t)}function wf(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Do(e,t)}function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},se.apply(null,arguments)}function Ps(e){"@babel/helpers - typeof";return Ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ps(e)}function x0(e,t){if(Ps(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Ps(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b0(e){var t=x0(e,"string");return Ps(t)=="symbol"?t:t+""}function y0(e,t,r){return(t=b0(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Mc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_c(Object(r),!0).forEach(function(s){y0(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_c(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function st(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Lc=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Bc=function(){return Math.random().toString(36).substring(7).split("").join(".")},zc={INIT:"@@redux/INIT"+Bc(),REPLACE:"@@redux/REPLACE"+Bc()};function w0(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Nf(e,t,r){var s;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(st(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(st(1));return r(Nf)(e,t)}if(typeof e!="function")throw new Error(st(2));var a=e,i=t,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function m(){if(c)throw new Error(st(3));return i}function u(g){if(typeof g!="function")throw new Error(st(4));if(c)throw new Error(st(5));var x=!0;return d(),l.push(g),function(){if(x){if(c)throw new Error(st(6));x=!1,d();var y=l.indexOf(g);l.splice(y,1),o=null}}}function f(g){if(!w0(g))throw new Error(st(7));if(typeof g.type>"u")throw new Error(st(8));if(c)throw new Error(st(9));try{c=!0,i=a(i,g)}finally{c=!1}for(var x=o=l,v=0;v<x.length;v++){var y=x[v];y()}return g}function p(g){if(typeof g!="function")throw new Error(st(10));a=g,f({type:zc.REPLACE})}function h(){var g,x=u;return g={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(st(11));function w(){y.next&&y.next(m())}w();var N=x(w);return{unsubscribe:N}}},g[Lc]=function(){return this},g}return f({type:zc.INIT}),s={dispatch:f,subscribe:u,getState:m,replaceReducer:p},s[Lc]=h,s}function $c(e,t){return function(){return t(e.apply(this,arguments))}}function qc(e,t){if(typeof e=="function")return $c(e,t);if(typeof e!="object"||e===null)throw new Error(st(16));var r={};for(var s in e){var a=e[s];typeof a=="function"&&(r[s]=$c(a,t))}return r}function jf(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,a){return function(){return s(a.apply(void 0,arguments))}})}function N0(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return function(){var a=s.apply(void 0,arguments),i=function(){throw new Error(st(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(c){return c(o)});return i=jf.apply(void 0,l)(a.dispatch),Mc(Mc({},a),{},{dispatch:i})}}}var Sf=$.createContext(null);function j0(e){e()}var Cf=j0,S0=function(t){return Cf=t},C0=function(){return Cf};function E0(){var e=C0(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var a=t;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=t;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,o=r={callback:a,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var Uc={notify:function(){},get:function(){return[]}};function Ef(e,t){var r,s=Uc;function a(u){return c(),s.subscribe(u)}function i(){s.notify()}function o(){m.onStateChange&&m.onStateChange()}function l(){return!!r}function c(){r||(r=t?t.addNestedSub(o):e.subscribe(o),s=E0())}function d(){r&&(r(),r=void 0,s.clear(),s=Uc)}var m={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:l,trySubscribe:c,tryUnsubscribe:d,getListeners:function(){return s}};return m}var Pf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?b.useLayoutEffect:b.useEffect;function P0(e){var t=e.store,r=e.context,s=e.children,a=b.useMemo(function(){var l=Ef(t);return{store:t,subscription:l}},[t]),i=b.useMemo(function(){return t.getState()},[t]);Pf(function(){var l=a.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==t.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[a,i]);var o=r||Sf;return $.createElement(o.Provider,{value:a},s)}function Aa(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var If={exports:{}},Pe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ve=typeof Symbol=="function"&&Symbol.for,Nl=Ve?Symbol.for("react.element"):60103,jl=Ve?Symbol.for("react.portal"):60106,si=Ve?Symbol.for("react.fragment"):60107,ai=Ve?Symbol.for("react.strict_mode"):60108,ii=Ve?Symbol.for("react.profiler"):60114,oi=Ve?Symbol.for("react.provider"):60109,li=Ve?Symbol.for("react.context"):60110,Sl=Ve?Symbol.for("react.async_mode"):60111,ci=Ve?Symbol.for("react.concurrent_mode"):60111,di=Ve?Symbol.for("react.forward_ref"):60112,ui=Ve?Symbol.for("react.suspense"):60113,I0=Ve?Symbol.for("react.suspense_list"):60120,mi=Ve?Symbol.for("react.memo"):60115,fi=Ve?Symbol.for("react.lazy"):60116,D0=Ve?Symbol.for("react.block"):60121,T0=Ve?Symbol.for("react.fundamental"):60117,k0=Ve?Symbol.for("react.responder"):60118,A0=Ve?Symbol.for("react.scope"):60119;function ht(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Nl:switch(e=e.type,e){case Sl:case ci:case si:case ii:case ai:case ui:return e;default:switch(e=e&&e.$$typeof,e){case li:case di:case fi:case mi:case oi:return e;default:return t}}case jl:return t}}}function Df(e){return ht(e)===ci}Pe.AsyncMode=Sl;Pe.ConcurrentMode=ci;Pe.ContextConsumer=li;Pe.ContextProvider=oi;Pe.Element=Nl;Pe.ForwardRef=di;Pe.Fragment=si;Pe.Lazy=fi;Pe.Memo=mi;Pe.Portal=jl;Pe.Profiler=ii;Pe.StrictMode=ai;Pe.Suspense=ui;Pe.isAsyncMode=function(e){return Df(e)||ht(e)===Sl};Pe.isConcurrentMode=Df;Pe.isContextConsumer=function(e){return ht(e)===li};Pe.isContextProvider=function(e){return ht(e)===oi};Pe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nl};Pe.isForwardRef=function(e){return ht(e)===di};Pe.isFragment=function(e){return ht(e)===si};Pe.isLazy=function(e){return ht(e)===fi};Pe.isMemo=function(e){return ht(e)===mi};Pe.isPortal=function(e){return ht(e)===jl};Pe.isProfiler=function(e){return ht(e)===ii};Pe.isStrictMode=function(e){return ht(e)===ai};Pe.isSuspense=function(e){return ht(e)===ui};Pe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===si||e===ci||e===ii||e===ai||e===ui||e===I0||typeof e=="object"&&e!==null&&(e.$$typeof===fi||e.$$typeof===mi||e.$$typeof===oi||e.$$typeof===li||e.$$typeof===di||e.$$typeof===T0||e.$$typeof===k0||e.$$typeof===A0||e.$$typeof===D0)};Pe.typeOf=ht;If.exports=Pe;var R0=If.exports,Cl=R0,O0={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},F0={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},_0={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Tf={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},El={};El[Cl.ForwardRef]=_0;El[Cl.Memo]=Tf;function Hc(e){return Cl.isMemo(e)?Tf:El[e.$$typeof]||O0}var M0=Object.defineProperty,L0=Object.getOwnPropertyNames,Gc=Object.getOwnPropertySymbols,B0=Object.getOwnPropertyDescriptor,z0=Object.getPrototypeOf,Vc=Object.prototype;function kf(e,t,r){if(typeof t!="string"){if(Vc){var s=z0(t);s&&s!==Vc&&kf(e,s,r)}var a=L0(t);Gc&&(a=a.concat(Gc(t)));for(var i=Hc(e),o=Hc(t),l=0;l<a.length;++l){var c=a[l];if(!F0[c]&&!(r&&r[c])&&!(o&&o[c])&&!(i&&i[c])){var d=B0(t,c);try{M0(e,c,d)}catch{}}}}return e}var $0=kf;const Wc=Hh($0);var Af={exports:{}},De={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pi=60103,hi=60106,Vs=60107,Ws=60108,Ks=60114,Ys=60109,Qs=60110,Zs=60112,Js=60113,Pl=60120,Xs=60115,ea=60116,Rf=60121,Of=60122,Ff=60117,_f=60129,Mf=60131;if(typeof Symbol=="function"&&Symbol.for){var We=Symbol.for;pi=We("react.element"),hi=We("react.portal"),Vs=We("react.fragment"),Ws=We("react.strict_mode"),Ks=We("react.profiler"),Ys=We("react.provider"),Qs=We("react.context"),Zs=We("react.forward_ref"),Js=We("react.suspense"),Pl=We("react.suspense_list"),Xs=We("react.memo"),ea=We("react.lazy"),Rf=We("react.block"),Of=We("react.server.block"),Ff=We("react.fundamental"),_f=We("react.debug_trace_mode"),Mf=We("react.legacy_hidden")}function zt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case pi:switch(e=e.type,e){case Vs:case Ks:case Ws:case Js:case Pl:return e;default:switch(e=e&&e.$$typeof,e){case Qs:case Zs:case ea:case Xs:case Ys:return e;default:return t}}case hi:return t}}}var q0=Ys,U0=pi,H0=Zs,G0=Vs,V0=ea,W0=Xs,K0=hi,Y0=Ks,Q0=Ws,Z0=Js;De.ContextConsumer=Qs;De.ContextProvider=q0;De.Element=U0;De.ForwardRef=H0;De.Fragment=G0;De.Lazy=V0;De.Memo=W0;De.Portal=K0;De.Profiler=Y0;De.StrictMode=Q0;De.Suspense=Z0;De.isAsyncMode=function(){return!1};De.isConcurrentMode=function(){return!1};De.isContextConsumer=function(e){return zt(e)===Qs};De.isContextProvider=function(e){return zt(e)===Ys};De.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===pi};De.isForwardRef=function(e){return zt(e)===Zs};De.isFragment=function(e){return zt(e)===Vs};De.isLazy=function(e){return zt(e)===ea};De.isMemo=function(e){return zt(e)===Xs};De.isPortal=function(e){return zt(e)===hi};De.isProfiler=function(e){return zt(e)===Ks};De.isStrictMode=function(e){return zt(e)===Ws};De.isSuspense=function(e){return zt(e)===Js};De.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Vs||e===Ks||e===_f||e===Ws||e===Js||e===Pl||e===Mf||typeof e=="object"&&e!==null&&(e.$$typeof===ea||e.$$typeof===Xs||e.$$typeof===Ys||e.$$typeof===Qs||e.$$typeof===Zs||e.$$typeof===Ff||e.$$typeof===Rf||e[0]===Of)};De.typeOf=zt;Af.exports=De;var J0=Af.exports,X0=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],ew=["reactReduxForwardedRef"],tw=[],rw=[null,null];function nw(e,t){var r=e[1];return[t.payload,r+1]}function Kc(e,t,r){Pf(function(){return e.apply(void 0,t)},r)}function sw(e,t,r,s,a,i,o){e.current=s,t.current=a,r.current=!1,i.current&&(i.current=null,o())}function aw(e,t,r,s,a,i,o,l,c,d){if(e){var m=!1,u=null,f=function(){if(!m){var g=t.getState(),x,v;try{x=s(g,a.current)}catch(y){v=y,u=y}v||(u=null),x===i.current?o.current||c():(i.current=x,l.current=x,o.current=!0,d({type:"STORE_UPDATED",payload:{error:v}}))}};r.onStateChange=f,r.trySubscribe(),f();var p=function(){if(m=!0,r.tryUnsubscribe(),r.onStateChange=null,u)throw u};return p}}var iw=function(){return[null,0]};function ow(e,t){t===void 0&&(t={});var r=t,s=r.getDisplayName,a=s===void 0?function(w){return"ConnectAdvanced("+w+")"}:s,i=r.methodName,o=i===void 0?"connectAdvanced":i,l=r.renderCountProp,c=l===void 0?void 0:l,d=r.shouldHandleStateChanges,m=d===void 0?!0:d,u=r.storeKey,f=u===void 0?"store":u;r.withRef;var p=r.forwardRef,h=p===void 0?!1:p,g=r.context,x=g===void 0?Sf:g,v=Aa(r,X0),y=x;return function(N){var j=N.displayName||N.name||"Component",C=a(j),P=se({},v,{getDisplayName:a,methodName:o,renderCountProp:c,shouldHandleStateChanges:m,storeKey:f,displayName:C,wrappedComponentName:j,WrappedComponent:N}),S=v.pure;function D(T){return e(T.dispatch,P)}var A=S?b.useMemo:function(T){return T()};function R(T){var _=b.useMemo(function(){var Be=T.reactReduxForwardedRef,rt=Aa(T,ew);return[T.context,Be,rt]},[T]),M=_[0],O=_[1],F=_[2],B=b.useMemo(function(){return M&&M.Consumer&&J0.isContextConsumer($.createElement(M.Consumer,null))?M:y},[M,y]),W=b.useContext(B),K=!!T.store&&!!T.store.getState&&!!T.store.dispatch;W&&W.store;var G=K?T.store:W.store,ee=b.useMemo(function(){return D(G)},[G]),Q=b.useMemo(function(){if(!m)return rw;var Be=Ef(G,K?null:W.subscription),rt=Be.notifyNestedSubs.bind(Be);return[Be,rt]},[G,K,W]),me=Q[0],Ie=Q[1],q=b.useMemo(function(){return K?W:se({},W,{subscription:me})},[K,W,me]),ne=b.useReducer(nw,tw,iw),ve=ne[0],J=ve[0],Y=ne[1];if(J&&J.error)throw J.error;var U=b.useRef(),ae=b.useRef(F),he=b.useRef(),Te=b.useRef(!1),Oe=A(function(){return he.current&&F===ae.current?he.current:ee(G.getState(),F)},[G,J,F]);Kc(sw,[ae,U,Te,F,Oe,he,Ie]),Kc(aw,[m,G,me,ee,ae,U,Te,he,Ie,Y],[G,me,ee]);var Le=b.useMemo(function(){return $.createElement(N,se({},Oe,{ref:O}))},[O,N,Oe]),Ze=b.useMemo(function(){return m?$.createElement(B.Provider,{value:q},Le):Le},[B,Le,q]);return Ze}var E=S?$.memo(R):R;if(E.WrappedComponent=N,E.displayName=R.displayName=C,h){var k=$.forwardRef(function(_,M){return $.createElement(E,se({},_,{reactReduxForwardedRef:M}))});return k.displayName=C,k.WrappedComponent=N,Wc(k,N)}return Wc(E,N)}}function Yc(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Ui(e,t){if(Yc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!Yc(e[r[a]],t[r[a]]))return!1;return!0}function lw(e,t){var r={},s=function(o){var l=e[o];typeof l=="function"&&(r[o]=function(){return t(l.apply(void 0,arguments))})};for(var a in e)s(a);return r}function Il(e){return function(r,s){var a=e(r,s);function i(){return a}return i.dependsOnOwnProps=!1,i}}function Qc(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function Lf(e,t){return function(s,a){a.displayName;var i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=Qc(e);var d=i(l,c);return typeof d=="function"&&(i.mapToProps=d,i.dependsOnOwnProps=Qc(d),d=i(l,c)),d},i}}function cw(e){return typeof e=="function"?Lf(e):void 0}function dw(e){return e?void 0:Il(function(t){return{dispatch:t}})}function uw(e){return e&&typeof e=="object"?Il(function(t){return lw(e,t)}):void 0}const mw=[cw,dw,uw];function fw(e){return typeof e=="function"?Lf(e):void 0}function pw(e){return e?void 0:Il(function(){return{}})}const hw=[fw,pw];function gw(e,t,r){return se({},r,e,t)}function vw(e){return function(r,s){s.displayName;var a=s.pure,i=s.areMergedPropsEqual,o=!1,l;return function(d,m,u){var f=e(d,m,u);return o?(!a||!i(f,l))&&(l=f):(o=!0,l=f),l}}}function xw(e){return typeof e=="function"?vw(e):void 0}function bw(e){return e?void 0:function(){return gw}}const yw=[xw,bw];var ww=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Nw(e,t,r,s){return function(i,o){return r(e(i,o),t(s,o),o)}}function jw(e,t,r,s,a){var i=a.areStatesEqual,o=a.areOwnPropsEqual,l=a.areStatePropsEqual,c=!1,d,m,u,f,p;function h(w,N){return d=w,m=N,u=e(d,m),f=t(s,m),p=r(u,f,m),c=!0,p}function g(){return u=e(d,m),t.dependsOnOwnProps&&(f=t(s,m)),p=r(u,f,m),p}function x(){return e.dependsOnOwnProps&&(u=e(d,m)),t.dependsOnOwnProps&&(f=t(s,m)),p=r(u,f,m),p}function v(){var w=e(d,m),N=!l(w,u);return u=w,N&&(p=r(u,f,m)),p}function y(w,N){var j=!o(N,m),C=!i(w,d,N,m);return d=w,m=N,j&&C?g():j?x():C?v():p}return function(N,j){return c?y(N,j):h(N,j)}}function Sw(e,t){var r=t.initMapStateToProps,s=t.initMapDispatchToProps,a=t.initMergeProps,i=Aa(t,ww),o=r(e,i),l=s(e,i),c=a(e,i),d=i.pure?jw:Nw;return d(o,l,c,e,i)}var Cw=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Hi(e,t,r){for(var s=t.length-1;s>=0;s--){var a=t[s](e);if(a)return a}return function(i,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function Ew(e,t){return e===t}function Pw(e){var t=e===void 0?{}:e,r=t.connectHOC,s=r===void 0?ow:r,a=t.mapStateToPropsFactories,i=a===void 0?hw:a,o=t.mapDispatchToPropsFactories,l=o===void 0?mw:o,c=t.mergePropsFactories,d=c===void 0?yw:c,m=t.selectorFactory,u=m===void 0?Sw:m;return function(p,h,g,x){x===void 0&&(x={});var v=x,y=v.pure,w=y===void 0?!0:y,N=v.areStatesEqual,j=N===void 0?Ew:N,C=v.areOwnPropsEqual,P=C===void 0?Ui:C,S=v.areStatePropsEqual,D=S===void 0?Ui:S,A=v.areMergedPropsEqual,R=A===void 0?Ui:A,E=Aa(v,Cw),k=Hi(p,i,"mapStateToProps"),T=Hi(h,l,"mapDispatchToProps"),_=Hi(g,d,"mergeProps");return s(u,se({methodName:"connect",getDisplayName:function(O){return"Connect("+O+")"},shouldHandleStateChanges:!!p,initMapStateToProps:k,initMapDispatchToProps:T,initMergeProps:_,pure:w,areStatesEqual:j,areOwnPropsEqual:P,areStatePropsEqual:D,areMergedPropsEqual:R},E))}}const Bf=Pw();S0(qn.unstable_batchedUpdates);function Iw(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function zf(e,t){var r=b.useState(function(){return{inputs:t,result:e()}})[0],s=b.useRef(!0),a=b.useRef(r),i=s.current||!!(t&&a.current.inputs&&Iw(t,a.current.inputs)),o=i?a.current:{inputs:t,result:e()};return b.useEffect(function(){s.current=!1,a.current=o},[o]),o.result}function Dw(e,t){return zf(function(){return e},t)}var Ne=zf,X=Dw,Tw="Invariant failed";function kw(e,t){throw new Error(Tw)}var _t=function(t){var r=t.top,s=t.right,a=t.bottom,i=t.left,o=s-i,l=a-r,c={top:r,right:s,bottom:a,left:i,width:o,height:l,x:i,y:r,center:{x:(s+i)/2,y:(a+r)/2}};return c},Dl=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Zc=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Aw=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Gi={top:0,right:0,bottom:0,left:0},Tl=function(t){var r=t.borderBox,s=t.margin,a=s===void 0?Gi:s,i=t.border,o=i===void 0?Gi:i,l=t.padding,c=l===void 0?Gi:l,d=_t(Dl(r,a)),m=_t(Zc(r,o)),u=_t(Zc(m,c));return{marginBox:d,borderBox:_t(r),paddingBox:m,contentBox:u,margin:a,border:o,padding:c}},gt=function(t){var r=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var a=Number(r);return isNaN(a)&&kw(),a},Rw=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Ra=function(t,r){var s=t.borderBox,a=t.border,i=t.margin,o=t.padding,l=Aw(s,r);return Tl({borderBox:l,border:a,margin:i,padding:o})},Oa=function(t,r){return r===void 0&&(r=Rw()),Ra(t,r)},$f=function(t,r){var s={top:gt(r.marginTop),right:gt(r.marginRight),bottom:gt(r.marginBottom),left:gt(r.marginLeft)},a={top:gt(r.paddingTop),right:gt(r.paddingRight),bottom:gt(r.paddingBottom),left:gt(r.paddingLeft)},i={top:gt(r.borderTopWidth),right:gt(r.borderRightWidth),bottom:gt(r.borderBottomWidth),left:gt(r.borderLeftWidth)};return Tl({borderBox:t,margin:s,padding:a,border:i})},qf=function(t){var r=t.getBoundingClientRect(),s=window.getComputedStyle(t);return $f(r,s)},Jc=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Ow(e,t){return!!(e===t||Jc(e)&&Jc(t))}function Fw(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!Ow(e[r],t[r]))return!1;return!0}function He(e,t){t===void 0&&(t=Fw);var r,s=[],a,i=!1;function o(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return i&&r===this&&t(l,s)||(a=e.apply(this,l),i=!0,r=this,s=l),a}return o}var Is=function(t){var r=[],s=null,a=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];r=l,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,r)}))};return a.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},a};function Uf(e,t){}Uf.bind(null,"warn");Uf.bind(null,"error");function Dr(){}function _w(e,t){return se({},e,{},t)}function xt(e,t,r){var s=t.map(function(a){var i=_w(r,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){s.forEach(function(i){i()})}}var Mw="Invariant failed";function Fa(e){this.message=e}Fa.prototype.toString=function(){return this.message};function H(e,t){throw new Fa(Mw)}var Lw=function(e){wf(t,e);function t(){for(var s,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return s=e.call.apply(e,[this].concat(i))||this,s.callbacks=null,s.unbind=Dr,s.onWindowError=function(l){var c=s.getCallbacks();c.isDragging()&&c.tryAbort();var d=l.error;d instanceof Fa&&l.preventDefault()},s.getCallbacks=function(){if(!s.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return s.callbacks},s.setCallbacks=function(l){s.callbacks=l},s}var r=t.prototype;return r.componentDidMount=function(){this.unbind=xt(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof Fa){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}($.Component),Bw=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,_a=function(t){return t+1},zw=function(t){return`
  You have lifted an item in position `+_a(t.source.index)+`
`},Hf=function(t,r){var s=t.droppableId===r.droppableId,a=_a(t.index),i=_a(r.index);return s?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},Gf=function(t,r,s){var a=r.droppableId===s.droppableId;return a?`
      The item `+t+`
      has been combined with `+s.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+s.draggableId+`
      in list `+s.droppableId+`
    `},$w=function(t){var r=t.destination;if(r)return Hf(t.source,r);var s=t.combine;return s?Gf(t.draggableId,t.source,s):"You are over an area that cannot be dropped on"},Xc=function(t){return`
  The item has returned to its starting position
  of `+_a(t.index)+`
`},qw=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+Xc(t.source)+`
    `;var r=t.destination,s=t.combine;return r?`
      You have dropped the item.
      `+Hf(t.source,r)+`
    `:s?`
      You have dropped the item.
      `+Gf(t.draggableId,t.source,s)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Xc(t.source)+`
  `},Na={dragHandleUsageInstructions:Bw,onDragStart:zw,onDragUpdate:$w,onDragEnd:qw},Ge={x:0,y:0},Ye=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},ut=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},Tr=function(t,r){return t.x===r.x&&t.y===r.y},Zn=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},dn=function(t,r,s){var a;return s===void 0&&(s=0),a={},a[t]=r,a[t==="x"?"y":"x"]=s,a},Ds=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},ed=function(t,r){return Math.min.apply(Math,r.map(function(s){return Ds(t,s)}))},Vf=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},Uw=function(e,t){var r=_t({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},ta=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},td=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},Hw={top:0,right:0,bottom:0,left:0},Gw=function(t,r){return r?ta(t,r.scroll.diff.displacement):t},Vw=function(t,r,s){if(s&&s.increasedBy){var a;return se({},t,(a={},a[r.end]=t[r.end]+s.increasedBy[r.line],a))}return t},Ww=function(t,r){return r&&r.shouldClipSubject?Uw(r.pageMarginBox,t):_t(t)},Ln=function(e){var t=e.page,r=e.withPlaceholder,s=e.axis,a=e.frame,i=Gw(t.marginBox,a),o=Vw(i,s,r),l=Ww(o,a);return{page:t,withPlaceholder:r,active:l}},kl=function(e,t){e.frame||H();var r=e.frame,s=ut(t,r.scroll.initial),a=Zn(s),i=se({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:s,displacement:a},max:r.scroll.max}}),o=Ln({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),l=se({},e,{frame:i,subject:o});return l};function Ma(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function Al(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function Lr(e,t){if(e.find)return e.find(t);var r=Al(e,t);if(r!==-1)return e[r]}function Wf(e){return Array.prototype.slice.call(e)}var Kf=He(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),Yf=He(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),gi=He(function(e){return Ma(e)}),Kw=He(function(e){return Ma(e)}),Jn=He(function(e,t){var r=Kw(t).filter(function(s){return e===s.descriptor.droppableId}).sort(function(s,a){return s.descriptor.index-a.descriptor.index});return r});function Rl(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function vi(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var xi=He(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),Yw=function(e){var t=e.isMovingForward,r=e.draggable,s=e.destination,a=e.insideDestination,i=e.previousImpact;if(!s.isCombineEnabled)return null;var o=Rl(i);if(!o)return null;function l(g){var x={type:"COMBINE",combine:{draggableId:g,droppableId:s.descriptor.id}};return se({},i,{at:x})}var c=i.displaced.all,d=c.length?c[0]:null;if(t)return d?l(d):null;var m=xi(r,a);if(!d){if(!m.length)return null;var u=m[m.length-1];return l(u.descriptor.id)}var f=Al(m,function(g){return g.descriptor.id===d});f===-1&&H();var p=f-1;if(p<0)return null;var h=m[p];return l(h.descriptor.id)},Xn=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Qf={point:Ge,value:0},Ts={invisible:{},visible:{},all:[]},Qw={displaced:Ts,displacedBy:Qf,at:null},bt=function(e,t){return function(r){return e<=r&&r<=t}},Zf=function(e){var t=bt(e.top,e.bottom),r=bt(e.left,e.right);return function(s){var a=t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right);if(a)return!0;var i=t(s.top)||t(s.bottom),o=r(s.left)||r(s.right),l=i&&o;if(l)return!0;var c=s.top<e.top&&s.bottom>e.bottom,d=s.left<e.left&&s.right>e.right,m=c&&d;if(m)return!0;var u=c&&o||d&&i;return u}},Zw=function(e){var t=bt(e.top,e.bottom),r=bt(e.left,e.right);return function(s){var a=t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right);return a}},Ol={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Jf={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Jw=function(e){return function(t){var r=bt(t.top,t.bottom),s=bt(t.left,t.right);return function(a){return e===Ol?r(a.top)&&r(a.bottom):s(a.left)&&s(a.right)}}},Xw=function(t,r){var s=r.frame?r.frame.scroll.diff.displacement:Ge;return ta(t,s)},eN=function(t,r,s){return r.subject.active?s(r.subject.active)(t):!1},tN=function(t,r,s){return s(r)(t)},Fl=function(t){var r=t.target,s=t.destination,a=t.viewport,i=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,l=i?Xw(r,s):r;return eN(l,s,o)&&tN(l,a,o)},rN=function(t){return Fl(se({},t,{isVisibleThroughFrameFn:Zf}))},Xf=function(t){return Fl(se({},t,{isVisibleThroughFrameFn:Zw}))},nN=function(t){return Fl(se({},t,{isVisibleThroughFrameFn:Jw(t.destination.axis)}))},sN=function(t,r,s){if(typeof s=="boolean")return s;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[t])return!1;var o=i[t];return o?o.shouldAnimate:!0};function aN(e,t){var r=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return _t(Dl(r,s))}function ks(e){var t=e.afterDragging,r=e.destination,s=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,o=e.last;return t.reduce(function(c,d){var m=aN(d,s),u=d.descriptor.id;c.all.push(u);var f=rN({target:m,destination:r,viewport:a,withDroppableDisplacement:!0});if(!f)return c.invisible[d.descriptor.id]=!0,c;var p=sN(u,o,i),h={draggableId:u,shouldAnimate:p};return c.visible[u]=h,c},{all:[],visible:{},invisible:{}})}function iN(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function rd(e){var t=e.insideDestination,r=e.inHomeList,s=e.displacedBy,a=e.destination,i=iN(t,{inHomeList:r});return{displaced:Ts,displacedBy:s,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function La(e){var t=e.draggable,r=e.insideDestination,s=e.destination,a=e.viewport,i=e.displacedBy,o=e.last,l=e.index,c=e.forceShouldAnimate,d=Xn(t,s);if(l==null)return rd({insideDestination:r,inHomeList:d,displacedBy:i,destination:s});var m=Lr(r,function(g){return g.descriptor.index===l});if(!m)return rd({insideDestination:r,inHomeList:d,displacedBy:i,destination:s});var u=xi(t,r),f=r.indexOf(m),p=u.slice(f),h=ks({afterDragging:p,destination:s,displacedBy:i,last:o,viewport:a.frame,forceShouldAnimate:c});return{displaced:h,displacedBy:i,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:l}}}}function Fr(e,t){return!!t.effected[e]}var oN=function(e){var t=e.isMovingForward,r=e.destination,s=e.draggables,a=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var o=a.draggableId,l=s[o],c=l.descriptor.index,d=Fr(o,i);return d?t?c:c-1:t?c+1:c},lN=function(e){var t=e.isMovingForward,r=e.isInHomeList,s=e.insideDestination,a=e.location;if(!s.length)return null;var i=a.index,o=t?i+1:i-1,l=s[0].descriptor.index,c=s[s.length-1].descriptor.index,d=r?c:c+1;return o<l||o>d?null:o},cN=function(e){var t=e.isMovingForward,r=e.isInHomeList,s=e.draggable,a=e.draggables,i=e.destination,o=e.insideDestination,l=e.previousImpact,c=e.viewport,d=e.afterCritical,m=l.at;if(m||H(),m.type==="REORDER"){var u=lN({isMovingForward:t,isInHomeList:r,location:m.destination,insideDestination:o});return u==null?null:La({draggable:s,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:u})}var f=oN({isMovingForward:t,destination:i,displaced:l.displaced,draggables:a,combine:m.combine,afterCritical:d});return f==null?null:La({draggable:s,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:f})},dN=function(e){var t=e.displaced,r=e.afterCritical,s=e.combineWith,a=e.displacedBy,i=!!(t.visible[s]||t.invisible[s]);return Fr(s,r)?i?Ge:Zn(a.point):i?a.point:Ge},uN=function(e){var t=e.afterCritical,r=e.impact,s=e.draggables,a=vi(r);a||H();var i=a.draggableId,o=s[i].page.borderBox.center,l=dN({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return Ye(o,l)},ep=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},mN=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},_l=function(t,r,s){return r[t.crossAxisStart]+s.margin[t.crossAxisStart]+s.borderBox[t.crossAxisSize]/2},nd=function(t){var r=t.axis,s=t.moveRelativeTo,a=t.isMoving;return dn(r.line,s.marginBox[r.end]+ep(r,a),_l(r,s.marginBox,a))},sd=function(t){var r=t.axis,s=t.moveRelativeTo,a=t.isMoving;return dn(r.line,s.marginBox[r.start]-mN(r,a),_l(r,s.marginBox,a))},fN=function(t){var r=t.axis,s=t.moveInto,a=t.isMoving;return dn(r.line,s.contentBox[r.start]+ep(r,a),_l(r,s.contentBox,a))},pN=function(e){var t=e.impact,r=e.draggable,s=e.draggables,a=e.droppable,i=e.afterCritical,o=Jn(a.descriptor.id,s),l=r.page,c=a.axis;if(!o.length)return fN({axis:c,moveInto:a.page,isMoving:l});var d=t.displaced,m=t.displacedBy,u=d.all[0];if(u){var f=s[u];if(Fr(u,i))return sd({axis:c,moveRelativeTo:f.page,isMoving:l});var p=Ra(f.page,m.point);return sd({axis:c,moveRelativeTo:p,isMoving:l})}var h=o[o.length-1];if(h.descriptor.id===r.descriptor.id)return l.borderBox.center;if(Fr(h.descriptor.id,i)){var g=Ra(h.page,Zn(i.displacedBy.point));return nd({axis:c,moveRelativeTo:g,isMoving:l})}return nd({axis:c,moveRelativeTo:h.page,isMoving:l})},To=function(e,t){var r=e.frame;return r?Ye(t,r.scroll.diff.displacement):t},hN=function(t){var r=t.impact,s=t.draggable,a=t.droppable,i=t.draggables,o=t.afterCritical,l=s.page.borderBox.center,c=r.at;return!a||!c?l:c.type==="REORDER"?pN({impact:r,draggable:s,draggables:i,droppable:a,afterCritical:o}):uN({impact:r,draggables:i,afterCritical:o})},bi=function(e){var t=hN(e),r=e.droppable,s=r?To(r,t):t;return s},tp=function(e,t){var r=ut(t,e.scroll.initial),s=Zn(r),a=_t({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:s}}};return i};function ad(e,t){return e.map(function(r){return t[r]})}function gN(e,t){for(var r=0;r<t.length;r++){var s=t[r].visible[e];if(s)return s}return null}var vN=function(e){var t=e.impact,r=e.viewport,s=e.destination,a=e.draggables,i=e.maxScrollChange,o=tp(r,Ye(r.scroll.current,i)),l=s.frame?kl(s,Ye(s.frame.scroll.current,i)):s,c=t.displaced,d=ks({afterDragging:ad(c.all,a),destination:s,displacedBy:t.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),m=ks({afterDragging:ad(c.all,a),destination:l,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),u={},f={},p=[c,d,m];c.all.forEach(function(g){var x=gN(g,p);if(x){f[g]=x;return}u[g]=!0});var h=se({},t,{displaced:{all:c.all,invisible:u,visible:f}});return h},xN=function(e,t){return Ye(e.scroll.diff.displacement,t)},Ml=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,s=e.viewport,a=xN(s,t),i=ut(a,r.page.borderBox.center);return Ye(r.client.borderBox.center,i)},rp=function(e){var t=e.draggable,r=e.destination,s=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,o=e.onlyOnMainAxis,l=o===void 0?!1:o,c=ut(s,t.page.borderBox.center),d=ta(t.page.borderBox,c),m={target:d,destination:r,withDroppableDisplacement:i,viewport:a};return l?nN(m):Xf(m)},bN=function(e){var t=e.isMovingForward,r=e.draggable,s=e.destination,a=e.draggables,i=e.previousImpact,o=e.viewport,l=e.previousPageBorderBoxCenter,c=e.previousClientSelection,d=e.afterCritical;if(!s.isEnabled)return null;var m=Jn(s.descriptor.id,a),u=Xn(r,s),f=Yw({isMovingForward:t,draggable:r,destination:s,insideDestination:m,previousImpact:i})||cN({isMovingForward:t,isInHomeList:u,draggable:r,draggables:a,destination:s,insideDestination:m,previousImpact:i,viewport:o,afterCritical:d});if(!f)return null;var p=bi({impact:f,draggable:r,droppable:s,draggables:a,afterCritical:d}),h=rp({draggable:r,destination:s,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(h){var g=Ml({pageBorderBoxCenter:p,draggable:r,viewport:o});return{clientSelection:g,impact:f,scrollJumpRequest:null}}var x=ut(p,l),v=vN({impact:f,viewport:o,destination:s,draggables:a,maxScrollChange:x});return{clientSelection:c,impact:v,scrollJumpRequest:x}},Je=function(t){var r=t.subject.active;return r||H(),r},yN=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,s=e.source,a=e.droppables,i=e.viewport,o=s.subject.active;if(!o)return null;var l=s.axis,c=bt(o[l.start],o[l.end]),d=gi(a).filter(function(u){return u!==s}).filter(function(u){return u.isEnabled}).filter(function(u){return!!u.subject.active}).filter(function(u){return Zf(i.frame)(Je(u))}).filter(function(u){var f=Je(u);return t?o[l.crossAxisEnd]<f[l.crossAxisEnd]:f[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(u){var f=Je(u),p=bt(f[l.start],f[l.end]);return c(f[l.start])||c(f[l.end])||p(o[l.start])||p(o[l.end])}).sort(function(u,f){var p=Je(u)[l.crossAxisStart],h=Je(f)[l.crossAxisStart];return t?p-h:h-p}).filter(function(u,f,p){return Je(u)[l.crossAxisStart]===Je(p[0])[l.crossAxisStart]});if(!d.length)return null;if(d.length===1)return d[0];var m=d.filter(function(u){var f=bt(Je(u)[l.start],Je(u)[l.end]);return f(r[l.line])});return m.length===1?m[0]:m.length>1?m.sort(function(u,f){return Je(u)[l.start]-Je(f)[l.start]})[0]:d.sort(function(u,f){var p=ed(r,td(Je(u))),h=ed(r,td(Je(f)));return p!==h?p-h:Je(u)[l.start]-Je(f)[l.start]})[0]},id=function(t,r){var s=t.page.borderBox.center;return Fr(t.descriptor.id,r)?ut(s,r.displacedBy.point):s},wN=function(t,r){var s=t.page.borderBox;return Fr(t.descriptor.id,r)?ta(s,Zn(r.displacedBy.point)):s},NN=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,s=e.destination,a=e.insideDestination,i=e.afterCritical,o=a.filter(function(l){return Xf({target:wN(l,i),destination:s,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,c){var d=Ds(t,To(s,id(l,i))),m=Ds(t,To(s,id(c,i)));return d<m?-1:m<d?1:l.descriptor.index-c.descriptor.index});return o[0]||null},ra=He(function(t,r){var s=r[t.line];return{value:s,point:dn(t.line,s)}}),jN=function(t,r,s){var a=t.axis;if(t.descriptor.mode==="virtual")return dn(a.line,r[a.line]);var i=t.subject.page.contentBox[a.size],o=Jn(t.descriptor.id,s),l=o.reduce(function(m,u){return m+u.client.marginBox[a.size]},0),c=l+r[a.line],d=c-i;return d<=0?null:dn(a.line,d)},np=function(t,r){return se({},t,{scroll:se({},t.scroll,{max:r})})},sp=function(t,r,s){var a=t.frame;Xn(r,t)&&H(),t.subject.withPlaceholder&&H();var i=ra(t.axis,r.displaceBy).point,o=jN(t,i,s),l={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!a){var c=Ln({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:t.frame});return se({},t,{subject:c})}var d=o?Ye(a.scroll.max,o):a.scroll.max,m=np(a,d),u=Ln({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:m});return se({},t,{subject:u,frame:m})},SN=function(t){var r=t.subject.withPlaceholder;r||H();var s=t.frame;if(!s){var a=Ln({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return se({},t,{subject:a})}var i=r.oldFrameMaxScroll;i||H();var o=np(s,i),l=Ln({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return se({},t,{subject:l,frame:o})},CN=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,s=e.insideDestination,a=e.draggable,i=e.draggables,o=e.destination,l=e.viewport,c=e.afterCritical;if(!r){if(s.length)return null;var d={displaced:Ts,displacedBy:Qf,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},m=bi({impact:d,draggable:a,droppable:o,draggables:i,afterCritical:c}),u=Xn(a,o)?o:sp(o,a,i),f=rp({draggable:a,destination:u,newPageBorderBoxCenter:m,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return f?d:null}var p=t[o.axis.line]<=r.page.borderBox.center[o.axis.line],h=function(){var x=r.descriptor.index;return r.descriptor.id===a.descriptor.id||p?x:x+1}(),g=ra(o.axis,a.displaceBy);return La({draggable:a,insideDestination:s,destination:o,viewport:l,displacedBy:g,last:Ts,index:h})},EN=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,s=e.draggable,a=e.isOver,i=e.draggables,o=e.droppables,l=e.viewport,c=e.afterCritical,d=yN({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:o,viewport:l});if(!d)return null;var m=Jn(d.descriptor.id,i),u=NN({pageBorderBoxCenter:r,viewport:l,destination:d,insideDestination:m,afterCritical:c}),f=CN({previousPageBorderBoxCenter:r,destination:d,draggable:s,draggables:i,moveRelativeTo:u,insideDestination:m,viewport:l,afterCritical:c});if(!f)return null;var p=bi({impact:f,draggable:s,droppable:d,draggables:i,afterCritical:c}),h=Ml({pageBorderBoxCenter:p,draggable:s,viewport:l});return{clientSelection:h,impact:f,scrollJumpRequest:null}},ft=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},PN=function(t,r){var s=ft(t);return s?r[s]:null},IN=function(e){var t=e.state,r=e.type,s=PN(t.impact,t.dimensions.droppables),a=!!s,i=t.dimensions.droppables[t.critical.droppable.id],o=s||i,l=o.axis.direction,c=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var d=r==="MOVE_DOWN"||r==="MOVE_RIGHT",m=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,f=t.dimensions,p=f.draggables,h=f.droppables;return c?bN({isMovingForward:d,previousPageBorderBoxCenter:u,draggable:m,destination:o,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):EN({isMovingForward:d,previousPageBorderBoxCenter:u,draggable:m,isOver:o,draggables:p,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function Hr(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function ap(e){var t=bt(e.top,e.bottom),r=bt(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function DN(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function TN(e){var t=e.pageBorderBox,r=e.draggable,s=e.candidates,a=r.page.borderBox.center,i=s.map(function(o){var l=o.axis,c=dn(o.axis.line,t.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:Ds(a,c)}}).sort(function(o,l){return l.distance-o.distance});return i[0]?i[0].id:null}function kN(e){var t=e.pageBorderBox,r=e.draggable,s=e.droppables,a=gi(s).filter(function(i){if(!i.isEnabled)return!1;var o=i.subject.active;if(!o||!DN(t,o))return!1;if(ap(o)(t.center))return!0;var l=i.axis,c=o.center[l.crossAxisLine],d=t[l.crossAxisStart],m=t[l.crossAxisEnd],u=bt(o[l.crossAxisStart],o[l.crossAxisEnd]),f=u(d),p=u(m);return!f&&!p?!0:f?d<c:m>c});return a.length?a.length===1?a[0].descriptor.id:TN({pageBorderBox:t,draggable:r,candidates:a}):null}var ip=function(t,r){return _t(ta(t,r))},AN=function(e,t){var r=e.frame;return r?ip(t,r.scroll.diff.value):t};function op(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function RN(e){var t=e.draggable,r=e.closest,s=e.inHomeList;return r?s&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var ON=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,s=e.destination,a=e.insideDestination,i=e.last,o=e.viewport,l=e.afterCritical,c=s.axis,d=ra(s.axis,r.displaceBy),m=d.value,u=t[c.start],f=t[c.end],p=xi(r,a),h=Lr(p,function(x){var v=x.descriptor.id,y=x.page.borderBox.center[c.line],w=Fr(v,l),N=op({displaced:i,id:v});return w?N?f<=y:u<y-m:N?f<=y+m:u<y}),g=RN({draggable:r,closest:h,inHomeList:Xn(r,s)});return La({draggable:r,insideDestination:a,destination:s,viewport:o,last:i,displacedBy:d,index:g})},FN=4,_N=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,s=e.previousImpact,a=e.destination,i=e.insideDestination,o=e.afterCritical;if(!a.isCombineEnabled)return null;var l=a.axis,c=ra(a.axis,t.displaceBy),d=c.value,m=r[l.start],u=r[l.end],f=xi(t,i),p=Lr(f,function(g){var x=g.descriptor.id,v=g.page.borderBox,y=v[l.size],w=y/FN,N=Fr(x,o),j=op({displaced:s.displaced,id:x});return N?j?u>v[l.start]+w&&u<v[l.end]-w:m>v[l.start]-d+w&&m<v[l.end]-d-w:j?u>v[l.start]+d+w&&u<v[l.end]+d-w:m>v[l.start]+w&&m<v[l.end]-w});if(!p)return null;var h={displacedBy:c,displaced:s.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:a.descriptor.id}}};return h},lp=function(e){var t=e.pageOffset,r=e.draggable,s=e.draggables,a=e.droppables,i=e.previousImpact,o=e.viewport,l=e.afterCritical,c=ip(r.page.borderBox,t),d=kN({pageBorderBox:c,draggable:r,droppables:a});if(!d)return Qw;var m=a[d],u=Jn(m.descriptor.id,s),f=AN(m,c);return _N({pageBorderBoxWithDroppableScroll:f,draggable:r,previousImpact:i,destination:m,insideDestination:u,afterCritical:l})||ON({pageBorderBoxWithDroppableScroll:f,draggable:r,destination:m,insideDestination:u,last:i.displaced,viewport:o,afterCritical:l})},Ll=function(e,t){var r;return se({},e,(r={},r[t.descriptor.id]=t,r))},MN=function(t){var r=t.previousImpact,s=t.impact,a=t.droppables,i=ft(r),o=ft(s);if(!i||i===o)return a;var l=a[i];if(!l.subject.withPlaceholder)return a;var c=SN(l);return Ll(a,c)},LN=function(e){var t=e.draggable,r=e.draggables,s=e.droppables,a=e.previousImpact,i=e.impact,o=MN({previousImpact:a,impact:i,droppables:s}),l=ft(i);if(!l)return o;var c=s[l];if(Xn(t,c)||c.subject.withPlaceholder)return o;var d=sp(c,t,r);return Ll(o,d)},hs=function(e){var t=e.state,r=e.clientSelection,s=e.dimensions,a=e.viewport,i=e.impact,o=e.scrollJumpRequest,l=a||t.viewport,c=s||t.dimensions,d=r||t.current.client.selection,m=ut(d,t.initial.client.selection),u={offset:m,selection:d,borderBoxCenter:Ye(t.initial.client.borderBoxCenter,m)},f={selection:Ye(u.selection,l.scroll.current),borderBoxCenter:Ye(u.borderBoxCenter,l.scroll.current),offset:Ye(u.offset,l.scroll.diff.value)},p={client:u,page:f};if(t.phase==="COLLECTING")return se({phase:"COLLECTING"},t,{dimensions:c,viewport:l,current:p});var h=c.draggables[t.critical.draggable.id],g=i||lp({pageOffset:f.offset,draggable:h,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),x=LN({draggable:h,impact:g,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),v=se({},t,{current:p,dimensions:{draggables:c.draggables,droppables:x},impact:g,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return v};function BN(e,t){return e.map(function(r){return t[r]})}var cp=function(e){var t=e.impact,r=e.viewport,s=e.draggables,a=e.destination,i=e.forceShouldAnimate,o=t.displaced,l=BN(o.all,s),c=ks({afterDragging:l,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:o});return se({},t,{displaced:c})},dp=function(e){var t=e.impact,r=e.draggable,s=e.droppable,a=e.draggables,i=e.viewport,o=e.afterCritical,l=bi({impact:t,draggable:r,draggables:a,droppable:s,afterCritical:o});return Ml({pageBorderBoxCenter:l,draggable:r,viewport:i})},up=function(e){var t=e.state,r=e.dimensions,s=e.viewport;t.movementMode!=="SNAP"&&H();var a=t.impact,i=s||t.viewport,o=r||t.dimensions,l=o.draggables,c=o.droppables,d=l[t.critical.draggable.id],m=ft(a);m||H();var u=c[m],f=cp({impact:a,viewport:i,destination:u,draggables:l}),p=dp({impact:f,draggable:d,droppable:u,draggables:l,viewport:i,afterCritical:t.afterCritical});return hs({impact:f,clientSelection:p,state:t,dimensions:o,viewport:i})},zN=function(e){return{index:e.index,droppableId:e.droppableId}},mp=function(e){var t=e.draggable,r=e.home,s=e.draggables,a=e.viewport,i=ra(r.axis,t.displaceBy),o=Jn(r.descriptor.id,s),l=o.indexOf(t);l===-1&&H();var c=o.slice(l+1),d=c.reduce(function(p,h){return p[h.descriptor.id]=!0,p},{}),m={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:d},u=ks({afterDragging:c,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),f={displaced:u,displacedBy:i,at:{type:"REORDER",destination:zN(t.descriptor)}};return{impact:f,afterCritical:m}},$N=function(e,t){return{draggables:e.draggables,droppables:Ll(e.droppables,t)}},qN=function(e){var t=e.draggable,r=e.offset,s=e.initialWindowScroll,a=Ra(t.client,r),i=Oa(a,s),o=se({},t,{placeholder:se({},t.placeholder,{client:a}),client:a,page:i});return o},UN=function(e){var t=e.frame;return t||H(),t},HN=function(e){var t=e.additions,r=e.updatedDroppables,s=e.viewport,a=s.scroll.diff.value;return t.map(function(i){var o=i.descriptor.droppableId,l=r[o],c=UN(l),d=c.scroll.diff.value,m=Ye(a,d),u=qN({draggable:i,offset:m,initialWindowScroll:s.scroll.initial});return u})},GN=function(e){var t=e.state,r=e.published,s=r.modified.map(function(w){var N=t.dimensions.droppables[w.droppableId],j=kl(N,w.scroll);return j}),a=se({},t.dimensions.droppables,{},Kf(s)),i=Yf(HN({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),o=se({},t.dimensions.draggables,{},i);r.removals.forEach(function(w){delete o[w]});var l={droppables:a,draggables:o},c=ft(t.impact),d=c?l.droppables[c]:null,m=l.draggables[t.critical.draggable.id],u=l.droppables[t.critical.droppable.id],f=mp({draggable:m,home:u,draggables:o,viewport:t.viewport}),p=f.impact,h=f.afterCritical,g=d&&d.isCombineEnabled?t.impact:p,x=lp({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:g,viewport:t.viewport,afterCritical:h}),v=se({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:x,onLiftImpact:p,dimensions:l,afterCritical:h,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return v;var y=se({phase:"DROP_PENDING"},v,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return y},ko=function(t){return t.movementMode==="SNAP"},Vi=function(t,r,s){var a=$N(t.dimensions,r);return!ko(t)||s?hs({state:t,dimensions:a}):up({state:t,dimensions:a})};function Wi(e){return e.isDragging&&e.movementMode==="SNAP"?se({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var od={phase:"IDLE",completed:null,shouldFlush:!1},VN=function(e,t){if(e===void 0&&(e=od),t.type==="FLUSH")return se({},od,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&H();var r=t.payload,s=r.critical,a=r.clientSelection,i=r.viewport,o=r.dimensions,l=r.movementMode,c=o.draggables[s.draggable.id],d=o.droppables[s.droppable.id],m={selection:a,borderBoxCenter:c.client.borderBox.center,offset:Ge},u={client:m,page:{selection:Ye(m.selection,i.scroll.initial),borderBoxCenter:Ye(m.selection,i.scroll.initial),offset:Ye(m.selection,i.scroll.diff.value)}},f=gi(o.droppables).every(function(Y){return!Y.isFixedOnPage}),p=mp({draggable:c,home:d,draggables:o.draggables,viewport:i}),h=p.impact,g=p.afterCritical,x={phase:"DRAGGING",isDragging:!0,critical:s,movementMode:l,dimensions:o,initial:u,current:u,isWindowScrollAllowed:f,impact:h,afterCritical:g,onLiftImpact:h,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return x}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&H();var v=se({phase:"COLLECTING"},e,{phase:"COLLECTING"});return v}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||H(),GN({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Hr(e)||H();var y=t.payload.client;return Tr(y,e.current.client.selection)?e:hs({state:e,clientSelection:y,impact:ko(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Wi(e);Hr(e)||H();var w=t.payload,N=w.id,j=w.newScroll,C=e.dimensions.droppables[N];if(!C)return e;var P=kl(C,j);return Vi(e,P,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Hr(e)||H();var S=t.payload,D=S.id,A=S.isEnabled,R=e.dimensions.droppables[D];R||H(),R.isEnabled===A&&H();var E=se({},R,{isEnabled:A});return Vi(e,E,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Hr(e)||H();var k=t.payload,T=k.id,_=k.isCombineEnabled,M=e.dimensions.droppables[T];M||H(),M.isCombineEnabled===_&&H();var O=se({},M,{isCombineEnabled:_});return Vi(e,O,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Hr(e)||H(),e.isWindowScrollAllowed||H();var F=t.payload.newScroll;if(Tr(e.viewport.scroll.current,F))return Wi(e);var B=tp(e.viewport,F);return ko(e)?up({state:e,viewport:B}):hs({state:e,viewport:B})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Hr(e))return e;var W=t.payload.maxScroll;if(Tr(W,e.viewport.scroll.max))return e;var K=se({},e.viewport,{scroll:se({},e.viewport.scroll,{max:W})});return se({phase:"DRAGGING"},e,{viewport:K})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&H();var G=IN({state:e,type:t.type});return G?hs({state:e,impact:G.impact,clientSelection:G.clientSelection,scrollJumpRequest:G.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var ee=t.payload.reason;e.phase!=="COLLECTING"&&H();var Q=se({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:ee});return Q}if(t.type==="DROP_ANIMATE"){var me=t.payload,Ie=me.completed,q=me.dropDuration,ne=me.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||H();var ve={phase:"DROP_ANIMATING",completed:Ie,dropDuration:q,newHomeClientOffset:ne,dimensions:e.dimensions};return ve}if(t.type==="DROP_COMPLETE"){var J=t.payload.completed;return{phase:"IDLE",completed:J,shouldFlush:!1}}return e},WN=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},KN=function(t){return{type:"LIFT",payload:t}},YN=function(t){return{type:"INITIAL_PUBLISH",payload:t}},QN=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},ZN=function(){return{type:"COLLECTION_STARTING",payload:null}},JN=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},XN=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},ej=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},fp=function(t){return{type:"MOVE",payload:t}},tj=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},rj=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},nj=function(){return{type:"MOVE_UP",payload:null}},sj=function(){return{type:"MOVE_DOWN",payload:null}},aj=function(){return{type:"MOVE_RIGHT",payload:null}},ij=function(){return{type:"MOVE_LEFT",payload:null}},Bl=function(){return{type:"FLUSH",payload:null}},oj=function(t){return{type:"DROP_ANIMATE",payload:t}},zl=function(t){return{type:"DROP_COMPLETE",payload:t}},pp=function(t){return{type:"DROP",payload:t}},lj=function(t){return{type:"DROP_PENDING",payload:t}},hp=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},cj=function(e){return function(t){var r=t.getState,s=t.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var o=i.payload,l=o.id,c=o.clientSelection,d=o.movementMode,m=r();m.phase==="DROP_ANIMATING"&&s(zl({completed:m.completed})),r().phase!=="IDLE"&&H(),s(Bl()),s(WN({draggableId:l,movementMode:d}));var u={shouldPublishImmediately:d==="SNAP"},f={draggableId:l,scrollOptions:u},p=e.startPublishing(f),h=p.critical,g=p.dimensions,x=p.viewport;s(YN({critical:h,dimensions:g,clientSelection:c,movementMode:d,viewport:x}))}}}},dj=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},$l={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},As={opacity:{drop:0,combining:.7},scale:{drop:.75}},ql={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Ur=ql.outOfTheWay+"s "+$l.outOfTheWay,gs={fluid:"opacity "+Ur,snap:"transform "+Ur+", opacity "+Ur,drop:function(t){var r=t+"s "+$l.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+Ur,placeholder:"height "+Ur+", width "+Ur+", margin "+Ur},ld=function(t){return Tr(t,Ge)?null:"translate("+t.x+"px, "+t.y+"px)"},Ao={moveTo:ld,drop:function(t,r){var s=ld(t);return s?r?s+" scale("+As.scale.drop+")":s:null}},Ro=ql.minDropTime,gp=ql.maxDropTime,uj=gp-Ro,cd=1500,mj=.6,fj=function(e){var t=e.current,r=e.destination,s=e.reason,a=Ds(t,r);if(a<=0)return Ro;if(a>=cd)return gp;var i=a/cd,o=Ro+uj*i,l=s==="CANCEL"?o*mj:o;return Number(l.toFixed(2))},pj=function(e){var t=e.impact,r=e.draggable,s=e.dimensions,a=e.viewport,i=e.afterCritical,o=s.draggables,l=s.droppables,c=ft(t),d=c?l[c]:null,m=l[r.descriptor.droppableId],u=dp({impact:t,draggable:r,draggables:o,afterCritical:i,droppable:d||m,viewport:a}),f=ut(u,r.client.borderBox.center);return f},hj=function(e){var t=e.draggables,r=e.reason,s=e.lastImpact,a=e.home,i=e.viewport,o=e.onLiftImpact;if(!s.at||r!=="DROP"){var l=cp({draggables:t,impact:o,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(s.at.type==="REORDER")return{impact:s,didDropInsideDroppable:!0};var c=se({},s,{displaced:Ts});return{impact:c,didDropInsideDroppable:!0}},gj=function(e){var t=e.getState,r=e.dispatch;return function(s){return function(a){if(a.type!=="DROP"){s(a);return}var i=t(),o=a.payload.reason;if(i.phase==="COLLECTING"){r(lj({reason:o}));return}if(i.phase!=="IDLE"){var l=i.phase==="DROP_PENDING"&&i.isWaiting;l&&H(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||H();var c=i.critical,d=i.dimensions,m=d.draggables[i.critical.draggable.id],u=hj({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),f=u.impact,p=u.didDropInsideDroppable,h=p?Rl(f):null,g=p?vi(f):null,x={index:c.draggable.index,droppableId:c.droppable.id},v={draggableId:m.descriptor.id,type:m.descriptor.type,source:x,reason:o,mode:i.movementMode,destination:h,combine:g},y=pj({impact:f,draggable:m,dimensions:d,viewport:i.viewport,afterCritical:i.afterCritical}),w={critical:i.critical,afterCritical:i.afterCritical,result:v,impact:f},N=!Tr(i.current.client.offset,y)||!!v.combine;if(!N){r(zl({completed:w}));return}var j=fj({current:i.current.client.offset,destination:y,reason:o}),C={newHomeClientOffset:y,dropDuration:j,completed:w};r(oj(C))}}}},vp=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function vj(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function xj(e){var t=e.onWindowScroll;function r(){t(vp())}var s=Is(r),a=vj(s),i=Dr;function o(){return i!==Dr}function l(){o()&&H(),i=xt(window,[a])}function c(){o()||H(),s.cancel(),i(),i=Dr}return{start:l,stop:c,isActive:o}}var bj=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},yj=function(e){var t=xj({onWindowScroll:function(s){e.dispatch(tj({newScroll:s}))}});return function(r){return function(s){!t.isActive()&&s.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&bj(s)&&t.stop(),r(s)}}},wj=function(e){var t=!1,r=!1,s=setTimeout(function(){r=!0}),a=function(o){t||r||(t=!0,e(o),clearTimeout(s))};return a.wasCalled=function(){return t},a},Nj=function(){var e=[],t=function(i){var o=Al(e,function(d){return d.timerId===i});o===-1&&H();var l=e.splice(o,1),c=l[0];c.callback()},r=function(i){var o=setTimeout(function(){return t(o)}),l={timerId:o,callback:i};e.push(l)},s=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:s}},jj=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},Sj=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},Cj=function(t,r){if(t===r)return!0;var s=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,a=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return s&&a},is=function(t,r){r()},fa=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},Ki=function(t,r,s,a){if(!t){s(a(r));return}var i=wj(s),o={announce:i};t(r,o),i.wasCalled()||s(a(r))},Ej=function(e,t){var r=Nj(),s=null,a=function(f,p){s&&H(),is("onBeforeCapture",function(){var h=e().onBeforeCapture;if(h){var g={draggableId:f,mode:p};h(g)}})},i=function(f,p){s&&H(),is("onBeforeDragStart",function(){var h=e().onBeforeDragStart;h&&h(fa(f,p))})},o=function(f,p){s&&H();var h=fa(f,p);s={mode:p,lastCritical:f,lastLocation:h.source,lastCombine:null},r.add(function(){is("onDragStart",function(){return Ki(e().onDragStart,h,t,Na.onDragStart)})})},l=function(f,p){var h=Rl(p),g=vi(p);s||H();var x=!Cj(f,s.lastCritical);x&&(s.lastCritical=f);var v=!jj(s.lastLocation,h);v&&(s.lastLocation=h);var y=!Sj(s.lastCombine,g);if(y&&(s.lastCombine=g),!(!x&&!v&&!y)){var w=se({},fa(f,s.mode),{combine:g,destination:h});r.add(function(){is("onDragUpdate",function(){return Ki(e().onDragUpdate,w,t,Na.onDragUpdate)})})}},c=function(){s||H(),r.flush()},d=function(f){s||H(),s=null,is("onDragEnd",function(){return Ki(e().onDragEnd,f,t,Na.onDragEnd)})},m=function(){if(s){var f=se({},fa(s.lastCritical,s.mode),{combine:null,destination:null,reason:"CANCEL"});d(f)}};return{beforeCapture:a,beforeStart:i,start:o,update:l,flush:c,drop:d,abort:m}},Pj=function(e,t){var r=Ej(e,t);return function(s){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var o=i.payload.critical;r.beforeStart(o,i.payload.movementMode),a(i),r.start(o,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var l=i.payload.completed.result;r.flush(),a(i),r.drop(l);return}if(a(i),i.type==="FLUSH"){r.abort();return}var c=s.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},Ij=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var s=e.getState();s.phase!=="DROP_ANIMATING"&&H(),e.dispatch(zl({completed:s.completed}))}}},Dj=function(e){var t=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&s(),a(i),i.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(hp())}};r=requestAnimationFrame(function(){r=null,t=xt(window,[o])})}}}},Tj=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},kj=function(e){var t=!1;return function(){return function(r){return function(s){if(s.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),r(s),e.tryRestoreFocusRecorded();return}if(r(s),!!t){if(s.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(s.type==="DROP_COMPLETE"){t=!1;var a=s.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},Aj=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Rj=function(e){return function(t){return function(r){return function(s){if(Aj(s)){e.stop(),r(s);return}if(s.type==="INITIAL_PUBLISH"){r(s);var a=t.getState();a.phase!=="DRAGGING"&&H(),e.start(a);return}r(s),e.scroll(t.getState())}}}},Oj=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(pp({reason:s.reason})))}}}},Fj=jf,_j=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,s=e.styleMarshal,a=e.getResponders,i=e.announce,o=e.autoScroller;return Nf(VN,Fj(N0(dj(s),Tj(t),cj(t),gj,Ij,Dj,Oj,Rj(o),yj,kj(r),Pj(a,i))))},Yi=function(){return{additions:{},removals:{},modified:{}}};function Mj(e){var t=e.registry,r=e.callbacks,s=Yi(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var m=s,u=m.additions,f=m.removals,p=m.modified,h=Object.keys(u).map(function(v){return t.draggable.getById(v).getDimension(Ge)}).sort(function(v,y){return v.descriptor.index-y.descriptor.index}),g=Object.keys(p).map(function(v){var y=t.droppable.getById(v),w=y.callbacks.getScrollWhileDragging();return{droppableId:v,scroll:w}}),x={additions:h,removals:Object.keys(f),modified:g};s=Yi(),r.publish(x)}))},o=function(m){var u=m.descriptor.id;s.additions[u]=m,s.modified[m.descriptor.droppableId]=!0,s.removals[u]&&delete s.removals[u],i()},l=function(m){var u=m.descriptor;s.removals[u.id]=!0,s.modified[u.droppableId]=!0,s.additions[u.id]&&delete s.additions[u.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,s=Yi())};return{add:o,remove:l,stop:c}}var xp=function(e){var t=e.scrollHeight,r=e.scrollWidth,s=e.height,a=e.width,i=ut({x:r,y:t},{x:a,y:s}),o={x:Math.max(0,i.x),y:Math.max(0,i.y)};return o},bp=function(){var e=document.documentElement;return e||H(),e},yp=function(){var e=bp(),t=xp({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},Lj=function(){var e=vp(),t=yp(),r=e.y,s=e.x,a=bp(),i=a.clientWidth,o=a.clientHeight,l=s+i,c=r+o,d=_t({top:r,left:s,right:l,bottom:c}),m={frame:d,scroll:{initial:e,current:e,max:t,diff:{value:Ge,displacement:Ge}}};return m},Bj=function(e){var t=e.critical,r=e.scrollOptions,s=e.registry,a=Lj(),i=a.scroll.current,o=t.droppable,l=s.droppable.getAllByType(o.type).map(function(u){return u.callbacks.getDimensionAndWatchScroll(i,r)}),c=s.draggable.getAllByType(t.draggable.type).map(function(u){return u.getDimension(i)}),d={draggables:Yf(c),droppables:Kf(l)},m={dimensions:d,critical:t,viewport:a};return m};function dd(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var s=e.droppable.getById(r.descriptor.droppableId);return s.descriptor.mode==="virtual"}var zj=function(e,t){var r=null,s=Mj({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(p,h){e.droppable.exists(p)||H(),r&&t.updateDroppableIsEnabled({id:p,isEnabled:h})},i=function(p,h){r&&(e.droppable.exists(p)||H(),t.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:h}))},o=function(p,h){r&&(e.droppable.exists(p)||H(),t.updateDroppableScroll({id:p,newScroll:h}))},l=function(p,h){r&&e.droppable.getById(p).callbacks.scroll(h)},c=function(){if(r){s.stop();var p=r.critical.droppable;e.droppable.getAllByType(p.type).forEach(function(h){return h.callbacks.dragStopped()}),r.unsubscribe(),r=null}},d=function(p){r||H();var h=r.critical.draggable;p.type==="ADDITION"&&dd(e,h,p.value)&&s.add(p.value),p.type==="REMOVAL"&&dd(e,h,p.value)&&s.remove(p.value)},m=function(p){r&&H();var h=e.draggable.getById(p.draggableId),g=e.droppable.getById(h.descriptor.droppableId),x={draggable:h.descriptor,droppable:g.descriptor},v=e.subscribe(d);return r={critical:x,unsubscribe:v},Bj({critical:x,registry:e,scrollOptions:p.scrollOptions})},u={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:o,startPublishing:m,stopPublishing:c};return u},wp=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},$j=function(e){window.scrollBy(e.x,e.y)},qj=He(function(e){return gi(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),Uj=function(t,r){var s=Lr(qj(r),function(a){return a.frame||H(),ap(a.frame.pageMarginBox)(t)});return s},Hj=function(e){var t=e.center,r=e.destination,s=e.droppables;if(r){var a=s[r];return a.frame?a:null}var i=Uj(t,s);return i},kr={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Gj=function(e,t){var r=e[t.size]*kr.startFromPercentage,s=e[t.size]*kr.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:s};return a},Np=function(e){var t=e.startOfRange,r=e.endOfRange,s=e.current,a=r-t;if(a===0)return 0;var i=s-t,o=i/a;return o},Ul=1,Vj=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return kr.maxPixelScroll;if(e===t.startScrollingFrom)return Ul;var r=Np({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),s=1-r,a=kr.maxPixelScroll*kr.ease(s);return Math.ceil(a)},ud=kr.durationDampening.accelerateAt,md=kr.durationDampening.stopDampeningAt,Wj=function(e,t){var r=t,s=md,a=Date.now(),i=a-r;if(i>=md)return e;if(i<ud)return Ul;var o=Np({startOfRange:ud,endOfRange:s,current:i}),l=e*kr.ease(o);return Math.ceil(l)},fd=function(e){var t=e.distanceToEdge,r=e.thresholds,s=e.dragStartTime,a=e.shouldUseTimeDampening,i=Vj(t,r);return i===0?0:a?Math.max(Wj(i,s),Ul):i},pd=function(e){var t=e.container,r=e.distanceToEdges,s=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,o=Gj(t,a),l=r[a.end]<r[a.start];return l?fd({distanceToEdge:r[a.end],thresholds:o,dragStartTime:s,shouldUseTimeDampening:i}):-1*fd({distanceToEdge:r[a.start],thresholds:o,dragStartTime:s,shouldUseTimeDampening:i})},Kj=function(e){var t=e.container,r=e.subject,s=e.proposedScroll,a=r.height>t.height,i=r.width>t.width;return!i&&!a?s:i&&a?null:{x:i?0:s.x,y:a?0:s.y}},Yj=Vf(function(e){return e===0?0:e}),jp=function(e){var t=e.dragStartTime,r=e.container,s=e.subject,a=e.center,i=e.shouldUseTimeDampening,o={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},l=pd({container:r,distanceToEdges:o,dragStartTime:t,axis:Ol,shouldUseTimeDampening:i}),c=pd({container:r,distanceToEdges:o,dragStartTime:t,axis:Jf,shouldUseTimeDampening:i}),d=Yj({x:c,y:l});if(Tr(d,Ge))return null;var m=Kj({container:r,subject:s,proposedScroll:d});return m?Tr(m,Ge)?null:m:null},Qj=Vf(function(e){return e===0?0:e>0?1:-1}),Hl=function(){var e=function(r,s){return r<0?r:r>s?r-s:0};return function(t){var r=t.current,s=t.max,a=t.change,i=Ye(r,a),o={x:e(i.x,s.x),y:e(i.y,s.y)};return Tr(o,Ge)?null:o}}(),Sp=function(t){var r=t.max,s=t.current,a=t.change,i={x:Math.max(s.x,r.x),y:Math.max(s.y,r.y)},o=Qj(a),l=Hl({max:i,current:s,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},Gl=function(t,r){return Sp({current:t.scroll.current,max:t.scroll.max,change:r})},Zj=function(t,r){if(!Gl(t,r))return null;var s=t.scroll.max,a=t.scroll.current;return Hl({current:a,max:s,change:r})},Vl=function(t,r){var s=t.frame;return s?Sp({current:s.scroll.current,max:s.scroll.max,change:r}):!1},Jj=function(t,r){var s=t.frame;return!s||!Vl(t,r)?null:Hl({current:s.scroll.current,max:s.scroll.max,change:r})},Xj=function(e){var t=e.viewport,r=e.subject,s=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=jp({dragStartTime:a,container:t.frame,subject:r,center:s,shouldUseTimeDampening:i});return o&&Gl(t,o)?o:null},eS=function(e){var t=e.droppable,r=e.subject,s=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var l=jp({dragStartTime:a,container:o.pageMarginBox,subject:r,center:s,shouldUseTimeDampening:i});return l&&Vl(t,l)?l:null},hd=function(e){var t=e.state,r=e.dragStartTime,s=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,o=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id],c=l.page.marginBox;if(t.isWindowScrollAllowed){var d=t.viewport,m=Xj({dragStartTime:r,viewport:d,subject:c,center:o,shouldUseTimeDampening:s});if(m){a(m);return}}var u=Hj({center:o,destination:ft(t.impact),droppables:t.dimensions.droppables});if(u){var f=eS({dragStartTime:r,droppable:u,subject:c,center:o,shouldUseTimeDampening:s});f&&i(u.descriptor.id,f)}},tS=function(e){var t=e.scrollWindow,r=e.scrollDroppable,s=Is(t),a=Is(r),i=null,o=function(m){i||H();var u=i,f=u.shouldUseTimeDampening,p=u.dragStartTime;hd({state:m,scrollWindow:s,scrollDroppable:a,dragStartTime:p,shouldUseTimeDampening:f})},l=function(m){i&&H();var u=Date.now(),f=!1,p=function(){f=!0};hd({state:m,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p}),i={dragStartTime:u,shouldUseTimeDampening:f},f&&o(m)},c=function(){i&&(s.cancel(),a.cancel(),i=null)};return{start:l,stop:c,scroll:o}},rS=function(e){var t=e.move,r=e.scrollDroppable,s=e.scrollWindow,a=function(d,m){var u=Ye(d.current.client.selection,m);t({client:u})},i=function(d,m){if(!Vl(d,m))return m;var u=Jj(d,m);if(!u)return r(d.descriptor.id,m),null;var f=ut(m,u);r(d.descriptor.id,f);var p=ut(m,f);return p},o=function(d,m,u){if(!d||!Gl(m,u))return u;var f=Zj(m,u);if(!f)return s(u),null;var p=ut(u,f);s(p);var h=ut(u,p);return h},l=function(d){var m=d.scrollJumpRequest;if(m){var u=ft(d.impact);u||H();var f=i(d.dimensions.droppables[u],m);if(f){var p=d.viewport,h=o(d.isWindowScrollAllowed,p,f);h&&a(d,h)}}};return l},nS=function(e){var t=e.scrollDroppable,r=e.scrollWindow,s=e.move,a=tS({scrollWindow:r,scrollDroppable:t}),i=rS({move:s,scrollWindow:r,scrollDroppable:t}),o=function(d){if(d.phase==="DRAGGING"){if(d.movementMode==="FLUID"){a.scroll(d);return}d.scrollJumpRequest&&i(d)}},l={scroll:o,start:a.start,stop:a.stop};return l},Bn="data-rbd",zn=function(){var e=Bn+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Oo=function(){var e=Bn+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),sS=function(){var e=Bn+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),gd={contextId:Bn+"-scroll-container-context-id"},aS=function(t){return function(r){return"["+r+'="'+t+'"]'}},os=function(t,r){return t.map(function(s){var a=s.styles[r];return a?s.selector+" { "+a+" }":""}).join(" ")},iS="pointer-events: none;",oS=function(e){var t=aS(e),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(zn.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:iS,dropAnimating:l}}}(),s=function(){var l=`
      transition: `+gs.outOfTheWay+`;
    `;return{selector:t(Oo.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),a={selector:t(sS.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[s,r,a,i];return{always:os(o,"always"),resting:os(o,"resting"),dragging:os(o,"dragging"),dropAnimating:os(o,"dropAnimating"),userCancel:os(o,"userCancel")}},pt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?b.useLayoutEffect:b.useEffect,Qi=function(){var t=document.querySelector("head");return t||H(),t},vd=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function lS(e,t){var r=Ne(function(){return oS(e)},[e]),s=b.useRef(null),a=b.useRef(null),i=X(He(function(u){var f=a.current;f||H(),f.textContent=u}),[]),o=X(function(u){var f=s.current;f||H(),f.textContent=u},[]);pt(function(){!s.current&&!a.current||H();var u=vd(t),f=vd(t);return s.current=u,a.current=f,u.setAttribute(Bn+"-always",e),f.setAttribute(Bn+"-dynamic",e),Qi().appendChild(u),Qi().appendChild(f),o(r.always),i(r.resting),function(){var p=function(g){var x=g.current;x||H(),Qi().removeChild(x),g.current=null};p(s),p(a)}},[t,o,i,r.always,r.resting,e]);var l=X(function(){return i(r.dragging)},[i,r.dragging]),c=X(function(u){if(u==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),d=X(function(){a.current&&i(r.resting)},[i,r.resting]),m=Ne(function(){return{dragging:l,dropping:c,resting:d}},[l,c,d]);return m}var Cp=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function yi(e){return e instanceof Cp(e).HTMLElement}function cS(e,t){var r="["+zn.contextId+'="'+e+'"]',s=Wf(document.querySelectorAll(r));if(!s.length)return null;var a=Lr(s,function(i){return i.getAttribute(zn.draggableId)===t});return!a||!yi(a)?null:a}function dS(e){var t=b.useRef({}),r=b.useRef(null),s=b.useRef(null),a=b.useRef(!1),i=X(function(f,p){var h={id:f,focus:p};return t.current[f]=h,function(){var x=t.current,v=x[f];v!==h&&delete x[f]}},[]),o=X(function(f){var p=cS(e,f);p&&p!==document.activeElement&&p.focus()},[e]),l=X(function(f,p){r.current===f&&(r.current=p)},[]),c=X(function(){s.current||a.current&&(s.current=requestAnimationFrame(function(){s.current=null;var f=r.current;f&&o(f)}))},[o]),d=X(function(f){r.current=null;var p=document.activeElement;p&&p.getAttribute(zn.draggableId)===f&&(r.current=f)},[]);pt(function(){return a.current=!0,function(){a.current=!1;var f=s.current;f&&cancelAnimationFrame(f)}},[]);var m=Ne(function(){return{register:i,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[i,d,c,l]);return m}function uS(){var e={draggables:{},droppables:{}},t=[];function r(u){return t.push(u),function(){var p=t.indexOf(u);p!==-1&&t.splice(p,1)}}function s(u){t.length&&t.forEach(function(f){return f(u)})}function a(u){return e.draggables[u]||null}function i(u){var f=a(u);return f||H(),f}var o={register:function(f){e.draggables[f.descriptor.id]=f,s({type:"ADDITION",value:f})},update:function(f,p){var h=e.draggables[p.descriptor.id];h&&h.uniqueId===f.uniqueId&&(delete e.draggables[p.descriptor.id],e.draggables[f.descriptor.id]=f)},unregister:function(f){var p=f.descriptor.id,h=a(p);h&&f.uniqueId===h.uniqueId&&(delete e.draggables[p],s({type:"REMOVAL",value:f}))},getById:i,findById:a,exists:function(f){return!!a(f)},getAllByType:function(f){return Ma(e.draggables).filter(function(p){return p.descriptor.type===f})}};function l(u){return e.droppables[u]||null}function c(u){var f=l(u);return f||H(),f}var d={register:function(f){e.droppables[f.descriptor.id]=f},unregister:function(f){var p=l(f.descriptor.id);p&&f.uniqueId===p.uniqueId&&delete e.droppables[f.descriptor.id]},getById:c,findById:l,exists:function(f){return!!l(f)},getAllByType:function(f){return Ma(e.droppables).filter(function(p){return p.descriptor.type===f})}};function m(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:d,subscribe:r,clean:m}}function mS(){var e=Ne(uS,[]);return b.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var Wl=$.createContext(null),Ba=function(){var e=document.body;return e||H(),e},fS={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},pS=function(t){return"rbd-announcement-"+t};function hS(e){var t=Ne(function(){return pS(e)},[e]),r=b.useRef(null);b.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),se(i.style,fS),Ba().appendChild(i),function(){setTimeout(function(){var c=Ba();c.contains(i)&&c.removeChild(i),i===r.current&&(r.current=null)})}},[t]);var s=X(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return s}var gS=0,vS={separator:"::"};function Kl(e,t){return t===void 0&&(t=vS),Ne(function(){return""+e+t.separator+gS++},[t.separator,e])}function xS(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function bS(e){var t=e.contextId,r=e.text,s=Kl("hidden-text",{separator:"-"}),a=Ne(function(){return xS({contextId:t,uniqueId:s})},[s,t]);return b.useEffect(function(){var o=document.createElement("div");return o.id=a,o.textContent=r,o.style.display="none",Ba().appendChild(o),function(){var c=Ba();c.contains(o)&&c.removeChild(o)}},[a,r]),a}var wi=$.createContext(null);function Ep(e){var t=b.useRef(e);return b.useEffect(function(){t.current=e}),t}function yS(){var e=null;function t(){return!!e}function r(o){return o===e}function s(o){e&&H();var l={abandon:o};return e=l,l}function a(){e||H(),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:s,release:a,tryAbandon:i}}var wS=9,NS=13,Yl=27,Pp=32,jS=33,SS=34,CS=35,ES=36,PS=37,IS=38,DS=39,TS=40,pa,kS=(pa={},pa[NS]=!0,pa[wS]=!0,pa),Ip=function(e){kS[e.keyCode]&&e.preventDefault()},Ni=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=Lr(t,function(s){return"on"+s in document});return r||e}(),Dp=0,xd=5;function AS(e,t){return Math.abs(t.x-e.x)>=xd||Math.abs(t.y-e.y)>=xd}var bd={type:"IDLE"};function RS(e){var t=e.cancel,r=e.completed,s=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,c=o.clientX,d=o.clientY;if(l===Dp){var m={x:c,y:d},u=s();if(u.type==="DRAGGING"){o.preventDefault(),u.actions.move(m);return}u.type!=="PENDING"&&H();var f=u.point;if(AS(f,m)){o.preventDefault();var p=u.actions.fluidLift(m);a({type:"DRAGGING",actions:p})}}}},{eventName:"mouseup",fn:function(o){var l=s();if(l.type!=="DRAGGING"){t();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){s().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var l=s();if(l.type==="PENDING"){t();return}if(o.keyCode===Yl){o.preventDefault(),t();return}Ip(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){s().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=s();if(l.type==="IDLE"&&H(),l.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:Ni,fn:t}]}function OS(e){var t=b.useRef(bd),r=b.useRef(Dr),s=Ne(function(){return{eventName:"mousedown",fn:function(u){if(!u.defaultPrevented&&u.button===Dp&&!(u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)){var f=e.findClosestDraggableId(u);if(f){var p=e.tryGetLock(f,o,{sourceEvent:u});if(p){u.preventDefault();var h={x:u.clientX,y:u.clientY};r.current(),d(p,h)}}}}}},[e]),a=Ne(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(u){if(!u.defaultPrevented){var f=e.findClosestDraggableId(u);if(f){var p=e.findOptionsForDraggable(f);p&&(p.shouldRespectForcePress||e.canGetLock(f)&&u.preventDefault())}}}}},[e]),i=X(function(){var u={passive:!1,capture:!0};r.current=xt(window,[a,s],u)},[a,s]),o=X(function(){var m=t.current;m.type!=="IDLE"&&(t.current=bd,r.current(),i())},[i]),l=X(function(){var m=t.current;o(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[o]),c=X(function(){var u={capture:!0,passive:!1},f=RS({cancel:l,completed:o,getPhase:function(){return t.current},setPhase:function(h){t.current=h}});r.current=xt(window,f,u)},[l,o]),d=X(function(u,f){t.current.type!=="IDLE"&&H(),t.current={type:"PENDING",point:f,actions:u},c()},[c]);pt(function(){return i(),function(){r.current()}},[i])}var gn;function FS(){}var _S=(gn={},gn[SS]=!0,gn[jS]=!0,gn[ES]=!0,gn[CS]=!0,gn);function MS(e,t){function r(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===Yl){i.preventDefault(),r();return}if(i.keyCode===Pp){i.preventDefault(),s();return}if(i.keyCode===TS){i.preventDefault(),e.moveDown();return}if(i.keyCode===IS){i.preventDefault(),e.moveUp();return}if(i.keyCode===DS){i.preventDefault(),e.moveRight();return}if(i.keyCode===PS){i.preventDefault(),e.moveLeft();return}if(_S[i.keyCode]){i.preventDefault();return}Ip(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Ni,fn:r}]}function LS(e){var t=b.useRef(FS),r=Ne(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==Pp)return;var o=e.findClosestDraggableId(i);if(!o)return;var l=e.tryGetLock(o,m,{sourceEvent:i});if(!l)return;i.preventDefault();var c=!0,d=l.snapLift();t.current();function m(){c||H(),c=!1,t.current(),s()}t.current=xt(window,MS(d,m),{capture:!0,passive:!1})}}},[e]),s=X(function(){var i={passive:!1,capture:!0};t.current=xt(window,[r],i)},[r]);pt(function(){return s(),function(){t.current()}},[s])}var Zi={type:"IDLE"},BS=120,zS=.15;function $S(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.keyCode===Yl&&a.preventDefault(),t()}},{eventName:Ni,fn:t}]}function qS(e){var t=e.cancel,r=e.completed,s=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=s();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var l=i.touches[0],c=l.clientX,d=l.clientY,m={x:c,y:d};i.preventDefault(),o.actions.move(m)}},{eventName:"touchend",fn:function(i){var o=s();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(s().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var o=s();o.type==="IDLE"&&H();var l=i.touches[0];if(l){var c=l.force>=zS;if(c){var d=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){d&&t();return}if(d){if(o.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:Ni,fn:t}]}function US(e){var t=b.useRef(Zi),r=b.useRef(Dr),s=X(function(){return t.current},[]),a=X(function(p){t.current=p},[]),i=Ne(function(){return{eventName:"touchstart",fn:function(p){if(!p.defaultPrevented){var h=e.findClosestDraggableId(p);if(h){var g=e.tryGetLock(h,l,{sourceEvent:p});if(g){var x=p.touches[0],v=x.clientX,y=x.clientY,w={x:v,y};r.current(),u(g,w)}}}}}},[e]),o=X(function(){var p={capture:!0,passive:!1};r.current=xt(window,[i],p)},[i]),l=X(function(){var f=t.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),a(Zi),r.current(),o())},[o,a]),c=X(function(){var f=t.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),d=X(function(){var p={capture:!0,passive:!1},h={cancel:c,completed:l,getPhase:s},g=xt(window,qS(h),p),x=xt(window,$S(h),p);r.current=function(){g(),x()}},[c,s,l]),m=X(function(){var p=s();p.type!=="PENDING"&&H();var h=p.actions.fluidLift(p.point);a({type:"DRAGGING",actions:h,hasMoved:!1})},[s,a]),u=X(function(p,h){s().type!=="IDLE"&&H();var g=setTimeout(m,BS);a({type:"PENDING",point:h,actions:p,longPressTimerId:g}),d()},[d,s,a,m]);pt(function(){return o(),function(){r.current();var h=s();h.type==="PENDING"&&(clearTimeout(h.longPressTimerId),a(Zi))}},[s,o,a]),pt(function(){var p=xt(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return p},[])}var HS={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Tp(e,t){if(t==null)return!1;var r=!!HS[t.tagName.toLowerCase()];if(r)return!0;var s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:Tp(e,t.parentElement)}function GS(e,t){var r=t.target;return yi(r)?Tp(e,r):!1}var VS=function(e){return _t(e.getBoundingClientRect()).center};function WS(e){return e instanceof Cp(e).Element}var KS=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=Lr(t,function(s){return s in Element.prototype});return r||e}();function kp(e,t){return e==null?null:e[KS](t)?e:kp(e.parentElement,t)}function YS(e,t){return e.closest?e.closest(t):kp(e,t)}function QS(e){return"["+zn.contextId+'="'+e+'"]'}function ZS(e,t){var r=t.target;if(!WS(r))return null;var s=QS(e),a=YS(r,s);return!a||!yi(a)?null:a}function JS(e,t){var r=ZS(e,t);return r?r.getAttribute(zn.draggableId):null}function XS(e,t){var r="["+Oo.contextId+'="'+e+'"]',s=Wf(document.querySelectorAll(r)),a=Lr(s,function(i){return i.getAttribute(Oo.id)===t});return!a||!yi(a)?null:a}function e1(e){e.preventDefault()}function ha(e){var t=e.expected,r=e.phase,s=e.isLockActive;return e.shouldWarn,!(!s()||t!==r)}function Ap(e){var t=e.lockAPI,r=e.store,s=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var i=s.draggable.findById(a);return!(!i||!i.options.isEnabled||!wp(r.getState(),a))}function t1(e){var t=e.lockAPI,r=e.contextId,s=e.store,a=e.registry,i=e.draggableId,o=e.forceSensorStop,l=e.sourceEvent,c=Ap({lockAPI:t,store:s,registry:a,draggableId:i});if(!c)return null;var d=a.draggable.getById(i),m=XS(r,d.descriptor.id);if(!m||l&&!d.options.canDragInteractiveElements&&GS(m,l))return null;var u=t.claim(o||Dr),f="PRE_DRAG";function p(){return d.options.shouldRespectForcePress}function h(){return t.isActive(u)}function g(C,P){ha({expected:C,phase:f,isLockActive:h,shouldWarn:!0})&&s.dispatch(P())}var x=g.bind(null,"DRAGGING");function v(C){function P(){t.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(P(),f!=="PRE_DRAG"&&H()),s.dispatch(KN(C.liftActionArgs)),f="DRAGGING";function S(D,A){if(A===void 0&&(A={shouldBlockNextClick:!1}),C.cleanup(),A.shouldBlockNextClick){var R=xt(window,[{eventName:"click",fn:e1,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(R)}P(),s.dispatch(pp({reason:D}))}return se({isActive:function(){return ha({expected:"DRAGGING",phase:f,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(A){return S("DROP",A)},cancel:function(A){return S("CANCEL",A)}},C.actions)}function y(C){var P=Is(function(D){x(function(){return fp({client:D})})}),S=v({liftActionArgs:{id:i,clientSelection:C,movementMode:"FLUID"},cleanup:function(){return P.cancel()},actions:{move:P}});return se({},S,{move:P})}function w(){var C={moveUp:function(){return x(nj)},moveRight:function(){return x(aj)},moveDown:function(){return x(sj)},moveLeft:function(){return x(ij)}};return v({liftActionArgs:{id:i,clientSelection:VS(m),movementMode:"SNAP"},cleanup:Dr,actions:C})}function N(){var C=ha({expected:"PRE_DRAG",phase:f,isLockActive:h,shouldWarn:!0});C&&t.release()}var j={isActive:function(){return ha({expected:"PRE_DRAG",phase:f,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:y,snapLift:w,abort:N};return j}var r1=[OS,LS,US];function n1(e){var t=e.contextId,r=e.store,s=e.registry,a=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?r1:[],a||[]),l=b.useState(function(){return yS()})[0],c=X(function(y,w){y.isDragging&&!w.isDragging&&l.tryAbandon()},[l]);pt(function(){var y=r.getState(),w=r.subscribe(function(){var N=r.getState();c(y,N),y=N});return w},[l,r,c]),pt(function(){return l.tryAbandon},[l.tryAbandon]);for(var d=X(function(v){return Ap({lockAPI:l,registry:s,store:r,draggableId:v})},[l,s,r]),m=X(function(v,y,w){return t1({lockAPI:l,registry:s,contextId:t,store:r,draggableId:v,forceSensorStop:y,sourceEvent:w&&w.sourceEvent?w.sourceEvent:null})},[t,l,s,r]),u=X(function(v){return JS(t,v)},[t]),f=X(function(v){var y=s.draggable.findById(v);return y?y.options:null},[s.draggable]),p=X(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(Bl()))},[l,r]),h=X(l.isClaimed,[l]),g=Ne(function(){return{canGetLock:d,tryGetLock:m,findClosestDraggableId:u,findOptionsForDraggable:f,tryReleaseLock:p,isLockClaimed:h}},[d,m,u,f,p,h]),x=0;x<o.length;x++)o[x](g)}var s1=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function ls(e){return e.current||H(),e.current}function a1(e){var t=e.contextId,r=e.setCallbacks,s=e.sensors,a=e.nonce,i=e.dragHandleUsageInstructions,o=b.useRef(null),l=Ep(e),c=X(function(){return s1(l.current)},[l]),d=hS(t),m=bS({contextId:t,text:i}),u=lS(t,a),f=X(function(D){ls(o).dispatch(D)},[]),p=Ne(function(){return qc({publishWhileDragging:QN,updateDroppableScroll:JN,updateDroppableIsEnabled:XN,updateDroppableIsCombineEnabled:ej,collectionStarting:ZN},f)},[f]),h=mS(),g=Ne(function(){return zj(h,p)},[h,p]),x=Ne(function(){return nS(se({scrollWindow:$j,scrollDroppable:g.scrollDroppable},qc({move:fp},f)))},[g.scrollDroppable,f]),v=dS(t),y=Ne(function(){return _j({announce:d,autoScroller:x,dimensionMarshal:g,focusMarshal:v,getResponders:c,styleMarshal:u})},[d,x,g,v,c,u]);o.current=y;var w=X(function(){var D=ls(o),A=D.getState();A.phase!=="IDLE"&&D.dispatch(Bl())},[]),N=X(function(){var D=ls(o).getState();return D.isDragging||D.phase==="DROP_ANIMATING"},[]),j=Ne(function(){return{isDragging:N,tryAbort:w}},[N,w]);r(j);var C=X(function(D){return wp(ls(o).getState(),D)},[]),P=X(function(){return Hr(ls(o).getState())},[]),S=Ne(function(){return{marshal:g,focus:v,contextId:t,canLift:C,isMovementAllowed:P,dragHandleUsageInstructionsId:m,registry:h}},[t,g,m,v,C,P,h]);return n1({contextId:t,store:y,registry:h,customSensors:s,enableDefaultSensors:e.enableDefaultSensors!==!1}),b.useEffect(function(){return w},[w]),$.createElement(wi.Provider,{value:S},$.createElement(P0,{context:Wl,store:y},e.children))}var i1=0;function o1(){return Ne(function(){return""+i1++},[])}function l1(e){var t=o1(),r=e.dragHandleUsageInstructions||Na.dragHandleUsageInstructions;return $.createElement(Lw,null,function(s){return $.createElement(a1,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Rp=function(t){return function(r){return t===r}},c1=Rp("scroll"),d1=Rp("auto"),yd=function(t,r){return r(t.overflowX)||r(t.overflowY)},u1=function(t){var r=window.getComputedStyle(t),s={overflowX:r.overflowX,overflowY:r.overflowY};return yd(s,c1)||yd(s,d1)},m1=function(){return!1},f1=function e(t){return t==null?null:t===document.body?m1()?t:null:t===document.documentElement?null:u1(t)?t:e(t.parentElement)},Fo=function(e){return{x:e.scrollLeft,y:e.scrollTop}},p1=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},h1=function(e){var t=f1(e),r=p1(e);return{closestScrollable:t,isFixedOnPage:r}},g1=function(e){var t=e.descriptor,r=e.isEnabled,s=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,o=e.client,l=e.page,c=e.closest,d=function(){if(!c)return null;var p=c.scrollSize,h=c.client,g=xp({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:h.paddingBox.height,width:h.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:h,scrollSize:p,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:g,diff:{value:Ge,displacement:Ge}}}}(),m=i==="vertical"?Ol:Jf,u=Ln({page:l,withPlaceholder:null,axis:m,frame:d}),f={descriptor:t,isCombineEnabled:s,isFixedOnPage:a,axis:m,isEnabled:r,client:o,page:l,frame:d,subject:u};return f},v1=function(t,r){var s=qf(t);if(!r||t!==r)return s;var a=s.paddingBox.top-r.scrollTop,i=s.paddingBox.left-r.scrollLeft,o=a+r.scrollHeight,l=i+r.scrollWidth,c={top:a,right:l,bottom:o,left:i},d=Dl(c,s.border),m=Tl({borderBox:d,margin:s.margin,border:s.border,padding:s.padding});return m},x1=function(e){var t=e.ref,r=e.descriptor,s=e.env,a=e.windowScroll,i=e.direction,o=e.isDropDisabled,l=e.isCombineEnabled,c=e.shouldClipSubject,d=s.closestScrollable,m=v1(t,d),u=Oa(m,a),f=function(){if(!d)return null;var h=qf(d),g={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:h,page:Oa(h,a),scroll:Fo(d),scrollSize:g,shouldClipSubject:c}}(),p=g1({descriptor:r,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:s.isFixedOnPage,direction:i,client:m,page:u,closest:f});return p},b1={passive:!1},y1={passive:!0},wd=function(e){return e.shouldPublishImmediately?b1:y1};function za(e){var t=b.useContext(e);return t||H(),t}var ga=function(t){return t&&t.env.closestScrollable||null};function w1(e){var t=b.useRef(null),r=za(wi),s=Kl("droppable"),a=r.registry,i=r.marshal,o=Ep(e),l=Ne(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=b.useRef(l),d=Ne(function(){return He(function(N,j){t.current||H();var C={x:N,y:j};i.updateDroppableScroll(l.id,C)})},[l.id,i]),m=X(function(){var N=t.current;return!N||!N.env.closestScrollable?Ge:Fo(N.env.closestScrollable)},[]),u=X(function(){var N=m();d(N.x,N.y)},[m,d]),f=Ne(function(){return Is(u)},[u]),p=X(function(){var N=t.current,j=ga(N);N&&j||H();var C=N.scrollOptions;if(C.shouldPublishImmediately){u();return}f()},[f,u]),h=X(function(N,j){t.current&&H();var C=o.current,P=C.getDroppableRef();P||H();var S=h1(P),D={ref:P,descriptor:l,env:S,scrollOptions:j};t.current=D;var A=x1({ref:P,descriptor:l,env:S,windowScroll:N,direction:C.direction,isDropDisabled:C.isDropDisabled,isCombineEnabled:C.isCombineEnabled,shouldClipSubject:!C.ignoreContainerClipping}),R=S.closestScrollable;return R&&(R.setAttribute(gd.contextId,r.contextId),R.addEventListener("scroll",p,wd(D.scrollOptions))),A},[r.contextId,l,p,o]),g=X(function(){var N=t.current,j=ga(N);return N&&j||H(),Fo(j)},[]),x=X(function(){var N=t.current;N||H();var j=ga(N);t.current=null,j&&(f.cancel(),j.removeAttribute(gd.contextId),j.removeEventListener("scroll",p,wd(N.scrollOptions)))},[p,f]),v=X(function(N){var j=t.current;j||H();var C=ga(j);C||H(),C.scrollTop+=N.y,C.scrollLeft+=N.x},[]),y=Ne(function(){return{getDimensionAndWatchScroll:h,getScrollWhileDragging:g,dragStopped:x,scroll:v}},[x,h,g,v]),w=Ne(function(){return{uniqueId:s,descriptor:l,callbacks:y}},[y,l,s]);pt(function(){return c.current=w.descriptor,a.droppable.register(w),function(){t.current&&x(),a.droppable.unregister(w)}},[y,l,x,w,i,a.droppable]),pt(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),pt(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function Ji(){}var Nd={width:0,height:0,margin:Hw},N1=function(t){var r=t.isAnimatingOpenOnMount,s=t.placeholder,a=t.animate;return r||a==="close"?Nd:{height:s.client.borderBox.height,width:s.client.borderBox.width,margin:s.client.margin}},j1=function(t){var r=t.isAnimatingOpenOnMount,s=t.placeholder,a=t.animate,i=N1({isAnimatingOpenOnMount:r,placeholder:s,animate:a});return{display:s.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?gs.placeholder:null}};function S1(e){var t=b.useRef(null),r=X(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),s=e.animate,a=e.onTransitionEnd,i=e.onClose,o=e.contextId,l=b.useState(e.animate==="open"),c=l[0],d=l[1];b.useEffect(function(){return c?s!=="open"?(r(),d(!1),Ji):t.current?Ji:(t.current=setTimeout(function(){t.current=null,d(!1)}),r):Ji},[s,c,r]);var m=X(function(f){f.propertyName==="height"&&(a(),s==="close"&&i())},[s,i,a]),u=j1({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return $.createElement(e.placeholder.tagName,{style:u,"data-rbd-placeholder-context-id":o,onTransitionEnd:m,ref:e.innerRef})}var C1=$.memo(S1),Ql=$.createContext(null),E1=function(e){wf(t,e);function t(){for(var s,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return s=e.call.apply(e,[this].concat(i))||this,s.state={isVisible:!!s.props.on,data:s.props.on,animate:s.props.shouldAnimate&&s.props.on?"open":"none"},s.onClose=function(){s.state.animate==="close"&&s.setState({isVisible:!1})},s}t.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},t}($.PureComponent),jd={dragging:5e3,dropAnimating:4500},P1=function(t,r){return r?gs.drop(r.duration):t?gs.snap:gs.fluid},I1=function(t,r){return t?r?As.opacity.drop:As.opacity.combining:null},D1=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function T1(e){var t=e.dimension,r=t.client,s=e.offset,a=e.combineWith,i=e.dropping,o=!!a,l=D1(e),c=!!i,d=c?Ao.drop(s,o):Ao.moveTo(s),m={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:P1(l,i),transform:d,opacity:I1(o,c),zIndex:c?jd.dropAnimating:jd.dragging,pointerEvents:"none"};return m}function k1(e){return{transform:Ao.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function A1(e){return e.type==="DRAGGING"?T1(e):k1(e)}function R1(e,t,r){r===void 0&&(r=Ge);var s=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=$f(a,s),o=Oa(i,r),l={client:i,tagName:t.tagName.toLowerCase(),display:s.display},c={x:i.marginBox.width,y:i.marginBox.height},d={descriptor:e,placeholder:l,displaceBy:c,client:i,page:o};return d}function O1(e){var t=Kl("draggable"),r=e.descriptor,s=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,l=e.isEnabled,c=Ne(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}},[i,l,o]),d=X(function(p){var h=a();return h||H(),R1(r,h,p)},[r,a]),m=Ne(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:d}},[r,d,c,t]),u=b.useRef(m),f=b.useRef(!0);pt(function(){return s.draggable.register(u.current),function(){return s.draggable.unregister(u.current)}},[s.draggable]),pt(function(){if(f.current){f.current=!1;return}var p=u.current;u.current=m,s.draggable.update(m,p)},[m,s.draggable])}function F1(e){e.preventDefault()}function _1(e){var t=b.useRef(null),r=X(function(D){t.current=D},[]),s=X(function(){return t.current},[]),a=za(wi),i=a.contextId,o=a.dragHandleUsageInstructionsId,l=a.registry,c=za(Ql),d=c.type,m=c.droppableId,u=Ne(function(){return{id:e.draggableId,index:e.index,type:d,droppableId:m}},[e.draggableId,e.index,d,m]),f=e.children,p=e.draggableId,h=e.isEnabled,g=e.shouldRespectForcePress,x=e.canDragInteractiveElements,v=e.isClone,y=e.mapped,w=e.dropAnimationFinished;if(!v){var N=Ne(function(){return{descriptor:u,registry:l,getDraggableRef:s,canDragInteractiveElements:x,shouldRespectForcePress:g,isEnabled:h}},[u,l,s,x,g,h]);O1(N)}var j=Ne(function(){return h?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:F1}:null},[i,o,p,h]),C=X(function(D){y.type==="DRAGGING"&&y.dropping&&D.propertyName==="transform"&&w()},[w,y]),P=Ne(function(){var D=A1(y),A=y.type==="DRAGGING"&&y.dropping?C:null,R={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":p,style:D,onTransitionEnd:A},dragHandleProps:j};return R},[i,j,p,y,C,r]),S=Ne(function(){return{draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}},[u.droppableId,u.id,u.index,u.type]);return f(P,y.snapshot,S)}var Op=function(e,t){return e===t},Fp=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},M1=function(t){return t.combine?t.combine.draggableId:null},L1=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function B1(){var e=He(function(a,i){return{x:a,y:i}}),t=He(function(a,i,o,l,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:o,combineWith:l,combineTargetFor:null}}),r=He(function(a,i,o,l,c,d,m){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:i,offset:a,dimension:o,forceShouldAnimate:m,snapshot:t(i,l,c,d,null)}}}),s=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var l=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],d=ft(i.impact),m=L1(i.impact),u=i.forceShouldAnimate;return r(e(l.x,l.y),i.movementMode,c,o.isClone,d,m,u)}if(i.phase==="DROP_ANIMATING"){var f=i.completed;if(f.result.draggableId!==o.draggableId)return null;var p=o.isClone,h=i.dimensions.draggables[o.draggableId],g=f.result,x=g.mode,v=Fp(g),y=M1(g),w=i.dropDuration,N={duration:w,curve:$l.drop,moveTo:i.newHomeClientOffset,opacity:y?As.opacity.drop:null,scale:y?As.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:h,dropping:N,draggingOver:v,combineWith:y,mode:x,forceShouldAnimate:null,snapshot:t(x,p,v,y,N)}}}return null};return s}function _p(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var z1={mapped:{type:"SECONDARY",offset:Ge,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:_p(null)}};function $1(){var e=He(function(o,l){return{x:o,y:l}}),t=He(_p),r=He(function(o,l,c){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}}}),s=function(l){return l?r(Ge,l,!0):null},a=function(l,c,d,m){var u=d.displaced.visible[l],f=!!(m.inVirtualList&&m.effected[l]),p=vi(d),h=p&&p.draggableId===l?c:null;if(!u){if(!f)return s(h);if(d.displaced.invisible[l])return null;var g=Zn(m.displacedBy.point),x=e(g.x,g.y);return r(x,h,!0)}if(f)return s(h);var v=d.displacedBy.point,y=e(v.x,v.y);return r(y,h,u.shouldAnimate)},i=function(l,c){if(l.isDragging)return l.critical.draggable.id===c.draggableId?null:a(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var d=l.completed;return d.result.draggableId===c.draggableId?null:a(c.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null};return i}var q1=function(){var t=B1(),r=$1(),s=function(i,o){return t(i,o)||r(i,o)||z1};return s},U1={dropAnimationFinished:hp},H1=Bf(q1,U1,null,{context:Wl,pure:!0,areStatePropsEqual:Op})(_1);function Mp(e){var t=za(Ql),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:$.createElement(H1,e)}function G1(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return $.createElement(Mp,se({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:s}))}function V1(e){var t=b.useContext(wi);t||H();var r=t.contextId,s=t.isMovementAllowed,a=b.useRef(null),i=b.useRef(null),o=e.children,l=e.droppableId,c=e.type,d=e.mode,m=e.direction,u=e.ignoreContainerClipping,f=e.isDropDisabled,p=e.isCombineEnabled,h=e.snapshot,g=e.useClone,x=e.updateViewportMaxScroll,v=e.getContainerForClone,y=X(function(){return a.current},[]),w=X(function(R){a.current=R},[]);X(function(){return i.current},[]);var N=X(function(R){i.current=R},[]),j=X(function(){s()&&x({maxScroll:yp()})},[s,x]);w1({droppableId:l,type:c,mode:d,direction:m,isDropDisabled:f,isCombineEnabled:p,ignoreContainerClipping:u,getDroppableRef:y});var C=$.createElement(E1,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(R){var E=R.onClose,k=R.data,T=R.animate;return $.createElement(C1,{placeholder:k,onClose:E,innerRef:N,animate:T,contextId:r,onTransitionEnd:j})}),P=Ne(function(){return{innerRef:w,placeholder:C,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,C,w]),S=g?g.dragging.draggableId:null,D=Ne(function(){return{droppableId:l,type:c,isUsingCloneFor:S}},[l,S,c]);function A(){if(!g)return null;var R=g.dragging,E=g.render,k=$.createElement(Mp,{draggableId:R.draggableId,index:R.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(T,_){return E(T,_,R)});return Zd.createPortal(k,v())}return $.createElement(Ql.Provider,{value:D},o(P,h),A())}var Xi=function(t,r){return t===r.droppable.type},Sd=function(t,r){return r.draggables[t.draggable.id]},W1=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=se({},t,{shouldAnimatePlaceholder:!1}),s=He(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),a=He(function(o,l,c,d,m,u){var f=m.descriptor.id,p=m.descriptor.droppableId===o;if(p){var h=u?{render:u,dragging:s(m.descriptor)}:null,g={isDraggingOver:c,draggingOverWith:c?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:m.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:h}}if(!l)return r;if(!d)return t;var x={isDraggingOver:c,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:m.placeholder,shouldAnimatePlaceholder:!0,snapshot:x,useClone:null}}),i=function(l,c){var d=c.droppableId,m=c.type,u=!c.isDropDisabled,f=c.renderClone;if(l.isDragging){var p=l.critical;if(!Xi(m,p))return r;var h=Sd(p,l.dimensions),g=ft(l.impact)===d;return a(d,u,g,g,h,f)}if(l.phase==="DROP_ANIMATING"){var x=l.completed;if(!Xi(m,x.critical))return r;var v=Sd(x.critical,l.dimensions);return a(d,u,Fp(x.result)===d,ft(x.impact)===d,v,f)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var y=l.completed;if(!Xi(m,y.critical))return r;var w=ft(y.impact)===d,N=!!(y.impact.at&&y.impact.at.type==="COMBINE"),j=y.critical.droppable.id===d;return w?N?t:r:j?t:r}return r};return i},K1={updateViewportMaxScroll:rj};function Y1(){return document.body||H(),document.body}var Q1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Y1},Lp=Bf(W1,K1,null,{context:Wl,pure:!0,areStatePropsEqual:Op})(V1);Lp.defaultProps=Q1;const Z1=({onImagesSelected:e,onImagesWithLabelsSelected:t,buttonLabel:r="Upload Images",className:s,bucketName:a="gallery",folderPath:i,acceptedFileTypes:o="image/*",maxFileSize:l=10*1024*1024,maxFiles:c=10,currentImages:d=[],currentImagesWithLabels:m=[],enableLabels:u=!1})=>{const[f,p]=b.useState(!1),[h,g]=b.useState(d),[x,v]=b.useState(m),[y,w]=b.useState(null),[N,j]=b.useState({}),C=b.useRef(null),{toast:P}=Ee();$.useEffect(()=>{u?v(m):g(d)},[d,m,u]);const S=async k=>{const T=k.target.files;if(!T||T.length===0)return;const _=Array.from(T),M=u?x.length:h.length;if(M+_.length>c){P({title:"Too many files",description:`Maximum ${c} images allowed. You currently have ${M} images.`,variant:"destructive"});return}for(const O of _)if(O.size>l){const F=Math.round(l/1048576);P({title:"File too large",description:`${O.name} exceeds ${F}MB limit`,variant:"destructive"});return}await D(_)},D=async k=>{p(!0),w(null),j({}),console.log(`Starting upload for ${k.length} file(s)`);try{const T=[];for(let _=0;_<k.length;_++){const M=k[_],O=`${M.name}-${_}`;j(q=>({...q,[O]:0}));const F=M.name.split(".").pop(),B=Date.now(),W=Math.random().toString(36).substring(2,15),K=`${B}-${W}-${_}.${F}`,G=i?`${i}/${K}`:K;if(console.log(`Uploading file ${_+1}/${k.length}:`,G),_===0){const{data:q,error:ne}=await L.storage.listBuckets();if(!ne&&q&&!q.find(J=>J.name===a)){console.log(`Bucket ${a} not found. Creating...`);const{error:J}=await L.storage.createBucket(a,{public:!0,fileSizeLimit:52428800});J&&console.warn("Could not create bucket:",J)}}j(q=>({...q,[O]:50}));const{data:ee,error:Q}=await L.storage.from(a).upload(G,M,{cacheControl:"3600",upsert:!0});if(Q)throw console.error(`Upload error for file ${M.name}:`,Q),new Error(`Failed to upload ${M.name}: ${Q.message}`);if(!ee)throw new Error(`No data returned from upload for ${M.name}`);const{data:me}=L.storage.from(a).getPublicUrl(G),Ie=me.publicUrl;T.push(Ie),j(q=>({...q,[O]:100})),console.log(`File ${_+1}/${k.length} uploaded successfully:`,Ie)}if(u){const _=[...x,...T.map(M=>({url:M,label:""}))];v(_),t&&t(_)}else{const _=[...h,...T];g(_),e(_)}P({title:`${k.length} image${k.length>1?"s":""} uploaded`,description:`Successfully uploaded ${k.length} image${k.length>1?"s":""}`})}catch(T){console.error("Error uploading files:",T),w(T.message||"Upload failed"),P({title:"Upload failed",description:T.message||"There was an error uploading your files. Please try again.",variant:"destructive"})}finally{p(!1),j({})}},A=k=>{if(u){const T=x.filter((_,M)=>M!==k);v(T),t&&t(T)}else{const T=h.filter((_,M)=>M!==k);g(T),e(T)}},R=(k,T)=>{if(!u)return;const _=[...x];_[k]={..._[k],label:T},v(_),t&&t(_)},E=()=>{C.current&&C.current.click()};return n.jsxs("div",{className:`space-y-4 ${s||""}`,children:[n.jsx("input",{ref:C,type:"file",accept:o,onChange:S,multiple:!0,className:"hidden"}),n.jsx(z,{type:"button",onClick:E,disabled:f||(u?x.length:h.length)>=c,className:"w-full",variant:"outline",children:f?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ar,{className:"mr-2 h-4 w-4"}),r," (",u?x.length:h.length,"/",c,")"]})}),f&&Object.keys(N).length>0&&n.jsx("div",{className:"space-y-2",children:Object.entries(N).map(([k,T])=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${T}%`}})}),n.jsxs("span",{className:"text-xs text-gray-500",children:[T,"%"]})]},k))}),y&&n.jsx("p",{className:"text-center text-xs text-red-500",children:y}),(u?x.length>0:h.length>0)&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u?x.map((k,T)=>n.jsxs("div",{className:"relative group border rounded-lg p-3",children:[n.jsxs("div",{className:"relative mb-2",children:[n.jsx("img",{src:k.url,alt:`Preview ${T+1}`,className:"w-full h-24 object-cover rounded-md border",onError:_=>{const M=_.target;M.src="/placeholder.svg"}}),n.jsx(z,{type:"button",onClick:()=>A(T),className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-red-500 hover:bg-red-600 text-white opacity-0 group-hover:opacity-100 transition-opacity",size:"icon",children:n.jsx(Kt,{size:12})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Un,{size:14,className:"text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Label:"})]}),n.jsx(ce,{type:"text",placeholder:"Enter image label...",value:k.label,onChange:_=>R(T,_.target.value),className:"text-sm"})]})]},T)):h.map((k,T)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:k,alt:`Preview ${T+1}`,className:"w-full h-24 object-cover rounded-md border",onError:_=>{const M=_.target;M.src="/placeholder.svg"}}),n.jsx(z,{type:"button",onClick:()=>A(T),className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-red-500 hover:bg-red-600 text-white opacity-0 group-hover:opacity-100 transition-opacity",size:"icon",children:n.jsx(Kt,{size:12})})]},T))})]})},J1=({categoryKey:e,categoryName:t})=>{const[r,s]=b.useState([]),[a,i]=b.useState(!0),[o,l]=b.useState(!1),[c,d]=b.useState(null),{toast:m}=Ee();b.useEffect(()=>{u()},[e]);const u=async()=>{try{i(!0),console.log("[CategoryGallery] Loading images for category:",e);const{data:v,error:y}=await L.from("content_sections").select("content_value").eq("section_key",`category_${e}_images`).single();if(y&&y.code!=="PGRST116")throw console.error("[CategoryGallery] Database error:",y),y;if(v!=null&&v.content_value)try{const w=JSON.parse(v.content_value);console.log("[CategoryGallery] Loaded data:",w);let N=[];Array.isArray(w)&&(w.length>0&&typeof w[0]=="string"?N=w.filter(j=>j&&j.trim()).map((j,C)=>({id:`${C}`,url:j.trim(),order:C,label:""})):N=w.filter(j=>j&&j.url&&j.url.trim()).map((j,C)=>({id:`${C}`,url:j.url.trim(),order:C,label:j.label||""}))),s(N),console.log("[CategoryGallery] Set gallery images:",N)}catch(w){console.error("[CategoryGallery] JSON parse error:",w),s([])}else console.log("[CategoryGallery] No existing images found"),s([])}catch(v){console.error("[CategoryGallery] Error loading images:",v),m({title:"Error",description:`Failed to load gallery images: ${v.message||v}`,variant:"destructive"}),s([])}finally{i(!1)}},f=async v=>{try{l(!0);const y=v.filter(C=>C.url).sort((C,P)=>C.order-P.order).map(C=>({url:C.url,label:C.label||""}));console.log("[CategoryGallery] Saving images with labels:",y);const{data:w,error:N}=await L.from("content_sections").select("id").eq("section_key",`category_${e}_images`).single();if(N&&N.code!=="PGRST116")throw console.error("[CategoryGallery] Error checking existing section:",N),N;let j;if(w?j=await L.from("content_sections").update({content_value:JSON.stringify(y),updated_at:new Date().toISOString()}).eq("section_key",`category_${e}_images`):j=await L.from("content_sections").insert({section_key:`category_${e}_images`,section_name:`Category Images: ${t}`,content_type:"json",content_value:JSON.stringify(y),metadata:{section:"categories"},is_active:!0}),j.error)throw console.error("[CategoryGallery] Database error:",j.error),j.error;console.log("[CategoryGallery] Images saved successfully"),m({title:"Success",description:"Gallery images saved successfully"})}catch(y){console.error("[CategoryGallery] Error saving images:",y),m({title:"Error",description:`Failed to save gallery images: ${y.message||y}`,variant:"destructive"})}finally{l(!1)}},p=async(v,y)=>{if(!v.type.startsWith("image/")){m({title:"Invalid file type",description:"Please select an image file",variant:"destructive"});return}if(v.size>52428800){m({title:"File too large",description:"Please select an image smaller than 50MB",variant:"destructive"});return}d(y);try{const w=v.name.split(".").pop(),N=`category-${e}-${Date.now()}-${Math.random().toString(36).substring(2)}.${w}`,j=`categories/${e}/${N}`,{error:C}=await L.storage.from("admin-uploads").upload(j,v,{cacheControl:"3600",upsert:!1});if(C)throw C;const{data:P}=L.storage.from("admin-uploads").getPublicUrl(j),S=[...r];y<S.length?S[y]={...S[y],url:P.publicUrl}:S.push({id:Date.now().toString(),url:P.publicUrl,order:S.length}),s(S),await f(S),m({title:"Success",description:"Image uploaded successfully"})}catch(w){console.error("Upload error:",w),m({title:"Upload failed",description:"Failed to upload image. Please try again.",variant:"destructive"})}finally{d(null)}},h=()=>{const v={id:Date.now().toString(),url:"",order:r.length};s([...r,v])},g=async v=>{try{console.log("[CategoryGallery] Removing image at index:",v);const y=r.filter((w,N)=>N!==v).map((w,N)=>({...w,order:N,id:N.toString()}));console.log("[CategoryGallery] New images after removal:",y),s(y),await f(y)}catch(y){console.error("[CategoryGallery] Error removing image:",y),m({title:"Error",description:"Failed to remove image",variant:"destructive"})}},x=async v=>{if(v.destination)try{console.log("[CategoryGallery] Reordering images");const y=Array.from(r),[w]=y.splice(v.source.index,1);y.splice(v.destination.index,0,w);const N=y.map((j,C)=>({...j,order:C,id:C.toString()}));console.log("[CategoryGallery] Reordered images:",N),s(N),await f(N)}catch(y){console.error("[CategoryGallery] Error reordering images:",y),m({title:"Error",description:"Failed to reorder images",variant:"destructive"})}};return a?n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{children:[t," Gallery"]})}),n.jsx(oe,{children:n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(ge,{className:"h-8 w-8 animate-spin"})})})]}):n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{className:"flex items-center justify-between",children:[t," Gallery",n.jsxs(z,{onClick:h,size:"sm",children:[n.jsx(Ar,{className:"h-4 w-4 mr-2"}),"Add Image"]})]})}),n.jsxs(oe,{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Multiple Image Upload"}),n.jsx(Z1,{onImagesWithLabelsSelected:v=>{const y=v.map((w,N)=>({id:`${Date.now()}-${N}`,url:w.url,label:w.label,order:N}));s(y),f(y)},currentImagesWithLabels:r.map(v=>({url:v.url,label:v.label||""})),buttonLabel:"Upload Multiple Images with Labels",bucketName:"admin-uploads",folderPath:`categories/${e}`,maxFiles:20,enableLabels:!0,className:"border-2 border-dashed border-gray-300 rounded-lg p-4"})]}),n.jsx("div",{className:"border-t border-gray-200 my-6",children:n.jsx("p",{className:"text-center text-sm text-gray-500 -mt-3 bg-white px-4 inline-block",children:"OR use individual upload slots below"})}),n.jsx(l1,{onDragEnd:x,children:n.jsx(Lp,{droppableId:"gallery-images",children:v=>n.jsxs("div",{...v.droppableProps,ref:v.innerRef,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.map((y,w)=>n.jsx(G1,{draggableId:y.id,index:w,children:N=>n.jsxs("div",{ref:N.innerRef,...N.draggableProps,className:"border rounded-lg p-4 bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{...N.dragHandleProps,children:n.jsx(Eg,{className:"h-4 w-4 text-gray-400"})}),n.jsxs("span",{className:"text-sm text-gray-500",children:["Image ",w+1]}),n.jsx(z,{variant:"destructive",size:"sm",onClick:()=>g(w),children:n.jsx(Hn,{className:"h-4 w-4"})})]}),y.url?n.jsxs("div",{className:"relative mb-2",children:[n.jsx("img",{src:y.url,alt:`${t} ${w+1}`,className:"w-full h-32 object-cover rounded"}),y.label&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1 rounded-b",children:y.label})]}):n.jsx("div",{className:"w-full h-32 bg-gray-100 rounded flex items-center justify-center mb-2",children:n.jsx("span",{className:"text-gray-400",children:"No image"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{type:"file",accept:"image/*",onChange:j=>{var P;const C=(P=j.target.files)==null?void 0:P[0];C&&p(C,w)},disabled:c===w,className:"w-full"}),n.jsx(ce,{type:"text",placeholder:"Image label (optional)",value:y.label||"",onChange:j=>{const C=[...r];C[w]={...C[w],label:j.target.value},s(C),f(C)},className:"w-full text-sm"})]}),c===w&&n.jsxs("div",{className:"flex items-center justify-center mt-2",children:[n.jsx(ge,{className:"h-4 w-4 animate-spin mr-2"}),n.jsx("span",{className:"text-sm",children:"Uploading..."})]})]})},y.id)),v.placeholder]})})}),o&&n.jsxs("div",{className:"flex items-center justify-center mt-4",children:[n.jsx(ge,{className:"h-4 w-4 animate-spin mr-2"}),n.jsx("span",{className:"text-sm",children:"Saving changes..."})]})]})]})},Bp=({labels:e,onChange:t,placeholder:r="Add a label (e.g., lauree, matrimoni, compleanno)",disabled:s=!1})=>{const[a,i]=b.useState(""),o=()=>{const d=a.trim();d&&!e.includes(d)&&(t([...e,d]),i(""))},l=d=>{t(e.filter(m=>m!==d))},c=d=>{d.key==="Enter"&&(d.preventDefault(),o())};return n.jsxs("div",{className:"space-y-3",children:[n.jsxs(Z,{className:"flex items-center gap-2",children:[n.jsx(Un,{className:"w-4 h-4"}),"Labels/Tags"]}),e.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((d,m)=>n.jsxs(Ue,{variant:"secondary",className:"flex items-center gap-1",children:[d,!s&&n.jsx(z,{type:"button",variant:"ghost",size:"sm",className:"h-auto p-0 w-4 h-4 hover:bg-transparent",onClick:()=>l(d),children:n.jsx(Kt,{className:"w-3 h-3"})})]},m))}),!s&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ce,{value:a,onChange:d=>i(d.target.value),onKeyPress:c,placeholder:r,className:"flex-1"}),n.jsx(z,{type:"button",onClick:o,disabled:!a.trim()||e.includes(a.trim()),size:"sm",children:n.jsx(Ar,{className:"w-4 h-4"})})]}),e.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"No labels added yet. Labels help categorize and organize your items."})]})},X1=({categoryKey:e,categoryName:t})=>{const[r,s]=b.useState([]),[a,i]=b.useState(!0),[o,l]=b.useState(!1),{toast:c}=Ee();b.useEffect(()=>{d()},[e]);const d=async()=>{try{i(!0),console.log("[CategoryLabels] Loading labels for category:",e);const{data:u,error:f}=await L.from("categories").select("labels").eq("slug",e).single();if(f&&f.code!=="PGRST116")throw console.error("[CategoryLabels] Database error:",f),f;if(u!=null&&u.labels){const p=Array.isArray(u.labels)?u.labels:[];console.log("[CategoryLabels] Loaded labels:",p),s(p)}else console.log("[CategoryLabels] No existing labels found"),s([])}catch(u){console.error("[CategoryLabels] Error loading labels:",u),c({title:"Error",description:`Failed to load category labels: ${u.message||u}`,variant:"destructive"}),s([])}finally{i(!1)}},m=async()=>{try{l(!0),console.log("[CategoryLabels] Saving labels for category:",e,r);const{error:u}=await L.from("categories").update({labels:r,updated_at:new Date().toISOString()}).eq("slug",e);if(u)throw console.error("[CategoryLabels] Database error:",u),u;console.log("[CategoryLabels] Labels saved successfully"),c({title:"Success",description:"Category labels saved successfully"})}catch(u){console.error("[CategoryLabels] Error saving labels:",u),c({title:"Error",description:`Failed to save category labels: ${u.message||u}`,variant:"destructive"})}finally{l(!1)}};return a?n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{children:[t," Labels"]})}),n.jsx(oe,{children:n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(ge,{className:"h-8 w-8 animate-spin"})})})]}):n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{children:[t," Labels"]})}),n.jsxs(oe,{className:"space-y-4",children:[n.jsx(Bp,{labels:r,onChange:s,placeholder:`Add labels for ${t} (e.g., lauree, matrimoni, compleanno)`,disabled:o}),n.jsx(z,{onClick:m,disabled:o,className:"w-full",children:o?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving Labels..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2 h-4 w-4"}),"Save Labels"]})})]})]})},eC=()=>{const[e,t]=b.useState(!0),[r,s]=b.useState(null),[a,i]=b.useState(!1),[o,l]=b.useState({matrimoni:{explanation:"",features:[]},fiori_piante:{explanation:"",features:[]},fiori_finti:{explanation:"",features:[]},funerali:{explanation:"",features:[]}}),{toast:c}=Ee(),d=[{key:"matrimoni",name:"Matrimoni",title:"Matrimoni"},{key:"fiori_piante",name:"Fiori & Piante",title:"Fiori & Piante"},{key:"fiori_finti",name:"Fiori Finti",title:"Fiori Finti"},{key:"funerali",name:"Funerali",title:"Funerali"}];b.useEffect(()=>{m()},[]);const m=async()=>{try{t(!0),console.log("[CategoriesAdmin] Loading category content...");const{data:v,error:y}=await L.from("content_sections").select("*").contains("metadata",{section:"categories"});if(y)throw console.error("[CategoriesAdmin] Database error:",y),y;console.log("[CategoriesAdmin] Loaded content sections:",v);const w={};d.forEach(N=>{const j=v==null?void 0:v.find(S=>S.section_key===`category_${N.key}_explanation`),C=v==null?void 0:v.find(S=>S.section_key===`category_${N.key}_features`);let P=[];if(C!=null&&C.content_value)try{const S=JSON.parse(C.content_value);P=Array.isArray(S)?S.filter(D=>D&&D.trim()):[]}catch(S){console.error(`[CategoriesAdmin] Error parsing features for ${N.key}:`,S),P=[]}w[N.key]={explanation:(j==null?void 0:j.content_value)||"",features:P},console.log(`[CategoriesAdmin] Content for ${N.key}:`,w[N.key])}),l(w),console.log("[CategoriesAdmin] Category content loaded successfully")}catch(v){console.error("[CategoriesAdmin] Error loading category content:",v),c({title:"Error",description:`Failed to load category content: ${v.message||v}`,variant:"destructive"})}finally{t(!1)}},u=async(v,y)=>{var w;try{s(`${v}_${y}`);const N=o[v];let j;if(y==="explanation")j=N.explanation;else{const R=N.features.filter(E=>E&&E.trim());j=JSON.stringify(R)}console.log(`[CategoriesAdmin] Saving ${y} for ${v}:`,j);const C=`category_${v}_${y}`,P=`${(w=d.find(R=>R.key===v))==null?void 0:w.name} - ${y==="explanation"?"Explanation":"Features"}`,{data:S,error:D}=await L.from("content_sections").select("id").eq("section_key",C).single();if(D&&D.code!=="PGRST116")throw console.error("[CategoriesAdmin] Error checking existing section:",D),D;let A;if(S?A=await L.from("content_sections").update({content_value:j,updated_at:new Date().toISOString()}).eq("section_key",C):A=await L.from("content_sections").insert({section_key:C,section_name:P,content_type:y==="explanation"?"textarea":"json",content_value:j,metadata:{section:"categories"},is_active:!0}),A.error)throw console.error("[CategoriesAdmin] Database error:",A.error),A.error;console.log(`[CategoriesAdmin] ${y} saved successfully for ${v}`),c({title:"Success",description:`${y} saved successfully`})}catch(N){console.error(`[CategoriesAdmin] Error saving ${y}:`,N),c({title:"Error",description:`Failed to save ${y}: ${N.message||N}`,variant:"destructive"})}finally{s(null)}},f=(v,y,w)=>{l(N=>({...N,[v]:{...N[v],[y]:w}}))},p=v=>{const y=[...o[v].features,""];f(v,"features",y)},h=(v,y,w)=>{const N=[...o[v].features];N[y]=w,f(v,"features",N)},g=(v,y)=>{try{console.log(`[CategoriesAdmin] Removing feature at index ${y} for ${v}`);const N=o[v].features.filter((j,C)=>C!==y);console.log("[CategoriesAdmin] Features after removal:",N),f(v,"features",N)}catch(w){console.error("[CategoriesAdmin] Error removing feature:",w),c({title:"Error",description:"Failed to remove feature",variant:"destructive"})}},x=async()=>{i(!0);try{await ni()?(c({title:"Success",description:"Database initialized successfully"}),await m()):c({title:"Error",description:"Failed to initialize database",variant:"destructive"})}catch(v){console.error("Error initializing database:",v),c({title:"Error",description:"Failed to initialize database",variant:"destructive"})}finally{i(!1)}};return e?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(ge,{className:"h-8 w-8 animate-spin"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Categories Gallery Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage gallery images, descriptions, and features for each category"})]}),n.jsx(z,{onClick:x,disabled:a,variant:"outline",children:a?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Initializing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(en,{className:"mr-2 h-4 w-4"}),"Initialize Database"]})})]})}),n.jsxs(Us,{defaultValue:"matrimoni",className:"space-y-6",children:[n.jsx(cn,{className:"grid w-full grid-cols-4",children:d.map(v=>n.jsx(we,{value:v.key,children:v.title},v.key))}),d.map(v=>{var y,w;return n.jsxs(Fe,{value:v.key,className:"space-y-6",children:[n.jsx(J1,{categoryKey:v.key,categoryName:v.name}),n.jsx(X1,{categoryKey:v.key,categoryName:v.name}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsx(be,{children:"Description"})}),n.jsxs(oe,{className:"space-y-4",children:[n.jsx(Qt,{value:((y=o[v.key])==null?void 0:y.explanation)||"",onChange:N=>f(v.key,"explanation",N.target.value),rows:6,placeholder:"Enter category description...",className:"min-h-[150px]"}),n.jsx(z,{onClick:()=>u(v.key,"explanation"),disabled:r===`${v.key}_explanation`,className:"w-full",children:r===`${v.key}_explanation`?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2 h-4 w-4"}),"Save Description"]})})]})]}),n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsx(be,{children:"Features"})}),n.jsxs(oe,{className:"space-y-4",children:[n.jsx("div",{className:"space-y-2",children:(w=o[v.key])==null?void 0:w.features.map((N,j)=>n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:N,onChange:C=>h(v.key,j,C.target.value),placeholder:"Enter feature...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md"}),n.jsx(z,{variant:"destructive",size:"sm",onClick:()=>g(v.key,j),children:"Remove"})]},j))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(z,{variant:"outline",onClick:()=>p(v.key),className:"flex-1",children:"Add Feature"}),n.jsx(z,{onClick:()=>u(v.key,"features"),disabled:r===`${v.key}_features`,children:r===`${v.key}_features`?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2 h-4 w-4"}),"Save Features"]})})]})]})]})]})]},v.key)})]})]})};function Cd(e,[t,r]){return Math.min(r,Math.max(t,e))}function zp(e){const t=b.useRef({value:e,previous:e});return b.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var tC=[" ","Enter","ArrowUp","ArrowDown"],rC=[" ","Enter"],un="Select",[ji,Si,nC]=Ld(un),[es,k2]=$n(un,[nC,Yn]),Ci=Yn(),[sC,Br]=es(un),[aC,iC]=es(un),$p=e=>{const{__scopeSelect:t,children:r,open:s,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:m,autoComplete:u,disabled:f,required:p,form:h}=e,g=Ci(t),[x,v]=b.useState(null),[y,w]=b.useState(null),[N,j]=b.useState(!1),C=Uh(d),[P,S]=vs({prop:s,defaultProp:a??!1,onChange:i,caller:un}),[D,A]=vs({prop:o,defaultProp:l,onChange:c,caller:un}),R=b.useRef(null),E=x?h||!!x.closest("form"):!0,[k,T]=b.useState(new Set),_=Array.from(k).map(M=>M.props.value).join(";");return n.jsx(pm,{...g,children:n.jsxs(sC,{required:p,scope:t,trigger:x,onTriggerChange:v,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:N,onValueNodeHasChildrenChange:j,contentId:Ua(),value:D,onValueChange:A,open:P,onOpenChange:S,dir:C,triggerPointerDownPosRef:R,disabled:f,children:[n.jsx(ji.Provider,{scope:t,children:n.jsx(aC,{scope:e.__scopeSelect,onNativeOptionAdd:b.useCallback(M=>{T(O=>new Set(O).add(M))},[]),onNativeOptionRemove:b.useCallback(M=>{T(O=>{const F=new Set(O);return F.delete(M),F})},[]),children:r})}),E?n.jsxs(uh,{"aria-hidden":!0,required:p,tabIndex:-1,name:m,autoComplete:u,value:D,onChange:M=>A(M.target.value),disabled:f,form:h,children:[D===void 0?n.jsx("option",{value:""}):null,Array.from(k)]},_):null]})})};$p.displayName=un;var qp="SelectTrigger",Up=b.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:s=!1,...a}=e,i=Ci(r),o=Br(qp,r),l=o.disabled||s,c=$e(t,o.onTriggerChange),d=Si(r),m=b.useRef("touch"),[u,f,p]=fh(g=>{const x=d().filter(w=>!w.disabled),v=x.find(w=>w.value===o.value),y=ph(x,g,v);y!==void 0&&o.onValueChange(y.value)}),h=g=>{l||(o.onOpenChange(!0),p()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return n.jsx(Za,{asChild:!0,...i,children:n.jsx(Ce.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":mh(o.value)?"":void 0,...a,ref:c,onClick:pe(a.onClick,g=>{g.currentTarget.focus(),m.current!=="mouse"&&h(g)}),onPointerDown:pe(a.onPointerDown,g=>{m.current=g.pointerType;const x=g.target;x.hasPointerCapture(g.pointerId)&&x.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(h(g),g.preventDefault())}),onKeyDown:pe(a.onKeyDown,g=>{const x=u.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(x&&g.key===" ")&&tC.includes(g.key)&&(h(),g.preventDefault())})})})});Up.displayName=qp;var Hp="SelectValue",Gp=b.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,children:i,placeholder:o="",...l}=e,c=Br(Hp,r),{onValueNodeHasChildrenChange:d}=c,m=i!==void 0,u=$e(t,c.onValueNodeChange);return yt(()=>{d(m)},[d,m]),n.jsx(Ce.span,{...l,ref:u,style:{pointerEvents:"none"},children:mh(c.value)?n.jsx(n.Fragment,{children:o}):i})});Gp.displayName=Hp;var oC="SelectIcon",Vp=b.forwardRef((e,t)=>{const{__scopeSelect:r,children:s,...a}=e;return n.jsx(Ce.span,{"aria-hidden":!0,...a,ref:t,children:s||""})});Vp.displayName=oC;var lC="SelectPortal",Wp=e=>n.jsx($o,{asChild:!0,...e});Wp.displayName=lC;var mn="SelectContent",Kp=b.forwardRef((e,t)=>{const r=Br(mn,e.__scopeSelect),[s,a]=b.useState();if(yt(()=>{a(new DocumentFragment)},[]),!r.open){const i=s;return i?qn.createPortal(n.jsx(Yp,{scope:e.__scopeSelect,children:n.jsx(ji.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),i):null}return n.jsx(Qp,{...e,ref:t})});Kp.displayName=mn;var kt=10,[Yp,zr]=es(mn),cC="SelectContentImpl",dC=$d("SelectContent.RemoveScroll"),Qp=b.forwardRef((e,t)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:m,arrowPadding:u,collisionBoundary:f,collisionPadding:p,sticky:h,hideWhenDetached:g,avoidCollisions:x,...v}=e,y=Br(mn,r),[w,N]=b.useState(null),[j,C]=b.useState(null),P=$e(t,q=>N(q)),[S,D]=b.useState(null),[A,R]=b.useState(null),E=Si(r),[k,T]=b.useState(!1),_=b.useRef(!1);b.useEffect(()=>{if(w)return Bd(w)},[w]),qd();const M=b.useCallback(q=>{const[ne,...ve]=E().map(U=>U.ref.current),[J]=ve.slice(-1),Y=document.activeElement;for(const U of q)if(U===Y||(U==null||U.scrollIntoView({block:"nearest"}),U===ne&&j&&(j.scrollTop=0),U===J&&j&&(j.scrollTop=j.scrollHeight),U==null||U.focus(),document.activeElement!==Y))return},[E,j]),O=b.useCallback(()=>M([S,w]),[M,S,w]);b.useEffect(()=>{k&&O()},[k,O]);const{onOpenChange:F,triggerPointerDownPosRef:B}=y;b.useEffect(()=>{if(w){let q={x:0,y:0};const ne=J=>{var Y,U;q={x:Math.abs(Math.round(J.pageX)-(((Y=B.current)==null?void 0:Y.x)??0)),y:Math.abs(Math.round(J.pageY)-(((U=B.current)==null?void 0:U.y)??0))}},ve=J=>{q.x<=10&&q.y<=10?J.preventDefault():w.contains(J.target)||F(!1),document.removeEventListener("pointermove",ne),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",ve,{capture:!0})}}},[w,F,B]),b.useEffect(()=>{const q=()=>F(!1);return window.addEventListener("blur",q),window.addEventListener("resize",q),()=>{window.removeEventListener("blur",q),window.removeEventListener("resize",q)}},[F]);const[W,K]=fh(q=>{const ne=E().filter(Y=>!Y.disabled),ve=ne.find(Y=>Y.ref.current===document.activeElement),J=ph(ne,q,ve);J&&setTimeout(()=>J.ref.current.focus())}),G=b.useCallback((q,ne,ve)=>{const J=!_.current&&!ve;(y.value!==void 0&&y.value===ne||J)&&(D(q),J&&(_.current=!0))},[y.value]),ee=b.useCallback(()=>w==null?void 0:w.focus(),[w]),Q=b.useCallback((q,ne,ve)=>{const J=!_.current&&!ve;(y.value!==void 0&&y.value===ne||J)&&R(q)},[y.value]),me=s==="popper"?_o:Zp,Ie=me===_o?{side:l,sideOffset:c,align:d,alignOffset:m,arrowPadding:u,collisionBoundary:f,collisionPadding:p,sticky:h,hideWhenDetached:g,avoidCollisions:x}:{};return n.jsx(Yp,{scope:r,content:w,viewport:j,onViewportChange:C,itemRefCallback:G,selectedItem:S,onItemLeave:ee,itemTextRefCallback:Q,focusSelectedItem:O,selectedItemText:A,position:s,isPositioned:k,searchRef:W,children:n.jsx(zd,{as:dC,allowPinchZoom:!0,children:n.jsx(Ud,{asChild:!0,trapped:y.open,onMountAutoFocus:q=>{q.preventDefault()},onUnmountAutoFocus:pe(a,q=>{var ne;(ne=y.trigger)==null||ne.focus({preventScroll:!0}),q.preventDefault()}),children:n.jsx(qo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:q=>q.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:n.jsx(me,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:q=>q.preventDefault(),...v,...Ie,onPlaced:()=>T(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:pe(v.onKeyDown,q=>{const ne=q.ctrlKey||q.altKey||q.metaKey;if(q.key==="Tab"&&q.preventDefault(),!ne&&q.key.length===1&&K(q.key),["ArrowUp","ArrowDown","Home","End"].includes(q.key)){let J=E().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(q.key)&&(J=J.slice().reverse()),["ArrowUp","ArrowDown"].includes(q.key)){const Y=q.target,U=J.indexOf(Y);J=J.slice(U+1)}setTimeout(()=>M(J)),q.preventDefault()}})})})})})})});Qp.displayName=cC;var uC="SelectItemAlignedPosition",Zp=b.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:s,...a}=e,i=Br(mn,r),o=zr(mn,r),[l,c]=b.useState(null),[d,m]=b.useState(null),u=$e(t,P=>m(P)),f=Si(r),p=b.useRef(!1),h=b.useRef(!0),{viewport:g,selectedItem:x,selectedItemText:v,focusSelectedItem:y}=o,w=b.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&g&&x&&v){const P=i.trigger.getBoundingClientRect(),S=d.getBoundingClientRect(),D=i.valueNode.getBoundingClientRect(),A=v.getBoundingClientRect();if(i.dir!=="rtl"){const Y=A.left-S.left,U=D.left-Y,ae=P.left-U,he=P.width+ae,Te=Math.max(he,S.width),Oe=window.innerWidth-kt,Le=Cd(U,[kt,Math.max(kt,Oe-Te)]);l.style.minWidth=he+"px",l.style.left=Le+"px"}else{const Y=S.right-A.right,U=window.innerWidth-D.right-Y,ae=window.innerWidth-P.right-U,he=P.width+ae,Te=Math.max(he,S.width),Oe=window.innerWidth-kt,Le=Cd(U,[kt,Math.max(kt,Oe-Te)]);l.style.minWidth=he+"px",l.style.right=Le+"px"}const R=f(),E=window.innerHeight-kt*2,k=g.scrollHeight,T=window.getComputedStyle(d),_=parseInt(T.borderTopWidth,10),M=parseInt(T.paddingTop,10),O=parseInt(T.borderBottomWidth,10),F=parseInt(T.paddingBottom,10),B=_+M+k+F+O,W=Math.min(x.offsetHeight*5,B),K=window.getComputedStyle(g),G=parseInt(K.paddingTop,10),ee=parseInt(K.paddingBottom,10),Q=P.top+P.height/2-kt,me=E-Q,Ie=x.offsetHeight/2,q=x.offsetTop+Ie,ne=_+M+q,ve=B-ne;if(ne<=Q){const Y=R.length>0&&x===R[R.length-1].ref.current;l.style.bottom="0px";const U=d.clientHeight-g.offsetTop-g.offsetHeight,ae=Math.max(me,Ie+(Y?ee:0)+U+O),he=ne+ae;l.style.height=he+"px"}else{const Y=R.length>0&&x===R[0].ref.current;l.style.top="0px";const ae=Math.max(Q,_+g.offsetTop+(Y?G:0)+Ie)+ve;l.style.height=ae+"px",g.scrollTop=ne-Q+g.offsetTop}l.style.margin=`${kt}px 0`,l.style.minHeight=W+"px",l.style.maxHeight=E+"px",s==null||s(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,l,d,g,x,v,i.dir,s]);yt(()=>w(),[w]);const[N,j]=b.useState();yt(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const C=b.useCallback(P=>{P&&h.current===!0&&(w(),y==null||y(),h.current=!1)},[w,y]);return n.jsx(fC,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:n.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:n.jsx(Ce.div,{...a,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});Zp.displayName=uC;var mC="SelectPopperPosition",_o=b.forwardRef((e,t)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=kt,...i}=e,o=Ci(r);return n.jsx(il,{...o,...i,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});_o.displayName=mC;var[fC,Zl]=es(mn,{}),Mo="SelectViewport",Jp=b.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:s,...a}=e,i=zr(Mo,r),o=Zl(Mo,r),l=$e(t,i.onViewportChange),c=b.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),n.jsx(ji.Slot,{scope:r,children:n.jsx(Ce.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:pe(a.onScroll,d=>{const m=d.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&u){const p=Math.abs(c.current-m.scrollTop);if(p>0){const h=window.innerHeight-kt*2,g=parseFloat(u.style.minHeight),x=parseFloat(u.style.height),v=Math.max(g,x);if(v<h){const y=v+p,w=Math.min(h,y),N=y-w;u.style.height=w+"px",u.style.bottom==="0px"&&(m.scrollTop=N>0?N:0,u.style.justifyContent="flex-end")}}}c.current=m.scrollTop})})})]})});Jp.displayName=Mo;var Xp="SelectGroup",[pC,hC]=es(Xp),gC=b.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=Ua();return n.jsx(pC,{scope:r,id:a,children:n.jsx(Ce.div,{role:"group","aria-labelledby":a,...s,ref:t})})});gC.displayName=Xp;var eh="SelectLabel",th=b.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=hC(eh,r);return n.jsx(Ce.div,{id:a.id,...s,ref:t})});th.displayName=eh;var $a="SelectItem",[vC,rh]=es($a),nh=b.forwardRef((e,t)=>{const{__scopeSelect:r,value:s,disabled:a=!1,textValue:i,...o}=e,l=Br($a,r),c=zr($a,r),d=l.value===s,[m,u]=b.useState(i??""),[f,p]=b.useState(!1),h=$e(t,y=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,y,s,a)}),g=Ua(),x=b.useRef("touch"),v=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(vC,{scope:r,value:s,disabled:a,textId:g,isSelected:d,onItemTextChange:b.useCallback(y=>{u(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:n.jsx(ji.ItemSlot,{scope:r,value:s,disabled:a,textValue:m,children:n.jsx(Ce.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:h,onFocus:pe(o.onFocus,()=>p(!0)),onBlur:pe(o.onBlur,()=>p(!1)),onClick:pe(o.onClick,()=>{x.current!=="mouse"&&v()}),onPointerUp:pe(o.onPointerUp,()=>{x.current==="mouse"&&v()}),onPointerDown:pe(o.onPointerDown,y=>{x.current=y.pointerType}),onPointerMove:pe(o.onPointerMove,y=>{var w;x.current=y.pointerType,a?(w=c.onItemLeave)==null||w.call(c):x.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(o.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:pe(o.onKeyDown,y=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&y.key===" "||(rC.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});nh.displayName=$a;var ms="SelectItemText",sh=b.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,...i}=e,o=Br(ms,r),l=zr(ms,r),c=rh(ms,r),d=iC(ms,r),[m,u]=b.useState(null),f=$e(t,v=>u(v),c.onItemTextChange,v=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,v,c.value,c.disabled)}),p=m==null?void 0:m.textContent,h=b.useMemo(()=>n.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:x}=d;return yt(()=>(g(h),()=>x(h)),[g,x,h]),n.jsxs(n.Fragment,{children:[n.jsx(Ce.span,{id:c.textId,...i,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?qn.createPortal(i.children,o.valueNode):null]})});sh.displayName=ms;var ah="SelectItemIndicator",ih=b.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return rh(ah,r).isSelected?n.jsx(Ce.span,{"aria-hidden":!0,...s,ref:t}):null});ih.displayName=ah;var Lo="SelectScrollUpButton",oh=b.forwardRef((e,t)=>{const r=zr(Lo,e.__scopeSelect),s=Zl(Lo,e.__scopeSelect),[a,i]=b.useState(!1),o=$e(t,s.onScrollButtonChange);return yt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?n.jsx(ch,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});oh.displayName=Lo;var Bo="SelectScrollDownButton",lh=b.forwardRef((e,t)=>{const r=zr(Bo,e.__scopeSelect),s=Zl(Bo,e.__scopeSelect),[a,i]=b.useState(!1),o=$e(t,s.onScrollButtonChange);return yt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,m=Math.ceil(c.scrollTop)<d;i(m)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?n.jsx(ch,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});lh.displayName=Bo;var ch=b.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:s,...a}=e,i=zr("SelectScrollButton",r),o=b.useRef(null),l=Si(r),c=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),yt(()=>{var m;const d=l().find(u=>u.ref.current===document.activeElement);(m=d==null?void 0:d.ref.current)==null||m.scrollIntoView({block:"nearest"})},[l]),n.jsx(Ce.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:pe(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:pe(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:pe(a.onPointerLeave,()=>{c()})})}),xC="SelectSeparator",dh=b.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return n.jsx(Ce.div,{"aria-hidden":!0,...s,ref:t})});dh.displayName=xC;var zo="SelectArrow",bC=b.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=Ci(r),i=Br(zo,r),o=zr(zo,r);return i.open&&o.position==="popper"?n.jsx(ol,{...a,...s,ref:t}):null});bC.displayName=zo;var yC="SelectBubbleInput",uh=b.forwardRef(({__scopeSelect:e,value:t,...r},s)=>{const a=b.useRef(null),i=$e(s,a),o=zp(t);return b.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&m){const u=new Event("change",{bubbles:!0});m.call(l,t),l.dispatchEvent(u)}},[o,t]),n.jsx(Ce.select,{...r,style:{...tu,...r.style},ref:i,defaultValue:t})});uh.displayName=yC;function mh(e){return e===""||e===void 0}function fh(e){const t=An(e),r=b.useRef(""),s=b.useRef(0),a=b.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=b.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,a,i]}function ph(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=wC(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function wC(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var NC=$p,hh=Up,jC=Gp,SC=Vp,CC=Wp,gh=Kp,EC=Jp,vh=th,xh=nh,PC=sh,IC=ih,bh=oh,yh=lh,wh=dh;const Jl=NC,Xl=jC,Ei=b.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(hh,{ref:s,className:de("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(SC,{asChild:!0,children:n.jsx(Eu,{className:"h-4 w-4 opacity-50"})})]}));Ei.displayName=hh.displayName;const Nh=b.forwardRef(({className:e,...t},r)=>n.jsx(bh,{ref:r,className:de("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(jg,{className:"h-4 w-4"})}));Nh.displayName=bh.displayName;const jh=b.forwardRef(({className:e,...t},r)=>n.jsx(yh,{ref:r,className:de("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(Eu,{className:"h-4 w-4"})}));jh.displayName=yh.displayName;const Pi=b.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>n.jsx(CC,{children:n.jsxs(gh,{ref:a,className:de("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[n.jsx(Nh,{}),n.jsx(EC,{className:de("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(jh,{})]})}));Pi.displayName=gh.displayName;const DC=b.forwardRef(({className:e,...t},r)=>n.jsx(vh,{ref:r,className:de("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));DC.displayName=vh.displayName;const ct=b.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(xh,{ref:s,className:de("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(IC,{children:n.jsx(Cu,{className:"h-4 w-4"})})}),n.jsx(PC,{children:t})]}));ct.displayName=xh.displayName;const TC=b.forwardRef(({className:e,...t},r)=>n.jsx(wh,{ref:r,className:de("-mx-1 my-1 h-px bg-muted",e),...t}));TC.displayName=wh.displayName;var Ii="Switch",[kC,A2]=$n(Ii),[AC,RC]=kC(Ii),Sh=b.forwardRef((e,t)=>{const{__scopeSwitch:r,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:m,...u}=e,[f,p]=b.useState(null),h=$e(t,w=>p(w)),g=b.useRef(!1),x=f?m||!!f.closest("form"):!0,[v,y]=vs({prop:a,defaultProp:i??!1,onChange:d,caller:Ii});return n.jsxs(AC,{scope:r,checked:v,disabled:l,children:[n.jsx(Ce.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":Ih(v),"data-disabled":l?"":void 0,disabled:l,value:c,...u,ref:h,onClick:pe(e.onClick,w=>{y(N=>!N),x&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),x&&n.jsx(Ph,{control:f,bubbles:!g.current,name:s,value:c,checked:v,required:o,disabled:l,form:m,style:{transform:"translateX(-100%)"}})]})});Sh.displayName=Ii;var Ch="SwitchThumb",Eh=b.forwardRef((e,t)=>{const{__scopeSwitch:r,...s}=e,a=RC(Ch,r);return n.jsx(Ce.span,{"data-state":Ih(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});Eh.displayName=Ch;var OC="SwitchBubbleInput",Ph=b.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:s=!0,...a},i)=>{const o=b.useRef(null),l=$e(o,i),c=zp(r),d=sm(t);return b.useEffect(()=>{const m=o.current;if(!m)return;const u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(c!==r&&p){const h=new Event("click",{bubbles:s});p.call(m,r),m.dispatchEvent(h)}},[c,r,s]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ph.displayName=OC;function Ih(e){return e?"checked":"unchecked"}var Dh=Sh,FC=Eh;const _r=b.forwardRef(({className:e,...t},r)=>n.jsx(Dh,{className:de("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:n.jsx(FC,{className:de("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));_r.displayName=Dh.displayName;const _C=({currentValue:e,onUpload:t,className:r})=>{const[s,a]=b.useState(!1);b.useRef(null);const{toast:i}=Ee(),o=async c=>{var m;const d=(m=c.target.files)==null?void 0:m[0];if(d){if(!d.type.startsWith("image/")){i({title:"Invalid file type",description:"Please select an image file",variant:"destructive"});return}if(d.size>52428800){i({title:"File too large",description:"Please select an image smaller than 50MB",variant:"destructive"});return}a(!0);try{const u=d.name.split(".").pop(),f=`${Date.now()}-${Math.random().toString(36).substring(2)}.${u}`,p=`products/${f}`;console.log("Uploading file:",f);const{data:h,error:g}=await L.storage.listBuckets();if(!g&&!(h==null?void 0:h.find(w=>w.name==="admin-uploads"))){console.log("Creating admin-uploads bucket...");const{error:w}=await L.storage.createBucket("admin-uploads",{public:!0,fileSizeLimit:52428800});w&&console.warn("Could not create bucket:",w)}const{error:x}=await L.storage.from("admin-uploads").upload(p,d,{cacheControl:"3600",upsert:!1});if(x)throw console.error("Upload error:",x),x;const{data:v}=L.storage.from("admin-uploads").getPublicUrl(p);console.log("Upload successful:",v.publicUrl),t(v.publicUrl),i({title:"Success",description:"Image uploaded successfully"})}catch(u){console.error("Upload error:",u),i({title:"Upload failed",description:"Failed to upload image. Please try again.",variant:"destructive"})}finally{a(!1)}}},l=()=>{t("")};return n.jsxs("div",{className:`space-y-4 ${r}`,children:[e&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:e,alt:"Current image",className:"max-w-xs h-32 object-cover rounded border"}),n.jsx(z,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:l,children:n.jsx(Kt,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ce,{type:"file",accept:"image/*",onChange:o,disabled:s,className:"flex-1"}),n.jsx(z,{type:"button",disabled:s,variant:"outline",children:s?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ru,{className:"w-4 h-4 mr-2"}),"Upload"]})})]})]})},MC=()=>{const[e,t]=b.useState(null),[r,s]=b.useState(!1),[a,i]=b.useState(!1),[o,l]=b.useState({name:"",description:"",price:0,slug:"",category_id:"",image_url:"",is_active:!0,is_featured:!1,stock_quantity:0,compare_price:0,sort_order:0,meta_title:"",meta_description:"",labels:[]}),{toast:c}=Ee(),d=fl(),{data:m,isLoading:u}=js({queryKey:["admin-products"],queryFn:async()=>{const{data:E,error:k}=await L.from("products").select(`
          *,
          categories (
            id,
            name,
            slug
          )
        `).order("sort_order",{ascending:!0}).order("name",{ascending:!0});if(k)throw k;return E}}),{data:f,isLoading:p,error:h}=js({queryKey:["admin-categories"],queryFn:async()=>{console.log("[ProductsAdmin] Fetching categories...");const{data:E,error:k}=await L.from("categories").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});if(k)throw console.error("[ProductsAdmin] Categories fetch error:",k),k;if(!E||E.length===0)if(console.log("[ProductsAdmin] No categories found, attempting to initialize..."),await Io()){const{data:_,error:M}=await L.from("categories").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});if(M)throw M;return _}else throw new Error("Failed to initialize categories");return console.log("[ProductsAdmin] Categories loaded:",E),E}}),g=$i({mutationFn:async E=>{const{data:k,error:T}=await L.from("products").insert(E).select().single();if(T)throw T;return k},onSuccess:()=>{d.invalidateQueries({queryKey:["admin-products"]}),c({title:"Success",description:"Product created successfully"}),y()},onError:E=>{c({title:"Error",description:`Failed to create product: ${E.message}`,variant:"destructive"})}}),x=$i({mutationFn:async({id:E,...k})=>{const{data:T,error:_}=await L.from("products").update(k).eq("id",E).select().single();if(_)throw _;return T},onSuccess:()=>{d.invalidateQueries({queryKey:["admin-products"]}),c({title:"Success",description:"Product updated successfully"}),y()},onError:E=>{c({title:"Error",description:`Failed to update product: ${E.message}`,variant:"destructive"})}}),v=$i({mutationFn:async E=>{console.log("[ProductsAdmin] Attempting to delete product with ID:",E);const{error:k}=await L.from("products").delete().eq("id",E);if(k)throw console.error("[ProductsAdmin] Delete error:",k),k;console.log("[ProductsAdmin] Product deleted successfully")},onSuccess:()=>{d.invalidateQueries({queryKey:["admin-products"]}),d.invalidateQueries({queryKey:["products"]}),c({title:"Success",description:"Product deleted successfully"})},onError:E=>{console.error("[ProductsAdmin] Delete mutation error:",E),c({title:"Error",description:`Failed to delete product: ${E.message}`,variant:"destructive"})}}),y=()=>{l({name:"",description:"",price:0,slug:"",category_id:"",image_url:"",is_active:!0,is_featured:!1,stock_quantity:0,compare_price:0,sort_order:0,meta_title:"",meta_description:"",labels:[]}),t(null),s(!1)},w=E=>{t(E),l({name:E.name,description:E.description||"",price:E.price,slug:E.slug,category_id:E.category_id||"",image_url:E.image_url||"",is_active:E.is_active??!0,is_featured:E.is_featured??!1,stock_quantity:E.stock_quantity||0,compare_price:E.compare_price||0,sort_order:E.sort_order||0,meta_title:E.meta_title||"",meta_description:E.meta_description||"",labels:E.labels||[]}),s(!1)},N=()=>{y(),s(!0)},j=E=>E.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),C=E=>{l(k=>({...k,name:E,slug:j(E)}))},P=E=>{if(E.preventDefault(),!o.name||!o.price||!o.category_id){c({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const k={...o,price:Number(o.price),stock_quantity:Number(o.stock_quantity),compare_price:Number(o.compare_price),sort_order:Number(o.sort_order)};e?x.mutate({id:e.id,...k}):g.mutate(k)},S=E=>{window.confirm("Are you sure you want to delete this product?")&&v.mutate(E)},D=E=>{x.mutate({id:E.id,is_active:!E.is_active})},A=E=>{x.mutate({id:E.id,is_featured:!E.is_featured})},R=async()=>{if(window.confirm(` WARNING: This will initialize the database with default categories and products.

This action will:
 Add default categories if none exist
 Add default products if none exist
 Only run during initial setup

Continue?`)){i(!0);try{if(console.log("[ProductsAdmin] Initializing categories..."),!await Io())throw new Error("Failed to initialize categories");await gf(!1)?(d.invalidateQueries({queryKey:["admin-products"]}),d.invalidateQueries({queryKey:["admin-categories"]}),c({title:"Success! ",description:"Database initialized with default categories and products"})):c({title:"Error",description:"Failed to initialize products. Check console for details.",variant:"destructive"})}catch(k){console.error("[ProductsAdmin] Initialization error:",k),c({title:"Error",description:`Failed to initialize: ${k.message}`,variant:"destructive"})}finally{i(!1)}}};return u||p?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ge,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:p?"Loading categories...":"Loading products..."})]})}):h?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Gn,{className:"h-8 w-8 text-red-500 mx-auto mb-4"}),n.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load categories"}),n.jsx(z,{onClick:()=>d.invalidateQueries({queryKey:["admin-categories"]}),children:"Retry"})]})}):n.jsxs("div",{className:"space-y-4 md:space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"text-center md:text-left",children:[n.jsx("h2",{className:"text-lg md:text-2xl font-bold tracking-tight",children:"Products Management"}),n.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"Manage your product catalog"})]}),n.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[(!f||f.length===0)&&n.jsx(z,{onClick:R,disabled:a,variant:"outline",className:"w-full md:w-auto text-xs md:text-sm",size:"sm",children:a?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"mr-1 md:mr-2 h-3 w-3 md:h-4 md:w-4 animate-spin"}),n.jsx("span",{className:"hidden sm:inline",children:"Initializing..."}),n.jsx("span",{className:"sm:hidden",children:"Init..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Ft,{className:"mr-1 md:mr-2 h-3 w-3 md:h-4 md:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Add Default Categories & Products"}),n.jsx("span",{className:"sm:hidden",children:"Add Defaults"})]})}),n.jsxs(z,{onClick:N,disabled:r||e||!f||f.length===0,className:"w-full md:w-auto text-xs md:text-sm",size:"sm",children:[n.jsx(Ar,{className:"mr-1 md:mr-2 h-3 w-3 md:h-4 md:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Add Product"}),n.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]}),(r||e)&&n.jsxs(ie,{className:"mx-1 md:mx-0",children:[n.jsx(xe,{className:"pb-3 md:pb-6",children:n.jsxs(be,{className:"flex items-center justify-between text-base md:text-lg",children:[n.jsx("span",{children:e?"Edit Product":"Create New Product"}),n.jsx(z,{variant:"ghost",size:"sm",onClick:y,className:"h-8 w-8 md:h-9 md:w-9",children:n.jsx(Kt,{className:"h-3 w-3 md:h-4 md:w-4"})})]})}),n.jsx(oe,{className:"px-3 md:px-6",children:n.jsxs("form",{onSubmit:P,className:"space-y-3 md:space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"name",className:"text-sm font-medium",children:"Product Name *"}),n.jsx(ce,{id:"name",value:o.name,onChange:E=>C(E.target.value),placeholder:"Enter product name",required:!0,className:"text-sm md:text-base"})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"slug",className:"text-sm font-medium",children:"Slug"}),n.jsx(ce,{id:"slug",value:o.slug,onChange:E=>l(k=>({...k,slug:E.target.value})),placeholder:"product-slug",className:"text-sm md:text-base"})]})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),n.jsx(Qt,{id:"description",value:o.description,onChange:E=>l(k=>({...k,description:E.target.value})),placeholder:"Enter product description",rows:3,className:"text-sm md:text-base resize-none"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"price",className:"text-sm font-medium",children:"Price () *"}),n.jsx(ce,{id:"price",type:"number",step:"0.01",min:"0",value:o.price,onChange:E=>l(k=>({...k,price:parseFloat(E.target.value)||0})),required:!0,className:"text-sm md:text-base"})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"compare_price",className:"text-sm font-medium",children:"Compare Price ()"}),n.jsx(ce,{id:"compare_price",type:"number",step:"0.01",min:"0",value:o.compare_price,onChange:E=>l(k=>({...k,compare_price:parseFloat(E.target.value)||0})),className:"text-sm md:text-base"})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"stock_quantity",className:"text-sm font-medium",children:"Stock Quantity"}),n.jsx(ce,{id:"stock_quantity",type:"number",min:"0",value:o.stock_quantity,onChange:E=>l(k=>({...k,stock_quantity:parseInt(E.target.value)||0})),className:"text-sm md:text-base"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"category_id",className:"text-sm font-medium",children:"Category *"}),n.jsxs(Jl,{value:o.category_id,onValueChange:E=>l(k=>({...k,category_id:E})),children:[n.jsx(Ei,{className:"text-sm md:text-base",children:n.jsx(Xl,{placeholder:"Select a category"})}),n.jsx(Pi,{children:f&&f.length>0?f.map(E=>n.jsx(ct,{value:E.id,className:"text-sm md:text-base",children:E.name},E.id)):n.jsx(ct,{value:"",disabled:!0,className:"text-sm md:text-base",children:"No categories available - Initialize first"})})]})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"sort_order",className:"text-sm font-medium",children:"Sort Order"}),n.jsx(ce,{id:"sort_order",type:"number",min:"0",value:o.sort_order,onChange:E=>l(k=>({...k,sort_order:parseInt(E.target.value)||0})),className:"text-sm md:text-base"})]})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"image_url",className:"text-sm font-medium",children:"Product Image"}),n.jsx(_C,{currentValue:o.image_url,onUpload:E=>l(k=>({...k,image_url:E})),className:"w-full"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"meta_title",className:"text-sm font-medium",children:"Meta Title (SEO)"}),n.jsx(ce,{id:"meta_title",value:o.meta_title,onChange:E=>l(k=>({...k,meta_title:E.target.value})),placeholder:"SEO title",className:"text-sm md:text-base"})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"meta_description",className:"text-sm font-medium",children:"Meta Description (SEO)"}),n.jsx(ce,{id:"meta_description",value:o.meta_description,onChange:E=>l(k=>({...k,meta_description:E.target.value})),placeholder:"SEO description",className:"text-sm md:text-base"})]})]}),n.jsx(Bp,{labels:o.labels,onChange:E=>l(k=>({...k,labels:E})),placeholder:"Add a label (e.g., lauree, matrimoni, compleanno)"}),n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:space-x-6 md:gap-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(_r,{id:"is_active",checked:o.is_active,onCheckedChange:E=>l(k=>({...k,is_active:E}))}),n.jsx(Z,{htmlFor:"is_active",className:"text-sm font-medium",children:"Active"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(_r,{id:"is_featured",checked:o.is_featured,onCheckedChange:E=>l(k=>({...k,is_featured:E}))}),n.jsx(Z,{htmlFor:"is_featured",className:"text-sm font-medium",children:"Featured"})]})]}),n.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[n.jsx(z,{type:"submit",disabled:g.isPending||x.isPending,className:"w-full md:w-auto text-sm",size:"sm",children:g.isPending||x.isPending?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"mr-1 md:mr-2 h-3 w-3 md:h-4 md:w-4 animate-spin"}),e?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-1 md:mr-2 h-3 w-3 md:h-4 md:w-4"}),e?"Update Product":"Create Product"]})}),n.jsx(z,{type:"button",variant:"outline",onClick:y,className:"w-full md:w-auto text-sm",size:"sm",children:"Cancel"})]})]})})]}),n.jsxs(ie,{className:"mx-1 md:mx-0",children:[n.jsx(xe,{className:"pb-3 md:pb-6",children:n.jsxs(be,{className:"flex items-center gap-2 text-base md:text-lg",children:[n.jsx(Ft,{className:"h-4 w-4 md:h-5 md:w-5"}),"Products (",(m==null?void 0:m.length)||0,")"]})}),n.jsx(oe,{className:"px-3 md:px-6",children:m&&m.length>0?n.jsx("div",{className:"space-y-3 md:space-y-4",children:m.map(E=>{var k;return n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between p-3 md:p-4 border rounded-lg hover:bg-gray-50 space-y-3 md:space-y-0",children:[n.jsxs("div",{className:"flex items-start space-x-3 md:space-x-4",children:[E.image_url?n.jsx("img",{src:E.image_url,alt:E.name,className:"w-12 h-12 md:w-16 md:h-16 object-cover rounded-lg flex-shrink-0",onError:T=>{const _=T.target;_.src="/placeholder.svg"}}):n.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-gray-200 rounded-lg flex items-center justify-center flex-shrink-0",children:n.jsx(Wo,{className:"h-4 w-4 md:h-6 md:w-6 text-gray-400"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-sm md:text-base truncate",children:E.name}),n.jsx("p",{className:"text-xs md:text-sm text-gray-600 truncate",children:((k=E.categories)==null?void 0:k.name)||"No category"}),n.jsxs("p",{className:"text-base md:text-lg font-bold text-emerald-600",children:["",E.price.toFixed(2)]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-1 md:gap-2 mt-1",children:[E.is_featured&&n.jsx(Ue,{variant:"secondary",className:"text-xs",children:"Featured"}),E.is_active?n.jsx(Ue,{variant:"outline",className:"text-xs text-green-600",children:"Active"}):n.jsx(Ue,{variant:"outline",className:"text-xs text-red-600",children:"Inactive"}),E.stock_quantity!==null&&n.jsxs(Ue,{variant:"outline",className:"text-xs",children:["Stock: ",E.stock_quantity]})]}),E.labels&&E.labels.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:E.labels.map((T,_)=>n.jsxs(Ue,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:[n.jsx(Un,{className:"w-3 h-3 mr-1"}),T]},_))})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-1 md:space-x-2 flex-shrink-0",children:[n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>D(E),title:E.is_active?"Deactivate":"Activate",className:"h-8 w-8 md:h-9 md:w-9",children:E.is_active?n.jsx(xs,{className:"h-3 w-3 md:h-4 md:w-4"}):n.jsx(ja,{className:"h-3 w-3 md:h-4 md:w-4"})}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>A(E),title:E.is_featured?"Remove from featured":"Add to featured",className:"h-8 w-8 md:h-9 md:w-9",children:E.is_featured?n.jsx(Ag,{className:"h-3 w-3 md:h-4 md:w-4 fill-current text-yellow-500"}):n.jsx(kg,{className:"h-3 w-3 md:h-4 md:w-4"})}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>w(E),className:"h-8 w-8 md:h-9 md:w-9",children:n.jsx(ku,{className:"h-3 w-3 md:h-4 md:w-4"})}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>S(E.id),disabled:v.isPending,className:"h-8 w-8 md:h-9 md:w-9",children:n.jsx(Hn,{className:"h-3 w-3 md:h-4 md:w-4"})})]})]},E.id)})}):n.jsxs("div",{className:"text-center py-6 md:py-8",children:[n.jsx(Ft,{className:"h-8 w-8 md:h-12 md:w-12 text-gray-400 mx-auto mb-3 md:mb-4"}),n.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"No products found. Create your first product!"})]})})]})]})},LC=()=>{const[e,t,r]=v0(),s=async()=>{const l=await t(e);cs(l?{title:"Logo updated",description:"Your website logo has been changed"}:{title:"Logo updated locally",description:"Settings saved locally and will sync when connection is restored"})},a=l=>{t({...e,logoUrl:l})},i={logoUrl:"https://despodpgvkszyexvcbft.supabase.co/storage/v1/object/public/uploads/logos/1749735172947-oi6nr6gnk7.png",altText:"Francesco Fiori & Piante Logo"},o=async()=>{const l=await t(i);cs(l?{title:"Logo reset",description:"Your logo has been reset to the default"}:{title:"Logo reset locally",description:"Settings reset locally and will sync when connection is restored"})};return r?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-peach-500"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Logo Settings"}),n.jsxs(z,{onClick:s,variant:"default",className:"flex items-center gap-2",children:[n.jsx(Wt,{size:16})," Save Changes"]})]}),n.jsxs(ie,{children:[n.jsxs(xe,{children:[n.jsx(be,{children:"Website Logo"}),n.jsx(pl,{children:"Upload and customize your flower shop logo"})]}),n.jsx(oe,{className:"space-y-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border rounded-md p-6 flex flex-col items-center justify-center space-y-4",children:[n.jsx("div",{className:"bg-slate-100 p-3 rounded-full",children:n.jsx("img",{src:e.logoUrl,alt:e.altText,className:"h-32 w-32 object-contain"})}),n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Logo"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{children:"Upload New Logo"}),n.jsx(Gs,{onImageSelected:a,buttonLabel:"Choose Logo Image",bucketName:"uploads",folderPath:"logos",className:"w-full"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended: Square image, at least 200x200 pixels, PNG or SVG with transparent background"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{htmlFor:"logo-alt-text",children:"Alternative Text"}),n.jsx(ce,{id:"logo-alt-text",value:e.altText,onChange:l=>t({...e,altText:l.target.value}),placeholder:"Describe your logo for screen readers"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"This text helps with accessibility and SEO"})]})]})}),n.jsxs(Lm,{className:"flex justify-between",children:[n.jsxs(z,{type:"button",variant:"outline",onClick:o,className:"flex items-center gap-2",children:[n.jsx(Vt,{size:16})," Reset to Default"]}),n.jsxs(z,{type:"button",onClick:s,className:"flex items-center gap-2",children:[n.jsx(Wt,{size:16})," Save Changes"]})]})]})]})};var BC="Separator",Ed="horizontal",zC=["horizontal","vertical"],Th=b.forwardRef((e,t)=>{const{decorative:r,orientation:s=Ed,...a}=e,i=$C(s)?s:Ed,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return n.jsx(Ce.div,{"data-orientation":i,...l,...a,ref:t})});Th.displayName=BC;function $C(e){return zC.includes(e)}var kh=Th;const tn=b.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...s},a)=>n.jsx(kh,{ref:a,decorative:r,orientation:t,className:de("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));tn.displayName=kh.displayName;class qC{constructor(){Ae(this,"settings");Ae(this,"deliveryZones");this.settings={enabled:!0,restaurantAddress:"Piazza della Repubblica, 10100 Torino TO",restaurantLat:45.0703,restaurantLng:7.6869,maxDeliveryDistance:15,deliveryFee:5,freeDeliveryThreshold:50,googleMapsApiKey:""},this.deliveryZones=[],this.loadSettings()}async loadSettings(){try{const{supabase:t}=await wt(async()=>{const{supabase:o}=await Promise.resolve().then(()=>on);return{supabase:o}},void 0),{data:r,error:s}=await t.from("settings").select("value").eq("key","shippingZoneSettings").single();!s&&r&&(this.settings={...this.settings,...r.value});const{data:a,error:i}=await t.from("settings").select("value").eq("key","deliveryZones").single();!i&&a&&a.value!==null&&(this.deliveryZones=a.value)}catch(t){console.warn("Failed to load shipping zone settings:",t);const r=localStorage.getItem("shippingZoneSettings");r&&(this.settings={...this.settings,...JSON.parse(r)});const s=localStorage.getItem("deliveryZones");s&&(this.deliveryZones=JSON.parse(s))}}async saveSettings(){try{const{supabase:t}=await wt(async()=>{const{supabase:a}=await Promise.resolve().then(()=>on);return{supabase:a}},void 0),{error:r}=await t.from("settings").upsert({key:"shippingZoneSettings",value:this.settings});if(r)throw r;const{error:s}=await t.from("settings").upsert({key:"deliveryZones",value:this.deliveryZones});if(s)throw s}catch(t){console.warn("Failed to save shipping zone settings:",t),localStorage.setItem("shippingZoneSettings",JSON.stringify(this.settings)),localStorage.setItem("deliveryZones",JSON.stringify(this.deliveryZones))}}calculateDistance(t,r,s,a){const o=(s-t)*Math.PI/180,l=(a-r)*Math.PI/180,c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}async geocodeAddress(t){if(!this.settings.googleMapsApiKey)throw new Error("Google Maps API key not configured");try{const s=await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(t)}&key=${this.settings.googleMapsApiKey}`)).json();if(s.status==="OK"&&s.results.length>0){const a=s.results[0];return{lat:a.geometry.location.lat,lng:a.geometry.location.lng,formattedAddress:a.formatted_address}}return null}catch(r){return console.error("Geocoding error:",r),null}}findDeliveryZone(t){const r=this.deliveryZones.filter(s=>s.isActive);for(const s of r.sort((a,i)=>a.maxDistance-i.maxDistance))if(t<=s.maxDistance)return s;return null}async validateDeliveryAddress(t,r=0){if(!this.settings.enabled)return{isValid:!0,isWithinZone:!0,distance:0,deliveryFee:0,estimatedTime:"N/A",formattedAddress:t,coordinates:{lat:0,lng:0}};try{const s=await this.geocodeAddress(t);if(!s)return{isValid:!1,isWithinZone:!1,distance:0,deliveryFee:0,estimatedTime:"N/A",formattedAddress:t,coordinates:{lat:0,lng:0},error:"Unable to find the address. Please check and try again."};const a=this.calculateDistance(this.settings.restaurantLat,this.settings.restaurantLng,s.lat,s.lng);if(a>this.settings.maxDeliveryDistance)return{isValid:!0,isWithinZone:!1,distance:a,deliveryFee:0,estimatedTime:"N/A",formattedAddress:s.formattedAddress,coordinates:s,error:`Sorry, we don't deliver to this area. Maximum delivery distance is ${this.settings.maxDeliveryDistance}km.`};const i=this.findDeliveryZone(a);if(!i)return{isValid:!0,isWithinZone:!1,distance:a,deliveryFee:0,estimatedTime:"N/A",formattedAddress:s.formattedAddress,coordinates:s,error:"No delivery zone configured for this distance."};const o=r>=this.settings.freeDeliveryThreshold?0:i.deliveryFee;return{isValid:!0,isWithinZone:!0,distance:a,deliveryFee:o,estimatedTime:i.estimatedTime,formattedAddress:s.formattedAddress,coordinates:s}}catch(s){return console.error("Address validation error:",s),{isValid:!1,isWithinZone:!1,distance:0,deliveryFee:0,estimatedTime:"N/A",formattedAddress:t,coordinates:{lat:0,lng:0},error:"Unable to validate address. Please try again."}}}updateSettings(t){this.settings={...this.settings,...t},this.saveSettings()}updateDeliveryZones(t){this.deliveryZones=t,this.saveSettings()}getSettings(){return{...this.settings}}getDeliveryZones(){return[...this.deliveryZones]}async setRestaurantLocation(t){const r=await this.geocodeAddress(t);return r?(this.settings.restaurantAddress=t,this.settings.restaurantLat=r.lat,this.settings.restaurantLng=r.lng,this.saveSettings(),!0):!1}initializeDefaultZones(){this.deliveryZones=[{id:"1",name:"Zone 1 (0-5km)",maxDistance:5,deliveryFee:3,estimatedTime:"20-30 minutes",isActive:!0},{id:"2",name:"Zone 2 (5-10km)",maxDistance:10,deliveryFee:5,estimatedTime:"30-45 minutes",isActive:!0},{id:"3",name:"Zone 3 (10-15km)",maxDistance:15,deliveryFee:8,estimatedTime:"45-60 minutes",isActive:!0}],this.saveSettings()}}const Tt=new qC,UC=()=>{const[e,t]=b.useState({enabled:!0,restaurantAddress:"",restaurantLat:0,restaurantLng:0,maxDeliveryDistance:15,deliveryFee:5,freeDeliveryThreshold:50,googleMapsApiKey:""}),[r,s]=b.useState([]),[a,i]=b.useState(""),[o,l]=b.useState(25),[c,d]=b.useState(null),[m,u]=b.useState(!1),{toast:f}=Ee();b.useEffect(()=>{const N=Tt.getSettings();t(N);const j=Tt.getDeliveryZones();s(j)},[]);const p=(N,j)=>{const C={...e,[N]:j};t(C),Tt.updateSettings(C)},h=async()=>{if(!e.restaurantAddress){f({title:"Error",description:"Please enter a restaurant address",variant:"destructive"});return}if(u(!0),await Tt.setRestaurantLocation(e.restaurantAddress)){const j=Tt.getSettings();t(j),f({title:"Success",description:"Restaurant location set successfully"})}else f({title:"Error",description:"Failed to geocode restaurant address",variant:"destructive"});u(!1)},g=()=>{const N={id:Date.now().toString(),name:`Zone ${r.length+1}`,maxDistance:5,deliveryFee:3,estimatedTime:"30-45 minutes",isActive:!0},j=[...r,N];s(j),Tt.updateDeliveryZones(j)},x=(N,j)=>{const C=r.map(P=>P.id===N?{...P,...j}:P);s(C),Tt.updateDeliveryZones(C)},v=N=>{const j=r.filter(C=>C.id!==N);s(j),Tt.updateDeliveryZones(j),f({title:"Zone Deleted",description:"Delivery zone has been removed"})},y=()=>{Tt.initializeDefaultZones();const N=Tt.getDeliveryZones();s(N),f({title:"Default Zones Added",description:"Three default delivery zones have been created"})},w=async()=>{if(!a){f({title:"Error",description:"Please enter a test address",variant:"destructive"});return}u(!0);const N=await Tt.validateDeliveryAddress(a,o);d(N),u(!1),N.error?f({title:"Test Result",description:N.error,variant:N.isWithinZone?"default":"destructive"}):f({title:"Test Successful",description:`Address is ${N.isWithinZone?"within":"outside"} delivery zone`})};return n.jsxs("div",{className:"space-y-4 md:space-y-6",children:[n.jsxs(ie,{className:"mx-1 md:mx-0",children:[n.jsx(xe,{className:"pb-3 md:pb-6",children:n.jsxs(be,{className:"flex items-center gap-2 text-base md:text-lg",children:[n.jsx(Yo,{className:"w-4 h-4 md:w-5 md:h-5"}),"Shipping Zone Settings"]})}),n.jsxs(oe,{className:"space-y-4 md:space-y-6 px-3 md:px-6",children:[n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(Z,{htmlFor:"enabled",className:"text-sm font-medium",children:"Enable Delivery Zone Restrictions"}),n.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"Limit deliveries based on distance from restaurant"})]}),n.jsx(_r,{id:"enabled",checked:e.enabled,onCheckedChange:N=>p("enabled",N)})]}),n.jsx(tn,{}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"apiKey",className:"text-sm font-medium",children:"Google Maps API Key"}),n.jsx(ce,{id:"apiKey",type:"password",placeholder:"Enter your Google Maps API Key",value:e.googleMapsApiKey,onChange:N=>p("googleMapsApiKey",N.target.value),disabled:!e.enabled,className:"text-sm md:text-base"}),n.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"Required for address validation and distance calculation"})]}),n.jsx(tn,{}),n.jsxs("div",{className:"space-y-3 md:space-y-4",children:[n.jsx("h4",{className:"font-medium text-sm md:text-base",children:"Restaurant Location"}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"restaurantAddress",className:"text-sm font-medium",children:"Restaurant Address"}),n.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[n.jsx(ce,{id:"restaurantAddress",placeholder:"Enter your restaurant address",value:e.restaurantAddress,onChange:N=>p("restaurantAddress",N.target.value),disabled:!e.enabled,className:"flex-1 text-sm md:text-base"}),n.jsxs(z,{onClick:h,disabled:!e.enabled||m,className:"w-full md:w-auto text-xs md:text-sm",size:"sm",children:[n.jsx(so,{className:"w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-2"}),"Set Location"]})]}),e.restaurantLat!==0&&e.restaurantLng!==0&&n.jsxs("p",{className:"text-xs md:text-sm text-green-600",children:[" Location set: ",e.restaurantLat.toFixed(6),", ",e.restaurantLng.toFixed(6)]})]})]}),n.jsx(tn,{}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"maxDistance",className:"text-sm font-medium",children:"Max Delivery Distance (km)"}),n.jsx(ce,{id:"maxDistance",type:"number",min:"1",max:"100",value:e.maxDeliveryDistance,onChange:N=>p("maxDeliveryDistance",parseFloat(N.target.value)),disabled:!e.enabled,className:"text-sm md:text-base"})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"defaultFee",className:"text-sm font-medium",children:"Default Delivery Fee ($)"}),n.jsx(ce,{id:"defaultFee",type:"number",min:"0",step:"0.01",value:e.deliveryFee,onChange:N=>p("deliveryFee",parseFloat(N.target.value)),disabled:!e.enabled,className:"text-sm md:text-base"})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"freeThreshold",className:"text-sm font-medium",children:"Free Delivery Threshold ($)"}),n.jsx(ce,{id:"freeThreshold",type:"number",min:"0",step:"0.01",value:e.freeDeliveryThreshold,onChange:N=>p("freeDeliveryThreshold",parseFloat(N.target.value)),disabled:!e.enabled,className:"text-sm md:text-base"})]})]})]})]}),n.jsxs(ie,{className:"mx-1 md:mx-0",children:[n.jsx(xe,{className:"pb-3 md:pb-6",children:n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs(be,{className:"flex items-center gap-2 text-base md:text-lg",children:[n.jsx(so,{className:"w-4 h-4 md:w-5 md:h-5"}),"Delivery Zones"]}),n.jsxs(z,{onClick:g,disabled:!e.enabled,size:"sm",className:"w-full md:w-auto text-xs md:text-sm",children:[n.jsx(Ar,{className:"w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-2"}),"Add Zone"]})]})}),n.jsxs(oe,{className:"space-y-3 md:space-y-4 px-3 md:px-6",children:[r.map(N=>n.jsxs("div",{className:"border rounded-lg p-3 md:p-4 space-y-3 md:space-y-4",children:[n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:gap-2",children:[n.jsx(ce,{value:N.name,onChange:j=>x(N.id,{name:j.target.value}),className:"w-full md:w-48 text-sm md:text-base",disabled:!e.enabled}),n.jsx(Ue,{variant:N.isActive?"default":"secondary",className:"self-start md:self-auto",children:N.isActive?"Active":"Inactive"})]}),n.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-2",children:[n.jsx(_r,{checked:N.isActive,onCheckedChange:j=>x(N.id,{isActive:j}),disabled:!e.enabled}),n.jsx(z,{onClick:()=>v(N.id),variant:"destructive",size:"sm",disabled:!e.enabled,className:"h-8 w-8 md:h-9 md:w-9",children:n.jsx(Hn,{className:"w-3 h-3 md:w-4 md:h-4"})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Max Distance (km)"}),n.jsx(ce,{type:"number",min:"1",value:N.maxDistance,onChange:j=>x(N.id,{maxDistance:parseFloat(j.target.value)}),disabled:!e.enabled,className:"text-sm md:text-base"})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Delivery Fee ($)"}),n.jsx(ce,{type:"number",min:"0",step:"0.01",value:N.deliveryFee,onChange:j=>x(N.id,{deliveryFee:parseFloat(j.target.value)}),disabled:!e.enabled,className:"text-sm md:text-base"})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Estimated Time"}),n.jsx(ce,{value:N.estimatedTime,onChange:j=>x(N.id,{estimatedTime:j.target.value}),placeholder:"e.g., 30-45 minutes",disabled:!e.enabled,className:"text-sm md:text-base"})]})]})]},N.id)),r.length===0&&n.jsxs("div",{className:"text-center py-6 md:py-8 text-gray-500",children:[n.jsx("p",{className:"mb-3 md:mb-4 text-sm md:text-base",children:"No delivery zones configured."}),n.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:gap-2 md:justify-center",children:[n.jsxs(z,{onClick:g,disabled:!e.enabled,variant:"outline",className:"w-full md:w-auto text-xs md:text-sm",size:"sm",children:[n.jsx(Ar,{className:"w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-2"}),"Add Custom Zone"]}),n.jsx(z,{onClick:y,disabled:!e.enabled,className:"w-full md:w-auto text-xs md:text-sm",size:"sm",children:"Add Default Zones"})]})]})]})]}),n.jsxs(ie,{className:"mx-1 md:mx-0",children:[n.jsx(xe,{className:"pb-3 md:pb-6",children:n.jsxs(be,{className:"flex items-center gap-2 text-base md:text-lg",children:[n.jsx(bs,{className:"w-4 h-4 md:w-5 md:h-5"}),"Test Address Validation"]})}),n.jsxs(oe,{className:"space-y-3 md:space-y-4 px-3 md:px-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"testAddress",className:"text-sm font-medium",children:"Test Address"}),n.jsx(ce,{id:"testAddress",value:a,onChange:N=>i(N.target.value),placeholder:"Enter address to test",disabled:!e.enabled,className:"text-sm md:text-base"})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:"testAmount",className:"text-sm font-medium",children:"Order Amount ($)"}),n.jsx(ce,{id:"testAmount",type:"number",min:"0",step:"0.01",value:o,onChange:N=>l(parseFloat(N.target.value)),disabled:!e.enabled,className:"text-sm md:text-base"})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{className:"text-sm font-medium md:invisible",children:"Test"}),n.jsx(z,{onClick:w,disabled:!e.enabled||m,className:"w-full text-xs md:text-sm",size:"sm",children:m?"Testing...":"Test Address"})]})]}),c&&n.jsxs("div",{className:`p-3 md:p-4 rounded-lg border ${c.isWithinZone?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[n.jsx("h5",{className:"font-medium mb-2 text-sm md:text-base",children:"Test Result:"}),n.jsxs("div",{className:"space-y-1 text-xs md:text-sm",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Address:"})," ",c.formattedAddress]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Distance:"})," ",c.distance.toFixed(2)," km"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Within Zone:"})," ",c.isWithinZone?"Yes":"No"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Delivery Fee:"})," $",c.deliveryFee.toFixed(2)]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Estimated Time:"})," ",c.estimatedTime]}),c.error&&n.jsxs("p",{className:"text-red-600",children:[n.jsx("strong",{children:"Error:"})," ",c.error]})]})]})]})]})]})},HC=()=>{const[e,t]=b.useState([]),[r,s]=b.useState(!0),[a,i]=b.useState(!1),[o,l]=b.useState(!1),{toast:c}=Ee();b.useEffect(()=>{d()},[]);const d=async()=>{try{s(!0);const{data:h,error:g}=await L.from("category_pictures").select("*").order("position");if(g){console.error("Error loading pictures:",g),c({title:"Error",description:"Failed to load category pictures",variant:"destructive"});return}const x=h||[],y=[1,2,3].map(w=>x.find(j=>j.position===w)||{id:`temp-${w}`,image_url:"",alt_text:"",position:w,is_active:!0});t(y)}catch(h){console.error("Error loading pictures:",h),c({title:"Error",description:"Failed to load category pictures",variant:"destructive"})}finally{s(!1)}},m=(h,g,x)=>{t(v=>v.map(y=>y.position===h?{...y,[g]:x}:y)),l(!0)},u=(h,g)=>{m(h,"image_url",g)},f=async h=>{const g=e.find(x=>x.position===h);if(!g||g.id.startsWith("temp-")){m(h,"image_url",""),m(h,"alt_text","");return}try{const{error:x}=await L.from("category_pictures").delete().eq("id",g.id);if(x){console.error("Error deleting picture:",x),c({title:"Error",description:"Failed to delete picture",variant:"destructive"});return}m(h,"image_url",""),m(h,"alt_text",""),m(h,"id",`temp-${h}`),c({title:"Success",description:"Picture deleted successfully"})}catch(x){console.error("Error deleting picture:",x),c({title:"Error",description:"Failed to delete picture",variant:"destructive"})}},p=async()=>{try{i(!0);for(const h of e)if(h.image_url)if(h.id.startsWith("temp-")){const{error:g}=await L.from("category_pictures").insert({image_url:h.image_url,alt_text:h.alt_text||null,position:h.position,is_active:!0});if(g)throw console.error("Error inserting picture:",g),g}else{const{error:g}=await L.from("category_pictures").update({image_url:h.image_url,alt_text:h.alt_text||null,is_active:h.is_active}).eq("id",h.id);if(g)throw console.error("Error updating picture:",g),g}l(!1),c({title:"Success",description:"Category pictures saved successfully"}),await d()}catch(h){console.error("Error saving pictures:",h),c({title:"Error",description:"Failed to save category pictures",variant:"destructive"})}finally{i(!1)}};return r?n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx(Vt,{className:"animate-spin h-8 w-8"})}):n.jsxs("div",{className:"space-y-4 md:space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"text-center md:text-left",children:[n.jsx("h2",{className:"text-lg md:text-2xl font-bold",children:"Category Pictures Manager"}),n.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"Manage the 3 pictures displayed in the Categories section"})]}),n.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[n.jsxs(z,{onClick:d,variant:"outline",disabled:a,className:"w-full md:w-auto text-xs md:text-sm",size:"sm",children:[n.jsx(Vt,{className:"h-3 w-3 md:h-4 md:w-4 mr-1 md:mr-2"}),"Refresh"]}),n.jsxs(z,{onClick:p,disabled:!o||a,className:"w-full md:w-auto text-xs md:text-sm",size:"sm",children:[n.jsx(Wt,{className:"h-3 w-3 md:h-4 md:w-4 mr-1 md:mr-2"}),a?"Saving...":"Save Changes"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:e.map(h=>n.jsxs(ie,{className:"overflow-hidden",children:[n.jsx(xe,{className:"pb-3 md:pb-6",children:n.jsxs(be,{className:"text-base md:text-lg",children:["Picture ",h.position]})}),n.jsxs(oe,{className:"space-y-3 md:space-y-4 px-3 md:px-6",children:[n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{htmlFor:`alt-${h.position}`,className:"text-sm font-medium",children:"Alt Text"}),n.jsx(ce,{id:`alt-${h.position}`,value:h.alt_text||"",onChange:g=>m(h.position,"alt_text",g.target.value),placeholder:"Describe the image...",className:"text-sm md:text-base"})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsx(Z,{className:"text-sm font-medium",children:"Image"}),h.image_url?n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:h.image_url,alt:h.alt_text||`Picture ${h.position}`,className:"w-full h-40 md:h-48 object-cover rounded-lg"}),n.jsx(z,{variant:"destructive",size:"sm",className:"absolute top-2 right-2 h-8 w-8 md:h-9 md:w-9",onClick:()=>f(h.position),children:n.jsx(Hn,{className:"h-3 w-3 md:h-4 md:w-4"})})]}):n.jsx(Gs,{onImageSelected:g=>u(h.position,g),buttonLabel:"Upload Image",className:"w-full",bucketName:"gallery",folderPath:"category-pictures"})]})]})]},h.position))})]})},GC=()=>{const[e,t]=b.useState(!1),[r,s]=b.useState(null),{toast:a}=Ee(),i=[{id:"test-bouquet-1",name:"Test Bouquet - Francesco Fiori",price:25,quantity:1,description:"Beautiful test bouquet for checkout verification",image:"https://images.unsplash.com/photo-1519225421980-715cb0215aed?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"}],o={name:"Test Customer",email:"test@francescofiori.it",phone:"+39 123 456 7890"},l=async()=>{try{const m=`TEST-${Date.now()}`,u=i.reduce((h,g)=>h+g.price*g.quantity,0),{data:f,error:p}=await L.from("orders").insert({order_number:m,customer_name:o.name,customer_email:o.email,customer_phone:o.phone,total_amount:u,status:"payment_pending",payment_status:"pending",notes:"Test order for Stripe checkout verification"}).select().single();if(p)throw p;return await L.from("order_items").insert({order_id:f.id,product_name:i[0].name,quantity:i[0].quantity,price:i[0].price}),f.id}catch(m){throw console.error("Error creating test order:",m),new Error("Failed to create test order")}},c=async()=>{t(!0),s(null);try{const m={configLoaded:!1,edgeFunctionReachable:!1,stripeInitialized:!1,error:void 0};try{const{data:u,error:f}=await L.from("settings").select("value").eq("key","stripeConfig").single();if(!f&&(u!=null&&u.value))m.configLoaded=!0;else throw new Error("Stripe configuration not found")}catch{m.error="Stripe configuration not found in database",s(m);return}try{const u=L.supabaseUrl,f=L.supabaseKey,p=await fetch(`${u}/functions/v1/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify({line_items:[{price_data:{currency:"eur",product_data:{name:"Test"},unit_amount:100},quantity:1}],mode:"payment",customer_email:"test@example.com",success_url:"https://example.com/success",cancel_url:"https://example.com/cancel",metadata:{test:"true"}})});if(p.ok||p.status===400)m.edgeFunctionReachable=!0;else throw new Error(`Edge function returned ${p.status}`)}catch(u){m.error=`Edge function not reachable: ${u.message}`,s(m);return}try{const{loadStripe:u}=await wt(async()=>{const{loadStripe:h}=await import("./stripe-Z1fX3C2C.js");return{loadStripe:h}},[]),{data:f}=await L.from("settings").select("value").eq("key","stripeConfig").single(),p=f==null?void 0:f.value;p!=null&&p.publishableKey&&await u(p.publishableKey)&&(m.stripeInitialized=!0)}catch(u){m.error=`Stripe initialization failed: ${u.message}`}s(m),m.configLoaded&&m.edgeFunctionReachable&&m.stripeInitialized?a({title:"API Test Successful! ",description:"All Stripe integrations are working properly."}):a({title:"API Test Issues Found",description:"Some components need attention. Check the results below.",variant:"destructive"})}catch(m){console.error("API test error:",m),s({configLoaded:!1,edgeFunctionReachable:!1,stripeInitialized:!1,error:m.message})}finally{t(!1)}},d=(m,u)=>n.jsxs("div",{className:"flex items-center gap-2",children:[m?n.jsx(Ke,{className:"h-4 w-4 text-green-500"}):n.jsx(Gn,{className:"h-4 w-4 text-red-500"}),n.jsx("span",{className:"text-sm",children:u}),n.jsx(Ue,{variant:m?"default":"destructive",children:m?"OK":"FAIL"})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{className:"flex items-center gap-2",children:[n.jsx(bs,{className:"h-5 w-5"}),"Stripe API Integration Test"]})}),n.jsxs(oe,{className:"space-y-4",children:[n.jsx("div",{className:"flex gap-3",children:n.jsx(z,{onClick:c,disabled:e,variant:"outline",children:e?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"h-4 w-4 mr-2 animate-spin"}),"Testing API..."]}):n.jsxs(n.Fragment,{children:[n.jsx(bs,{className:"h-4 w-4 mr-2"}),"Test Stripe API"]})})}),r&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[n.jsx("h4",{className:"font-semibold",children:"Test Results:"}),d(r.configLoaded,"Stripe Configuration Loaded"),d(r.edgeFunctionReachable,"Edge Function Reachable"),d(r.stripeInitialized,"Stripe Client Initialized"),r.error&&n.jsxs("div",{className:"bg-red-50 p-3 rounded border border-red-200",children:[n.jsx("p",{className:"text-red-800 text-sm font-medium",children:"Error:"}),n.jsx("p",{className:"text-red-700 text-sm",children:r.error})]})]})]})]}),n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{className:"flex items-center gap-2",children:[n.jsx(Ls,{className:"h-5 w-5"}),"Live Checkout Test"]})}),n.jsx(oe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Test Checkout Flow"}),n.jsxs("p",{className:"text-blue-700 text-sm",children:["This will create a real test order and redirect to Stripe checkout. Use test card: ",n.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"4242 4242 4242 4242"})]})]}),n.jsx(pf,{items:i,customerInfo:o,onCreateOrder:l,onSuccess:()=>{a({title:"Checkout Test Successful! ",description:"The complete checkout flow is working properly."})},onError:m=>{a({title:"Checkout Test Failed",description:m,variant:"destructive"})},children:"Test Stripe Checkout Flow"})]})})]})]})},VC=()=>{const[e,t]=b.useState({publishableKey:"",secretKey:"",webhookSecret:"",isTestMode:!0}),[r,s]=b.useState({secretKey:!1,webhookSecret:!1}),[a,i]=b.useState(!0),[o,l]=b.useState(!1),[c,d]=b.useState({publishableValid:!1,secretValid:!1,webhookValid:!1}),{toast:m}=Ee();b.useEffect(()=>{u()},[]),b.useEffect(()=>{f()},[e]);const u=async()=>{try{i(!0);const{data:x,error:v}=await L.from("settings").select("value").eq("key","stripeConfig").single();!v&&(x!=null&&x.value)&&t(x.value)}catch(x){console.error("Error loading Stripe settings:",x)}finally{i(!1)}},f=()=>{const x=e.publishableKey.startsWith("pk_test_")||e.publishableKey.startsWith("pk_live_"),v=e.secretKey.startsWith("sk_test_")||e.secretKey.startsWith("sk_live_"),y=e.webhookSecret.startsWith("whsec_")||e.webhookSecret==="";d({publishableValid:x,secretValid:v,webhookValid:y})},p=async()=>{try{if(l(!0),!e.publishableKey||!e.secretKey){m({title:"Validation Error",description:"Publishable key and secret key are required.",variant:"destructive"});return}if(!c.publishableValid||!c.secretValid){m({title:"Invalid Keys",description:"Please check that your Stripe keys are in the correct format.",variant:"destructive"});return}console.log("Saving Stripe config:",{...e,secretKey:"[HIDDEN]"});const{data:x,error:v}=await L.from("settings").upsert({key:"stripeConfig",value:e,updated_at:new Date().toISOString()}).select();if(v)throw console.error("Database error:",v),v;console.log("Save successful:",x),m({title:"Settings Saved! ",description:"Stripe configuration has been updated successfully."}),window.stripeConfigCache&&delete window.stripeConfigCache}catch(x){console.error("Error saving Stripe settings:",x);const v=x instanceof Error?x.message:"Unknown error occurred";m({title:"Save Failed",description:`Failed to save Stripe settings: ${v}`,variant:"destructive"})}finally{l(!1)}},h=async()=>{if(!c.publishableValid||!c.secretValid){m({title:"Invalid Keys",description:"Please configure valid Stripe keys before testing.",variant:"destructive"});return}try{const{loadStripe:x}=await wt(async()=>{const{loadStripe:y}=await import("./stripe-Z1fX3C2C.js");return{loadStripe:y}},[]);if(await x(e.publishableKey))m({title:"Connection Successful! ",description:"Stripe keys are valid and connection is working."});else throw new Error("Failed to initialize Stripe")}catch(x){console.error("Stripe test error:",x),m({title:"Connection Failed",description:"Unable to connect to Stripe. Please check your keys.",variant:"destructive"})}},g=(x,v=!1)=>v?n.jsx(ju,{className:"h-4 w-4 text-gray-400"}):x?n.jsx(Ke,{className:"h-4 w-4 text-green-500"}):n.jsx(Gn,{className:"h-4 w-4 text-red-500"});return a?n.jsx(ie,{children:n.jsxs(oe,{className:"flex items-center justify-center py-8",children:[n.jsx(ge,{className:"h-6 w-6 animate-spin mr-2"}),"Loading Stripe settings..."]})}):n.jsx("div",{className:"space-y-6",children:n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{className:"flex items-center gap-2",children:[n.jsx(Ls,{className:"h-6 w-6"}),"Stripe Payment Configuration"]})}),n.jsxs(oe,{children:[n.jsxs(Us,{defaultValue:"keys",className:"w-full",children:[n.jsxs(cn,{className:"grid w-full grid-cols-3",children:[n.jsx(we,{value:"keys",children:"API Keys"}),n.jsx(we,{value:"test",children:"Test Integration"}),n.jsx(we,{value:"settings",children:"Settings"})]}),n.jsxs(Fe,{value:"keys",className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Z,{children:"Mode:"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ue,{variant:e.isTestMode?"default":"secondary",children:e.isTestMode?"Test Mode":"Live Mode"}),n.jsxs(z,{variant:"outline",size:"sm",onClick:()=>t(x=>({...x,isTestMode:!x.isTestMode})),children:["Switch to ",e.isTestMode?"Live":"Test"]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Z,{htmlFor:"publishableKey",children:"Publishable Key *"}),g(c.publishableValid,!e.publishableKey)]}),n.jsx(ce,{id:"publishableKey",placeholder:`pk_${e.isTestMode?"test":"live"}_...`,value:e.publishableKey,onChange:x=>t(v=>({...v,publishableKey:x.target.value}))}),n.jsx("p",{className:"text-xs text-gray-500",children:"Get this from your Stripe Dashboard  Developers  API keys"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Z,{htmlFor:"secretKey",children:"Secret Key *"}),g(c.secretValid,!e.secretKey)]}),n.jsxs("div",{className:"relative",children:[n.jsx(ce,{id:"secretKey",type:r.secretKey?"text":"password",placeholder:`sk_${e.isTestMode?"test":"live"}_...`,value:e.secretKey,onChange:x=>t(v=>({...v,secretKey:x.target.value}))}),n.jsx(z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>s(x=>({...x,secretKey:!x.secretKey})),children:r.secretKey?n.jsx(ja,{className:"h-4 w-4"}):n.jsx(xs,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-xs text-gray-500",children:" Keep this secret! Never share or expose in frontend code."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Z,{htmlFor:"webhookSecret",children:"Webhook Secret (Optional)"}),g(c.webhookValid,!e.webhookSecret)]}),n.jsxs("div",{className:"relative",children:[n.jsx(ce,{id:"webhookSecret",type:r.webhookSecret?"text":"password",placeholder:"whsec_...",value:e.webhookSecret,onChange:x=>t(v=>({...v,webhookSecret:x.target.value}))}),n.jsx(z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>s(x=>({...x,webhookSecret:!x.webhookSecret})),children:r.webhookSecret?n.jsx(ja,{className:"h-4 w-4"}):n.jsx(xs,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-xs text-gray-500",children:"Required for webhook verification. Get from Stripe Dashboard  Webhooks."})]})]}),n.jsx(Fe,{value:"test",className:"space-y-6",children:n.jsx(GC,{})}),n.jsxs(Fe,{value:"settings",className:"space-y-6",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"How to get your Stripe keys:"}),n.jsxs("ol",{className:"text-sm text-blue-700 space-y-1",children:[n.jsxs("li",{children:["1. Go to ",n.jsx("a",{href:"https://dashboard.stripe.com/test/apikeys",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Stripe Dashboard"})]}),n.jsx("li",{children:"2. Navigate to Developers  API keys"}),n.jsx("li",{children:"3. Copy your Publishable key and Secret key"}),n.jsx("li",{children:"4. For webhooks: Go to Developers  Webhooks  Add endpoint"}),n.jsxs("li",{children:["5. Use this URL: ",n.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"https://your-supabase-project.supabase.co/functions/v1/stripe-webhook"})]})]})]}),n.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:" Security Notes:"}),n.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[n.jsx("li",{children:" Never expose secret keys in frontend code"}),n.jsx("li",{children:" Use test keys during development"}),n.jsx("li",{children:" Switch to live keys only for production"}),n.jsx("li",{children:" Regularly rotate your API keys"})]})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[n.jsx(z,{onClick:p,disabled:o||!c.publishableValid||!c.secretValid,className:"flex-1",children:o?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Save Configuration"]})}),n.jsxs(z,{variant:"outline",onClick:h,disabled:!c.publishableValid||!c.secretValid,children:[n.jsx(bs,{className:"h-4 w-4 mr-2"}),"Test Connection"]})]})]})]})})};class WC{constructor(){Ae(this,"settings");Ae(this,"audioContext",null);Ae(this,"isRinging",!1);Ae(this,"ringCount",0);Ae(this,"ringTimeout",null);Ae(this,"ringInterval",null);this.settings={enabled:!0,phoneNumber:"",ringDuration:3,ringInterval:2,maxRings:10,vibrationEnabled:!0,browserNotificationEnabled:!0,customNotificationSound:!1,notificationSoundUrl:"",notificationSoundName:"Default Ring Tone"},this.loadSettings(),this.requestNotificationPermission()}async loadSettings(){try{const{supabase:t}=await wt(async()=>{const{supabase:a}=await Promise.resolve().then(()=>on);return{supabase:a}},void 0),{data:r,error:s}=await t.from("settings").select("value").eq("key","phoneNotificationSettings").single();!s&&r&&(this.settings={...this.settings,...r.value})}catch(t){console.warn("Failed to load phone notification settings:",t);const r=localStorage.getItem("phoneNotificationSettings");r&&(this.settings={...this.settings,...JSON.parse(r)})}}async saveSettings(){try{const{supabase:t}=await wt(async()=>{const{supabase:s}=await Promise.resolve().then(()=>on);return{supabase:s}},void 0),{error:r}=await t.from("settings").upsert({key:"phoneNotificationSettings",value:this.settings});if(r)throw r}catch(t){console.warn("Failed to save phone notification settings:",t),localStorage.setItem("phoneNotificationSettings",JSON.stringify(this.settings))}}initializeAudioContext(){if(!this.audioContext)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.audioContext.state==="suspended"&&this.audioContext.resume().catch(t=>{console.warn("Failed to resume audio context:",t)})}catch(t){console.error("Failed to create audio context:",t),this.audioContext=null}}createPhoneRingTone(){if(!this.audioContext){this.createFallbackRingTone();return}try{const t=this.audioContext.createOscillator(),r=this.audioContext.createOscillator(),s=this.audioContext.createGain();t.frequency.setValueAtTime(440,this.audioContext.currentTime),r.frequency.setValueAtTime(480,this.audioContext.currentTime),t.connect(s),r.connect(s),s.connect(this.audioContext.destination),s.gain.setValueAtTime(0,this.audioContext.currentTime),s.gain.setValueAtTime(.3,this.audioContext.currentTime+.1),s.gain.setValueAtTime(0,this.audioContext.currentTime+1.1),s.gain.setValueAtTime(.3,this.audioContext.currentTime+1.6),s.gain.setValueAtTime(0,this.audioContext.currentTime+2.6),t.start(this.audioContext.currentTime),r.start(this.audioContext.currentTime),t.stop(this.audioContext.currentTime+this.settings.ringDuration),r.stop(this.audioContext.currentTime+this.settings.ringDuration)}catch(t){console.error("Failed to create ring tone with Web Audio API:",t),this.createFallbackRingTone()}}createFallbackRingTone(){try{if(this.settings.customNotificationSound&&this.settings.notificationSoundUrl){const t=new Audio(this.settings.notificationSoundUrl);t.volume=.7,t.play().catch(r=>{console.warn("Failed to play custom notification sound:",r),this.playDefaultRingTone()})}else this.playDefaultRingTone()}catch(t){console.error("Failed to create fallback ring tone:",t),this.playDefaultRingTone()}}playDefaultRingTone(){try{const t=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEaAzKH0fPTgjAHJXfH8N2QQAoUXrTp66hVFApGn+DyvmEaAw==");t.volume=.5,t.play().catch(r=>{console.warn("Failed to play default ring tone:",r)})}catch(t){console.error("Failed to create default ring tone:",t)}}async sendSMSNotification(t,r){if(this.settings.phoneNumber)try{console.log(`SMS would be sent to ${this.settings.phoneNumber}:`),console.log(`New order received: #${t} from ${r}`)}catch(s){console.error("Failed to send SMS notification:",s)}}async requestNotificationPermission(){if("Notification"in window&&this.settings.browserNotificationEnabled)try{await Notification.requestPermission()}catch(t){console.warn("Failed to request notification permission:",t)}}triggerVibration(){if(this.settings.vibrationEnabled&&"vibrate"in navigator)try{navigator.vibrate([500,200,500,200,500])}catch(t){console.warn("Failed to trigger vibration:",t)}}showBrowserNotification(t,r){if(this.settings.browserNotificationEnabled&&"Notification"in window&&Notification.permission==="granted")try{const s=new Notification("New Order Received! ",{body:`Order #${t} from ${r}`,icon:"/favicon.ico",badge:"/favicon.ico",tag:"new-order",requireInteraction:!0,silent:!1});setTimeout(()=>{s.close()},1e4),s.onclick=()=>{window.focus(),s.close()}}catch(s){console.warn("Failed to show browser notification:",s)}}async notifyNewOrder(t,r){this.settings.enabled&&(console.log(` Phone notification for order #${t} from ${r} - Page: ${window.location.pathname}`),await this.sendSMSNotification(t,r),this.showBrowserNotification(t,r),this.triggerVibration(),this.startRinging())}startRinging(){if(this.isRinging)return;this.isRinging=!0,this.ringCount=0,this.initializeAudioContext();const t=()=>{if(this.ringCount>=this.settings.maxRings){this.stopRinging();return}this.createPhoneRingTone(),this.ringCount++,this.ringTimeout=setTimeout(()=>{this.isRinging&&t()},(this.settings.ringDuration+this.settings.ringInterval)*1e3)};t()}stopRinging(){this.isRinging=!1,this.ringCount=0,this.ringTimeout&&(clearTimeout(this.ringTimeout),this.ringTimeout=null),this.ringInterval&&(clearInterval(this.ringInterval),this.ringInterval=null)}updateSettings(t){this.settings={...this.settings,...t},this.saveSettings()}getSettings(){return{...this.settings}}isCurrentlyRinging(){return this.isRinging}getRingCount(){return this.ringCount}updateNotificationSound(t,r){this.settings.customNotificationSound=!0,this.settings.notificationSoundUrl=t,this.settings.notificationSoundName=r,this.saveSettings()}resetToDefaultSound(){this.settings.customNotificationSound=!1,this.settings.notificationSoundUrl="",this.settings.notificationSoundName="Default Ring Tone",this.saveSettings()}testNotificationSound(){this.createFallbackRingTone()}}const ze=new WC,KC=()=>{const{toast:e}=Ee(),[t,r]=b.useState(!1),[s,a]=b.useState(!1),i=()=>{try{r(!0),ze.testNotificationSound(),e({title:"Testing Notification Sound ",description:"Playing the current notification sound..."}),setTimeout(()=>{r(!1)},3e3)}catch(c){console.error("Error testing notification sound:",c),e({title:"Error",description:"Failed to test notification sound",variant:"destructive"}),r(!1)}},o=()=>{try{a(!0),ze.notifyNewOrder("TEST-001","Test Customer"),e({title:"Testing Full Notification ",description:"Simulating a new order notification with sound, vibration, and browser notification",duration:5e3}),setTimeout(()=>{a(!1)},5e3)}catch(c){console.error("Error testing full notification:",c),e({title:"Error",description:"Failed to test full notification",variant:"destructive"}),a(!1)}},l=()=>{try{ze.stopRinging(),e({title:"Notifications Stopped",description:"All notification sounds have been stopped"})}catch(c){console.error("Error stopping notifications:",c),e({title:"Error",description:"Failed to stop notifications",variant:"destructive"})}};return n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{className:"flex items-center gap-2",children:[n.jsx(On,{className:"h-5 w-5"}),"Test Notification Music"]})}),n.jsxs(oe,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs(z,{onClick:i,disabled:t,variant:"outline",className:"flex items-center gap-2 h-20 flex-col",children:[n.jsx(Ko,{className:"h-6 w-6"}),n.jsx("span",{className:"text-sm",children:t?"Playing...":"Test Sound Only"})]}),n.jsxs(z,{onClick:o,disabled:s,className:"flex items-center gap-2 h-20 flex-col bg-emerald-500 hover:bg-emerald-600",children:[n.jsx(Vo,{className:"h-6 w-6"}),n.jsx("span",{className:"text-sm",children:s?"Testing...":"Test Full Notification"})]}),n.jsxs(z,{onClick:l,variant:"destructive",className:"flex items-center gap-2 h-20 flex-col",children:[n.jsx(On,{className:"h-6 w-6"}),n.jsx("span",{className:"text-sm",children:"Stop All Sounds"})]})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-md border border-blue-200",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Test Options:"}),n.jsxs("ul",{className:"text-blue-700 text-sm space-y-1",children:[n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Test Sound Only:"})," Plays just the notification sound"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Test Full Notification:"})," Simulates a complete new order notification (sound + vibration + browser notification)"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Stop All Sounds:"})," Stops any currently playing notification sounds"]})]})]}),n.jsxs("div",{className:"bg-amber-50 p-4 rounded-md border border-amber-200",children:[n.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"Note:"}),n.jsx("p",{className:"text-amber-700 text-sm",children:"Make sure your browser allows notifications and audio playback. Some browsers may block autoplay until you interact with the page first."})]})]})]})},YC=()=>{const{toast:e}=Ee(),[t,r]=b.useState({enabled:!0,customNotificationSound:!1,notificationSoundUrl:"",notificationSoundName:"Default Ring Tone"}),[s,a]=b.useState(!1),[i,o]=b.useState(!0);b.useEffect(()=>{l()},[]);const l=()=>{try{const f=ze.getSettings();r({enabled:f.enabled,customNotificationSound:f.customNotificationSound,notificationSoundUrl:f.notificationSoundUrl,notificationSoundName:f.notificationSoundName})}catch(f){console.error("Error loading notification settings:",f),e({title:"Error",description:"Failed to load notification settings",variant:"destructive"})}finally{o(!1)}},c=f=>{try{const p=f.split("/"),h=p[p.length-1]||"Custom Notification Sound";ze.updateNotificationSound(f,h),r(g=>({...g,customNotificationSound:!0,notificationSoundUrl:f,notificationSoundName:h})),e({title:"Success! ",description:"Custom notification sound uploaded and set"})}catch(p){console.error("Error uploading notification sound:",p),e({title:"Error",description:"Failed to upload notification sound",variant:"destructive"})}},d=()=>{try{ze.resetToDefaultSound(),r(f=>({...f,customNotificationSound:!1,notificationSoundUrl:"",notificationSoundName:"Default Ring Tone"})),e({title:"Reset Complete",description:"Notification sound reset to default ring tone"})}catch(f){console.error("Error resetting notification sound:",f),e({title:"Error",description:"Failed to reset notification sound",variant:"destructive"})}},m=()=>{try{ze.testNotificationSound(),a(!0),setTimeout(()=>{a(!1)},3e3),e({title:"Testing Sound ",description:"Playing notification sound..."})}catch(f){console.error("Error testing notification sound:",f),e({title:"Error",description:"Failed to test notification sound",variant:"destructive"})}},u=f=>{try{ze.updateSettings({enabled:f}),r(p=>({...p,enabled:f})),e({title:f?"Notifications Enabled":"Notifications Disabled",description:f?"Order notifications will now play sounds":"Order notifications are muted"})}catch(p){console.error("Error updating notification settings:",p),e({title:"Error",description:"Failed to update notification settings",variant:"destructive"})}};return i?n.jsx(ie,{children:n.jsx(oe,{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500"})})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs(ie,{children:[n.jsxs(xe,{children:[n.jsxs(be,{className:"flex items-center gap-2",children:[n.jsx(On,{className:"h-5 w-5"}),"Notification Music Settings"]}),n.jsx(pl,{children:"Upload custom notification music that plays when new orders are received"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[n.jsx(_r,{id:"notifications-enabled",checked:t.enabled,onCheckedChange:u}),n.jsx(Z,{htmlFor:"notifications-enabled",children:t.enabled?"Notifications Enabled":"Notifications Disabled"})]})]}),n.jsxs(oe,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{children:"Current Notification Sound"}),n.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-md bg-slate-50 border",children:[n.jsx(ao,{size:20,className:"text-muted-foreground"}),n.jsx("span",{className:"font-medium flex-1 truncate",children:t.notificationSoundName}),n.jsx(z,{type:"button",size:"sm",variant:"ghost",onClick:m,disabled:s,children:s?n.jsx(Au,{size:16}):n.jsx(Ko,{size:16})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{children:"Upload Custom Notification Sound"}),n.jsx(Gs,{onImageSelected:c,buttonLabel:"Upload Audio File",className:"w-full",bucketName:"uploads",folderPath:"notification-sounds",acceptedFileTypes:"audio/*",maxFileSize:5*1024*1024}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Supported formats: MP3, WAV, OGG, M4A (max 5MB)"})]}),t.customNotificationSound&&n.jsx("div",{className:"pt-4 border-t",children:n.jsxs(z,{variant:"outline",onClick:d,className:"text-red-500 border-red-200 hover:bg-red-50 hover:text-red-600",children:[n.jsx(Hn,{size:16,className:"mr-2"}),"Reset to Default Ring Tone"]})}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-md border border-blue-200",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"How it works:"}),n.jsxs("ul",{className:"text-blue-700 text-sm space-y-1",children:[n.jsx("li",{children:" Upload your custom notification sound (music, ringtone, etc.)"}),n.jsx("li",{children:" The sound will play when new orders are received"}),n.jsx("li",{children:" Test the sound using the play button"}),n.jsx("li",{children:" You can reset to the default ring tone anytime"})]})]})]})]}),n.jsx(KC,{})]})},QC=()=>{const[e,t]=b.useState([]),[r,s]=b.useState(!1);Ee();const a=c=>{t(d=>[...d,`${new Date().toLocaleTimeString()}: ${c}`])},i=async()=>{var c,d;s(!0),t([]),a(" Starting hero content debug...");try{a(" Checking database for hero content...");try{const{supabase:p}=await wt(async()=>{const{supabase:x}=await Promise.resolve().then(()=>on);return{supabase:x}},void 0),{data:h,error:g}=await p.from("settings").select("*").eq("key","heroContent").single();g?a(` Database error: ${g.message}`):h?(a(" Found hero content in database:"),a(`   - Heading: ${h.value.heading||"N/A"}`),a(`   - Subheading: ${h.value.subheading||"N/A"}`),a(`   - Background Image: ${h.value.backgroundImage||"N/A"}`),(c=h.value.backgroundImage)!=null&&c.includes("unsplash.com")?a(" Using default Unsplash image"):(d=h.value.backgroundImage)!=null&&d.includes("supabase.co")&&a(" Using custom uploaded image")):a(" No hero content found in database")}catch(p){a(` Error checking database: ${p}`)}a(" Checking hook data..."),a(`   - Heading: ${(heroContent==null?void 0:heroContent.heading)||"N/A"}`),a(`   - Subheading: ${(heroContent==null?void 0:heroContent.subheading)||"N/A"}`),a(`   - Background Image: ${(heroContent==null?void 0:heroContent.backgroundImage)||"N/A"}`),a(" Checking settings service...");const m=await settingsService.getSetting("heroContent",{heading:"Default",subheading:"Default",backgroundImage:"Default"});a(`   - Service Heading: ${(m==null?void 0:m.heading)||"N/A"}`),a(`   - Service Subheading: ${(m==null?void 0:m.subheading)||"N/A"}`),a(`   - Service Background Image: ${(m==null?void 0:m.backgroundImage)||"N/A"}`),a(" Checking content_sections table...");const{data:u}=await supabase.from("content_sections").select("section_key, section_name, updated_at").contains("metadata",{section:"hero"});u&&u.length>0?(a(" Found hero content in content_sections:"),u.forEach(p=>{a(`   - ${p.section_key}: ${p.section_name} (${p.updated_at})`)})):a(" No hero content found in content_sections table"),a(" All settings in database:");const{data:f}=await supabase.from("settings").select("key, updated_at").order("updated_at",{ascending:!1});f==null||f.forEach(p=>{a(`   - ${p.key} (${p.updated_at})`)}),a(" Debug complete!")}catch(m){a(` Debug failed: ${m}`)}s(!1)},o=async()=>{a(" Testing hero content update...");try{const d={heading:"Francesco Fiori & Piante - Test Update "+new Date().toLocaleTimeString(),subheading:"Creazioni floreali uniche - Updated at "+new Date().toLocaleTimeString(),backgroundImage:"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80"};a(" Updating hero content..."),await updateHeroContent(d)?(a(" Hero content update successful"),a(" Waiting 3 seconds to verify save..."),setTimeout(async()=>{var f,p;const{data:u}=await supabase.from("settings").select("*").eq("key","heroContent").single();u?(a(" Verified: Content saved to database"),a(`   - New heading: ${(f=u.value)==null?void 0:f.heading}`),a(`   - New background: ${(p=u.value)==null?void 0:p.backgroundImage}`),a(" Test completed successfully!"),a(" Go to homepage (http://localhost:8484/) to see changes"),a(" You may need to refresh the page to see the new image")):a(" Content not found in database after update")},3e3)):a(" Hero content update failed")}catch(c){a(` Test update failed: ${c}`)}},l=()=>{t([])};return n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsx(be,{children:"Hero Content Debugger"})}),n.jsxs(oe,{className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(z,{onClick:i,disabled:r,className:"flex-1",children:r?"Debugging...":"Debug Hero Content"}),n.jsx(z,{onClick:o,disabled:r,variant:"outline",className:"flex-1",children:"Test Update"}),n.jsx(z,{onClick:l,variant:"ghost",children:"Clear"})]}),e.length>0&&n.jsxs("div",{className:"bg-gray-100 p-4 rounded-md max-h-96 overflow-y-auto",children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Debug Results:"}),e.map((c,d)=>n.jsx("div",{className:"text-sm font-mono whitespace-pre-wrap",children:c},d))]})]})]})},ZC=()=>{const[e,t]=b.useState(!1),[r,s,a]=yf(),[i,o]=b.useState({heading:"Francesco Fiori & Piante",subheading:"Scopri l'eleganza floreale firmata Francesco: fiori, piante e creazioni per ogni occasione. ",backgroundImage:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2071&q=80"}),{toast:l}=Ee();b.useEffect(()=>{r&&!a&&o({heading:r.heading||"Francesco Fiori & Piante",subheading:r.subheading||"Scopri l'eleganza floreale firmata Francesco: fiori, piante e creazioni per ogni occasione. ",backgroundImage:r.backgroundImage||"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2071&q=80"})},[r,a]);const c=async()=>{t(!0);try{if(await s(i))window.dispatchEvent(new CustomEvent("heroContentUpdated",{detail:i})),l({title:"Success! ",description:"Hero content updated successfully"});else throw new Error("Failed to save hero content")}catch(h){console.error("Error saving hero content:",h),l({title:"Error",description:"Failed to save hero content. Please try again.",variant:"destructive"})}finally{t(!1)}},d=()=>{r&&o({heading:r.heading||"Francesco Fiori & Piante",subheading:r.subheading||"Scopri l'eleganza floreale firmata Francesco: fiori, piante e creazioni per ogni occasione. ",backgroundImage:r.backgroundImage||"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2071&q=80"})},m=h=>{o(g=>({...g,heading:h}))},u=h=>{o(g=>({...g,subheading:h}))},f=h=>{console.log(" HeroContentEditor: Background image updated:",h),o(g=>({...g,backgroundImage:h}))};if(a)return n.jsx(ie,{children:n.jsx(oe,{className:"flex items-center justify-center h-32",children:n.jsx(ge,{className:"h-6 w-6 animate-spin"})})});const p=i.heading!==((r==null?void 0:r.heading)||"")||i.subheading!==((r==null?void 0:r.subheading)||"")||i.backgroundImage!==((r==null?void 0:r.backgroundImage)||"");return n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{className:"flex items-center justify-between",children:["Hero Section Editor",n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(z,{onClick:d,variant:"outline",size:"sm",disabled:!p||e,children:[n.jsx(Vt,{className:"h-4 w-4 mr-1"}),"Reset"]}),n.jsx(z,{onClick:c,disabled:!p||e,size:"sm",children:e?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"h-4 w-4 mr-1 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"h-4 w-4 mr-1"}),"Save Changes"]})})]})]})}),n.jsxs(oe,{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Hero Heading"}),n.jsx(ce,{value:i.heading,onChange:h=>m(h.target.value),placeholder:"Enter hero section heading",className:"w-full"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Hero Subheading"}),n.jsx(Qt,{value:i.subheading,onChange:h=>u(h.target.value),placeholder:"Enter hero section subheading",className:"w-full",rows:3})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Background Image"}),n.jsx(Gs,{currentImage:i.backgroundImage,onImageSelected:f,bucketName:"uploads",folderPath:"hero-images",buttonLabel:"Upload Hero Image"}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Upload a high-quality image for the hero section background. Recommended size: 2000x1000px or larger."})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h4",{className:"text-sm font-medium mb-3",children:"Preview"}),n.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-gray-500",children:"Heading:"}),n.jsx("p",{className:"font-semibold",children:i.heading||"No heading set"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-gray-500",children:"Subheading:"}),n.jsx("p",{className:"text-sm",children:i.subheading||"No subheading set"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-gray-500",children:"Background Image:"}),i.backgroundImage?n.jsx("div",{className:"mt-2",children:n.jsx("img",{src:i.backgroundImage,alt:"Hero background preview",className:"w-full h-24 object-cover rounded border",onError:h=>{const g=h.target;g.src="/placeholder.svg"}})}):n.jsx("p",{className:"text-sm text-gray-400",children:"No background image set"})]})]})})]}),p&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:n.jsx("p",{className:"text-sm text-yellow-800",children:' You have unsaved changes. Click "Save Changes" to apply them to your website.'})})]})]})},JC=()=>{const[e,t]=b.useState(!1),[r,s]=b.useState([]),{toast:a}=Ee(),i="+393498851455",o=async()=>{t(!0),s([]);const l=c=>{s(d=>[...d,c])};try{l(" Starting phone number update..."),l(" Updating contact content...");const{data:c,error:d}=await L.from("settings").select("value").eq("key","contactContent").single();if(d)l(` Error fetching current contact: ${d.message}`);else{const m={...c.value,phone:i},{error:u}=await L.from("settings").update({value:m}).eq("key","contactContent");l(u?` Error updating contact: ${u.message}`:" Contact content updated successfully")}l(" Updating localStorage...");try{const m=localStorage.getItem("contactContent");if(m){const u=JSON.parse(m);u.phone=i,localStorage.setItem("contactContent",JSON.stringify(u)),l(" localStorage updated successfully")}else{const u={address:"Piazza della Repubblica, 10100 Torino TO",phone:i,email:"info@francescofiori.it",mapUrl:"https://maps.google.com",hours:"Lun-Dom: 08:00 - 19:00"};localStorage.setItem("contactContent",JSON.stringify(u)),l(" localStorage created with new phone number")}}catch(m){l(` localStorage update failed: ${m}`)}l(" Triggering content refresh..."),window.dispatchEvent(new CustomEvent("contactContentUpdated",{detail:{phone:i}})),l(" Phone number update completed successfully!"),l(` New phone number: ${i}`),a({title:"Phone Number Updated! ",description:`All instances updated to ${i}`})}catch(c){l(` Unexpected error: ${c}`),a({title:"Update Failed",description:"An error occurred while updating the phone number",variant:"destructive"})}finally{t(!1)}};return n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{className:"flex items-center gap-2",children:[n.jsx(Wa,{className:"h-5 w-5"}),"Phone Number Updater"]})}),n.jsxs(oe,{className:"space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Update Phone Number"}),n.jsxs("p",{className:"text-sm text-blue-700 mb-3",children:["This will update the phone number to ",n.jsx("strong",{children:i})," throughout the entire website:"]}),n.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[n.jsx("li",{children:" Contact section display"}),n.jsx("li",{children:" Order page contact information"}),n.jsx("li",{children:" Database settings"}),n.jsx("li",{children:" Local storage cache"})]})]}),n.jsx(z,{onClick:o,disabled:e,className:"w-full",children:e?n.jsxs(n.Fragment,{children:[n.jsx(en,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating Phone Number..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Update Phone Number to ",i]})}),r.length>0&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg max-h-64 overflow-y-auto",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Update Progress:"}),n.jsx("div",{className:"space-y-1 text-sm font-mono",children:r.map((l,c)=>n.jsx("div",{className:"text-gray-700",children:l},c))})]})]})]})},XC=()=>{const[e,t]=b.useState(!1),[r,s]=b.useState([]),{toast:a}=Ee(),i=c=>{s(d=>[...d,c])},o=async()=>{t(!0),s([]);try{i(" Starting hero image database fix..."),i(" Checking current hero content...");const c=await sr.getSetting("heroContent");i(c?` Found hero content: ${JSON.stringify(c)}`:" No hero content found in database");const d={heading:"Francesco Fiori & Piante",subheading:"Scopri l'eleganza floreale firmata Francesco: fiori, piante e creazioni per ogni occasione. ",backgroundImage:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2071&q=80"};i(" Updating hero content in database..."),await sr.updateSetting("heroContent",d),i(" Hero content updated in database"),i(" Updating localStorage..."),localStorage.setItem("heroContent",JSON.stringify(d)),i(" localStorage updated"),i(" Triggering hero content update event..."),window.dispatchEvent(new CustomEvent("heroContentUpdated",{detail:d})),i(" Hero content update event triggered"),i(" Refreshing page to apply changes..."),setTimeout(()=>{window.location.reload()},2e3),i(" Hero image fix completed successfully!"),a({title:"Hero Image Fixed! ",description:"The hero image should now load properly from the database"})}catch(c){i(` Error fixing hero image: ${c}`),a({title:"Fix Failed",description:"An error occurred while fixing the hero image",variant:"destructive"})}finally{t(!1)}},l=async()=>{var c;t(!0),s([]);try{i(" Testing hero content database connection...");const d=await sr.getSetting("heroContent");d?(i(" Hero content found in database:"),i(`    Heading: ${d.heading}`),i(`    Subheading: ${(c=d.subheading)==null?void 0:c.substring(0,50)}...`),i(`    Background Image: ${d.backgroundImage}`)):i(" No hero content found in database");const m=await sr.getSetting("logoSettings");m?(i(" Logo settings found in database:"),i(`    Logo URL: ${m.logoUrl}`),i(`    Alt Text: ${m.altText}`)):i(" No logo settings found in database");const u=localStorage.getItem("heroContent");i(u?" Hero content found in localStorage":" No hero content in localStorage")}catch(d){i(` Error testing hero content: ${d}`)}finally{t(!1)}};return n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{className:"flex items-center gap-2",children:[n.jsx(Wo,{className:"h-5 w-5"}),"Hero Image Database Fixer"]})}),n.jsxs(oe,{className:"space-y-4",children:[n.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"Hero Image Issue"}),n.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"If the hero image is showing the default placeholder instead of the uploaded image, this tool will fix the database connection and ensure proper image loading."}),n.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[n.jsx("li",{children:" Checks database hero content"}),n.jsx("li",{children:" Updates localStorage cache"}),n.jsx("li",{children:" Triggers content refresh events"}),n.jsx("li",{children:" Forces page reload to apply changes"})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(z,{onClick:l,disabled:e,variant:"outline",className:"flex-1",children:e?n.jsxs(n.Fragment,{children:[n.jsx(Vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Testing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(en,{className:"h-4 w-4 mr-2"}),"Test Database Connection"]})}),n.jsx(z,{onClick:o,disabled:e,className:"flex-1",children:e?n.jsxs(n.Fragment,{children:[n.jsx(Vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Fixing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Fix Hero Image"]})})]}),r.length>0&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg max-h-64 overflow-y-auto",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Fix Progress:"}),n.jsx("div",{className:"space-y-1 text-sm font-mono",children:r.map((c,d)=>n.jsx("div",{className:"text-gray-700",children:c},d))})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"How to Upload New Hero Image"}),n.jsxs("ol",{className:"text-sm text-blue-700 space-y-1",children:[n.jsx("li",{children:'1. Go to the "Hero Section" tab in admin panel'}),n.jsx("li",{children:'2. Click "Upload Hero Image" button'}),n.jsx("li",{children:"3. Select your image (recommended: 2000x1000px or larger)"}),n.jsx("li",{children:'4. Click "Save Changes"'}),n.jsx("li",{children:"5. The new image will appear on the homepage"})]})]})]})]})},e2=()=>{var x,v;const{toast:e}=Ee(),[t,r]=b.useState(null),[s,a]=b.useState(!1),[i,o]=b.useState(!1),{data:l,isLoading:c,refetch:d,error:m}=js({queryKey:["content-sections"],queryFn:async()=>{try{const{data:y,error:w}=await L.from("content_sections").select("*").order("section_key");return w?(console.error("[Admin] Database error:",w),[]):y||[]}catch(y){return console.error("[Admin] Query error:",y),[]}},retry:!1,enabled:!0,staleTime:0,cacheTime:0}),u=async(y,w)=>{r(y);try{const{error:N}=await L.from("content_sections").update({content_value:w}).eq("id",y);if(N)throw N;e({title:"Success",description:"Content updated successfully"}),d()}catch{e({title:"Error",description:"Failed to update content",variant:"destructive"})}finally{r(null)}},f=async()=>{o(!0);try{const y=await vf();e(y?{title:"Connection Success! ",description:"Database connection is working properly"}:{title:"Connection Failed",description:"Unable to connect to database. Check console for details.",variant:"destructive"})}catch(y){console.error("[Admin] Connection test error:",y),e({title:"Connection Error",description:`Connection test failed: ${y.message}`,variant:"destructive"})}finally{o(!1)}},p=async()=>{a(!0);try{await ni()?(e({title:"Success! ",description:"Database initialized with default content, categories, and products"}),d()):e({title:"Error",description:"Failed to initialize database. Check console for details.",variant:"destructive"})}catch(y){console.error("[Admin] Initialization error:",y),e({title:"Error",description:`Failed to initialize: ${y.message}`,variant:"destructive"})}finally{a(!1)}},h=async()=>{try{const y=[{image_url:"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",alt_text:"Beautiful fresh flowers",position:1,is_active:!0},{image_url:"https://images.unsplash.com/photo-1440342359743-84fcb8c21f21?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",alt_text:"Elegant floral arrangement",position:2,is_active:!0},{image_url:"https://images.unsplash.com/photo-1416879595882-3373a0480b5b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",alt_text:"Colorful flower bouquet",position:3,is_active:!0}],{error:w}=await L.from("category_pictures").upsert(y,{onConflict:"position"});if(w)throw w;e({title:"Success",description:"Category pictures initialized with default images"})}catch(y){console.error("Error initializing category pictures:",y),e({title:"Error",description:"Failed to initialize category pictures",variant:"destructive"})}};if(c)return n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ge,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading admin panel..."})]})});m&&console.error("[Admin] Query error detected:",m);const g=l==null?void 0:l.reduce((y,w)=>{var j;const N=((j=w.metadata)==null?void 0:j.section)||"other";return y[N]||(y[N]=[]),y[N].push(w),y},{});return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 animate-fade-in-up",children:n.jsx("div",{className:"pt-16 md:pt-20 pb-4 md:pb-8",children:n.jsxs("div",{className:"container mx-auto px-3 md:px-4",children:[n.jsx("div",{className:"mb-4 md:mb-8 animate-fade-in-down",children:n.jsxs("div",{className:"flex flex-col gap-3 md:gap-4",children:[n.jsxs("div",{className:"text-center md:text-left animate-fade-in-left",children:[n.jsx("h1",{className:"text-xl md:text-3xl font-bold text-gray-900 mb-1 md:mb-2 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Admin Panel"}),n.jsx("p",{className:"text-xs md:text-base text-gray-600",children:"Manage all website content, text, images, and orders"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 md:flex md:flex-row md:gap-2 md:justify-center lg:justify-end animate-fade-in-right",children:[n.jsx(z,{onClick:f,disabled:i,variant:"outline",className:"flex flex-col md:flex-row items-center gap-1 md:gap-2 hover-lift text-xs p-2 md:p-3",size:"sm",children:i?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"h-3 w-3 md:h-4 md:w-4 animate-spin"}),n.jsx("span",{className:"text-xs",children:"Test..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(en,{className:"h-3 w-3 md:h-4 md:w-4"}),n.jsx("span",{className:"text-xs md:text-sm",children:"Test"})]})}),n.jsx(z,{onClick:p,disabled:s,variant:"outline",className:"flex flex-col md:flex-row items-center gap-1 md:gap-2 hover-lift text-xs p-2 md:p-3",size:"sm",children:s?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"h-3 w-3 md:h-4 md:w-4 animate-spin"}),n.jsx("span",{className:"text-xs",children:"Init..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(en,{className:"h-3 w-3 md:h-4 md:w-4"}),n.jsx("span",{className:"text-xs md:text-sm",children:"Init DB"})]})}),n.jsxs(z,{onClick:h,variant:"outline",className:"flex flex-col md:flex-row items-center gap-1 md:gap-2 hover-lift text-xs p-2 md:p-3",size:"sm",children:[n.jsx(Vt,{className:"h-3 w-3 md:h-4 md:w-4"}),n.jsx("span",{className:"text-xs md:text-sm",children:"Gallery"})]})]})]})}),(m||!l||l.length===0)&&n.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl p-4 mb-6 animate-slide-in-up shadow-lg",children:[n.jsx("h3",{className:"text-yellow-800 font-medium mb-2 text-sm md:text-base",children:"Database Notice"}),n.jsx("p",{className:"text-yellow-700 text-xs md:text-sm mb-3",children:m?`Database connection issue: ${m.message}. Some features may not work properly.`:"No content sections found. You may need to initialize the database."}),n.jsx(z,{onClick:p,disabled:s,size:"sm",variant:"outline",className:"hover-lift",children:s?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"h-3 w-3 mr-1 animate-spin"}),n.jsx("span",{className:"text-xs",children:"Initializing..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(en,{className:"h-3 w-3 mr-1"}),n.jsx("span",{className:"text-xs",children:"Initialize Database"})]})})]}),n.jsxs(Us,{defaultValue:"phone",className:"space-y-3 md:space-y-6 animate-scale-in",children:[n.jsx("div",{className:"block md:hidden",children:n.jsxs(cn,{className:"grid grid-cols-2 gap-2 mb-4 h-auto bg-transparent p-0",children:[n.jsxs(we,{value:"phone",className:"flex flex-col items-center gap-2 p-3 bg-white/90 rounded-lg shadow-sm border border-blue-200 hover:bg-blue-50 transition-all duration-200 hover-scale data-[state=active]:bg-blue-100",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-blue-600 text-sm",children:""})}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Phone"})]}),n.jsxs(we,{value:"hero",className:"flex flex-col items-center gap-2 p-3 bg-white/90 rounded-lg shadow-sm border border-purple-200 hover:bg-purple-50 transition-all duration-200 hover-scale data-[state=active]:bg-purple-100",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-purple-600 text-sm",children:""})}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Hero"})]}),n.jsxs(we,{value:"logo",className:"flex flex-col items-center gap-2 p-3 bg-white/90 rounded-lg shadow-sm border border-green-200 hover:bg-green-50 transition-all duration-200 hover-scale data-[state=active]:bg-green-100",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-green-600 text-sm",children:""})}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Logo"})]}),n.jsxs(we,{value:"categories",className:"flex flex-col items-center gap-2 p-3 bg-white/90 rounded-lg shadow-sm border border-orange-200 hover:bg-orange-50 transition-all duration-200 hover-scale data-[state=active]:bg-orange-100",children:[n.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-orange-600 text-sm",children:""})}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Categories"})]}),n.jsxs(we,{value:"category-pics",className:"flex flex-col items-center gap-2 p-3 bg-white/90 rounded-lg shadow-sm border border-pink-200 hover:bg-pink-50 transition-all duration-200 hover-scale data-[state=active]:bg-pink-100",children:[n.jsx("div",{className:"w-8 h-8 bg-pink-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-pink-600 text-sm",children:""})}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Pictures"})]}),n.jsxs(we,{value:"products",className:"flex flex-col items-center gap-2 p-3 bg-white/90 rounded-lg shadow-sm border border-indigo-200 hover:bg-indigo-50 transition-all duration-200 hover-scale data-[state=active]:bg-indigo-100",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-indigo-600 text-sm",children:""})}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Products"})]}),n.jsxs(we,{value:"gallery",className:"flex flex-col items-center gap-2 p-3 bg-white/90 rounded-lg shadow-sm border border-teal-200 hover:bg-teal-50 transition-all duration-200 hover-scale data-[state=active]:bg-teal-100",children:[n.jsx("div",{className:"w-8 h-8 bg-teal-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-teal-600 text-sm",children:""})}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Gallery"})]}),n.jsxs(we,{value:"about",className:"flex flex-col items-center gap-2 p-3 bg-white/90 rounded-lg shadow-sm border border-cyan-200 hover:bg-cyan-50 transition-all duration-200 hover-scale data-[state=active]:bg-cyan-100",children:[n.jsx("div",{className:"w-8 h-8 bg-cyan-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-cyan-600 text-sm",children:""})}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"About"})]}),n.jsxs(we,{value:"orders",className:"flex flex-col items-center gap-2 p-3 bg-white/90 rounded-lg shadow-sm border border-red-200 hover:bg-red-50 transition-all duration-200 hover-scale data-[state=active]:bg-red-100",children:[n.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-red-600 text-sm",children:""})}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Orders"})]}),n.jsxs(we,{value:"shipping",className:"flex flex-col items-center gap-2 p-3 bg-white/90 rounded-lg shadow-sm border border-yellow-200 hover:bg-yellow-50 transition-all duration-200 hover-scale data-[state=active]:bg-yellow-100",children:[n.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-yellow-600 text-sm",children:""})}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Shipping"})]}),n.jsxs(we,{value:"stripe",className:"flex flex-col items-center gap-2 p-3 bg-white/90 rounded-lg shadow-sm border border-violet-200 hover:bg-violet-50 transition-all duration-200 hover-scale data-[state=active]:bg-violet-100",children:[n.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-violet-600 text-sm",children:""})}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Stripe"})]}),n.jsxs(we,{value:"notifications",className:"flex flex-col items-center gap-2 p-3 bg-white/90 rounded-lg shadow-sm border border-rose-200 hover:bg-rose-50 transition-all duration-200 hover-scale data-[state=active]:bg-rose-100",children:[n.jsx("div",{className:"w-8 h-8 bg-rose-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-rose-600 text-sm",children:""})}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Music"})]})]})}),n.jsx("div",{className:"hidden md:block",children:n.jsxs(cn,{className:"grid grid-cols-6 lg:grid-cols-12 w-full gap-1 p-1 bg-white/80 backdrop-blur-sm rounded-xl shadow-lg",children:[n.jsx(we,{value:"phone",className:"text-sm px-3 py-2 hover-scale",children:"Phone"}),n.jsx(we,{value:"hero",className:"text-sm px-3 py-2 hover-scale",children:"Hero"}),n.jsx(we,{value:"logo",className:"text-sm px-3 py-2 hover-scale",children:"Logo"}),n.jsx(we,{value:"categories",className:"text-sm px-3 py-2 hover-scale",children:"Categories"}),n.jsx(we,{value:"category-pics",className:"text-sm px-3 py-2 hover-scale",children:"Pictures"}),n.jsx(we,{value:"products",className:"text-sm px-3 py-2 hover-scale",children:"Products"}),n.jsx(we,{value:"gallery",className:"text-sm px-3 py-2 hover-scale",children:"Gallery"}),n.jsx(we,{value:"about",className:"text-sm px-3 py-2 hover-scale",children:"About"}),n.jsx(we,{value:"orders",className:"text-sm px-3 py-2 hover-scale",children:"Orders"}),n.jsx(we,{value:"shipping",className:"text-sm px-3 py-2 hover-scale",children:"Shipping"}),n.jsx(we,{value:"stripe",className:"text-sm px-3 py-2 hover-scale",children:"Stripe"}),n.jsx(we,{value:"notifications",className:"text-sm px-3 py-2 hover-scale",children:"Music"})]})}),n.jsx(Fe,{value:"phone",className:"space-y-2 md:space-y-4 animate-fade-in-up",children:n.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-3 md:p-6 shadow-lg border border-blue-100",children:[n.jsx("h2",{className:"text-base md:text-2xl font-semibold mb-2 md:mb-4 text-blue-800 animate-fade-in-left",children:"Phone Number Update"}),n.jsx("div",{className:"animate-fade-in-right animate-stagger-1",children:n.jsx(JC,{})})]})}),n.jsx(Fe,{value:"hero",className:"space-y-2 md:space-y-4 animate-fade-in-up",children:n.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-3 md:p-6 shadow-lg border border-purple-100",children:[n.jsx("h2",{className:"text-base md:text-2xl font-semibold mb-2 md:mb-4 text-purple-800 animate-fade-in-left",children:"Hero Section Content"}),n.jsxs("div",{className:"space-y-3 md:space-y-4 animate-fade-in-right",children:[n.jsx("div",{className:"animate-stagger-1",children:n.jsx(XC,{})}),n.jsx("div",{className:"animate-stagger-2",children:n.jsx(ZC,{})}),n.jsx("div",{className:"animate-stagger-3",children:n.jsx(QC,{})})]})]})}),n.jsx(Fe,{value:"logo",className:"space-y-2 md:space-y-4 animate-fade-in-up",children:n.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-3 md:p-6 shadow-lg border border-green-100",children:[n.jsx("h2",{className:"text-base md:text-2xl font-semibold mb-2 md:mb-4 text-green-800 animate-fade-in-left",children:"Logo Settings"}),n.jsx("div",{className:"animate-fade-in-right animate-stagger-1",children:n.jsx(LC,{})})]})}),n.jsx(Fe,{value:"categories",className:"space-y-2 md:space-y-4 animate-fade-in-up",children:n.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-3 md:p-6 shadow-lg border border-orange-100",children:[n.jsx("h2",{className:"text-base md:text-2xl font-semibold mb-2 md:mb-4 text-orange-800 animate-fade-in-left",children:"Categories Content"}),n.jsx("div",{className:"space-y-3 md:space-y-4",children:(x=g==null?void 0:g.categories)==null?void 0:x.map((y,w)=>n.jsx("div",{className:`animate-fade-in-right animate-stagger-${Math.min(w+1,5)}`,children:n.jsx(qi,{section:y,onSave:u,saving:t===y.id})},y.id))})]})}),n.jsx(Fe,{value:"category-pics",className:"space-y-2 md:space-y-4 animate-fade-in-up",children:n.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-3 md:p-6 shadow-lg border border-pink-100",children:n.jsx("div",{className:"animate-scale-in",children:n.jsx(HC,{})})})}),n.jsx(Fe,{value:"products",className:"space-y-2 md:space-y-4 animate-fade-in-up",children:n.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-3 md:p-6 shadow-lg border border-indigo-100",children:n.jsx("div",{className:"animate-slide-in-up",children:n.jsx(MC,{})})})}),n.jsx(Fe,{value:"gallery",className:"space-y-2 md:space-y-4 animate-fade-in-up",children:n.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-3 md:p-6 shadow-lg border border-teal-100",children:n.jsx("div",{className:"animate-scale-in",children:n.jsx(eC,{})})})}),n.jsx(Fe,{value:"about",className:"space-y-2 md:space-y-4 animate-fade-in-up",children:n.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-3 md:p-6 shadow-lg border border-cyan-100",children:[n.jsx("h2",{className:"text-base md:text-2xl font-semibold mb-2 md:mb-4 text-cyan-800 animate-fade-in-left",children:"About Section Content"}),n.jsx("div",{className:"space-y-3 md:space-y-4",children:(v=g==null?void 0:g.about)==null?void 0:v.map((y,w)=>n.jsx("div",{className:`animate-fade-in-right animate-stagger-${Math.min(w+1,5)}`,children:n.jsx(qi,{section:y,onSave:u,saving:t===y.id})},y.id))})]})}),n.jsx(Fe,{value:"orders",className:"space-y-2 md:space-y-4 animate-fade-in-up",children:n.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-3 md:p-6 shadow-lg border border-red-100",children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:" Dedicated Order Dashboard"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Order management has been moved to a dedicated dashboard with enhanced features:"}),n.jsxs("ul",{className:"text-left text-sm text-gray-600 mb-6 space-y-2 max-w-md mx-auto",children:[n.jsx("li",{children:" Real-time notifications even when screen is off"}),n.jsx("li",{children:" Background processing and sync"}),n.jsx("li",{children:" Comprehensive system testing"}),n.jsx("li",{children:" Enhanced mobile experience"}),n.jsx("li",{children:" Persistent notifications"})]}),n.jsx("a",{href:"/orders",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:" Open Order Dashboard"})]})})}),n.jsx(Fe,{value:"shipping",className:"space-y-2 md:space-y-4 animate-fade-in-up",children:n.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-3 md:p-6 shadow-lg border border-yellow-100",children:n.jsx("div",{className:"animate-scale-in",children:n.jsx(UC,{})})})}),n.jsx(Fe,{value:"stripe",className:"space-y-2 md:space-y-4 animate-fade-in-up",children:n.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-3 md:p-6 shadow-lg border border-violet-100",children:n.jsx("div",{className:"animate-fade-in-right",children:n.jsx(VC,{})})})}),n.jsx(Fe,{value:"notifications",className:"space-y-2 md:space-y-4 animate-fade-in-up",children:n.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-3 md:p-6 shadow-lg border border-rose-100",children:n.jsx("div",{className:"animate-bounce-gentle",children:n.jsx(YC,{})})})}),n.jsxs(Fe,{value:"all",className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"All Content Sections"}),l==null?void 0:l.map(y=>n.jsx(qi,{section:y,onSave:u,saving:t===y.id},y.id))]})]})]})})})},t2=()=>{const[e,t]=b.useState(!1),[r,s]=b.useState({customerName:"",customerEmail:"",customerPhone:"",category:"",productDescription:"",quantity:1,specialRequests:"",deliveryDate:"",billingAddress:{street:"",city:"",postalCode:"",country:"Italy"},shippingAddress:{street:"",city:"",postalCode:"",country:"Italy",sameAsBilling:!0}}),{toast:a}=Ee(),i=[{value:"matrimoni",label:"Matrimoni - Wedding Arrangements"},{value:"fiori_piante",label:"Fiori & Piante - Fresh Flowers & Plants"},{value:"fiori_finti",label:"Fiori Finti - Artificial Flowers"},{value:"funerali",label:"Funerali - Funeral Arrangements"}],o=(m,u)=>{if(m.includes(".")){const[f,p]=m.split(".");s(h=>({...h,[f]:{...h[f],[p]:u}}))}else s(f=>({...f,[m]:u}))},l=()=>{const m=Date.now().toString(),u=Math.random().toString(36).substring(2,8).toUpperCase();return`ORD-${m.slice(-6)}-${u}`},c=()=>({matrimoni:150,fiori_piante:50,fiori_finti:80,funerali:120}[r.category]||50)*r.quantity,d=async m=>{var u;m.preventDefault(),t(!0);try{if(!r.customerName||!r.customerEmail||!r.category)throw new Error("Please fill in all required fields");const f=l(),p=c(),h=r.billingAddress,g=r.shippingAddress.sameAsBilling?r.billingAddress:r.shippingAddress,{data:x,error:v}=await L.from("orders").insert({order_number:f,customer_name:r.customerName,customer_email:r.customerEmail,customer_phone:r.customerPhone||null,total_amount:p,status:"pending",billing_address:h,shipping_address:g,notes:`Category: ${r.category}
Product: ${r.productDescription}
Quantity: ${r.quantity}
Special Requests: ${r.specialRequests}
Delivery Date: ${r.deliveryDate}`}).select().single();if(v)throw v;const{error:y}=await L.from("order_items").insert({order_id:x.id,product_id:"custom-order",product_name:`${(u=i.find(N=>N.value===r.category))==null?void 0:u.label} - ${r.productDescription}`,quantity:r.quantity,price:p/r.quantity});if(y)throw y;const{error:w}=await L.from("order_notifications").insert({order_id:x.id,notification_type:"new_order",is_read:!1});w&&console.error("Failed to create notification:",w),a({title:"Order Submitted Successfully! ",description:`Your order #${f} has been received. We'll contact you soon to confirm details.`}),s({customerName:"",customerEmail:"",customerPhone:"",category:"",productDescription:"",quantity:1,specialRequests:"",deliveryDate:"",billingAddress:{street:"",city:"",postalCode:"",country:"Italy"},shippingAddress:{street:"",city:"",postalCode:"",country:"Italy",sameAsBilling:!0}})}catch(f){console.error("Order submission error:",f),a({title:"Order Submission Failed",description:f.message||"Please try again or contact us directly.",variant:"destructive"})}finally{t(!1)}};return n.jsxs(ie,{className:"w-full max-w-4xl mx-auto",children:[n.jsx(xe,{children:n.jsxs(be,{className:"flex items-center gap-2",children:[n.jsx(rn,{className:"h-6 w-6"}),"Place Your Order"]})}),n.jsx(oe,{children:n.jsxs("form",{onSubmit:d,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Z,{htmlFor:"customerName",className:"flex items-center gap-2",children:[n.jsx(Ou,{className:"h-4 w-4"}),"Full Name *"]}),n.jsx(ce,{id:"customerName",value:r.customerName,onChange:m=>o("customerName",m.target.value),placeholder:"Enter your full name",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Z,{htmlFor:"customerEmail",className:"flex items-center gap-2",children:[n.jsx(Du,{className:"h-4 w-4"}),"Email Address *"]}),n.jsx(ce,{id:"customerEmail",type:"email",value:r.customerEmail,onChange:m=>o("customerEmail",m.target.value),placeholder:"Enter your email",required:!0})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Z,{htmlFor:"customerPhone",className:"flex items-center gap-2",children:[n.jsx(Wa,{className:"h-4 w-4"}),"Phone Number"]}),n.jsx(ce,{id:"customerPhone",type:"tel",value:r.customerPhone,onChange:m=>o("customerPhone",m.target.value),placeholder:"Enter your phone number"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{htmlFor:"category",children:"Category *"}),n.jsxs(Jl,{value:r.category,onValueChange:m=>o("category",m),children:[n.jsx(Ei,{children:n.jsx(Xl,{placeholder:"Select a category"})}),n.jsx(Pi,{children:i.map(m=>n.jsx(ct,{value:m.value,children:m.label},m.value))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{htmlFor:"quantity",children:"Quantity"}),n.jsx(ce,{id:"quantity",type:"number",min:"1",value:r.quantity,onChange:m=>o("quantity",parseInt(m.target.value)||1)})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{htmlFor:"productDescription",children:"Product Description *"}),n.jsx(Qt,{id:"productDescription",value:r.productDescription,onChange:m=>o("productDescription",m.target.value),placeholder:"Describe what you're looking for...",rows:3,required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{htmlFor:"deliveryDate",children:"Preferred Delivery Date"}),n.jsx(ce,{id:"deliveryDate",type:"date",value:r.deliveryDate,onChange:m=>o("deliveryDate",m.target.value),min:new Date().toISOString().split("T")[0]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{children:"Estimated Price"}),n.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["",c().toFixed(2)]}),n.jsx("p",{className:"text-sm text-gray-500",children:"Final price will be confirmed"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{htmlFor:"specialRequests",children:"Special Requests"}),n.jsx(Qt,{id:"specialRequests",value:r.specialRequests,onChange:m=>o("specialRequests",m.target.value),placeholder:"Any special requirements or notes...",rows:2})]}),n.jsx(z,{type:"submit",disabled:e,className:"w-full",size:"lg",children:e?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting Order..."]}):n.jsxs(n.Fragment,{children:[n.jsx(rn,{className:"mr-2 h-4 w-4"}),"Submit Order"]})})]})})]})},r2=()=>n.jsxs("div",{className:"min-h-screen font-inter bg-gradient-to-br from-peach-50/30 via-white to-amber-50/30",children:[n.jsx($s,{}),n.jsx("main",{className:"py-20",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"text-center mb-12",children:[n.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4 font-playfair",children:"Place Your Order"}),n.jsx("p",{className:"text-xl text-gray-600 font-inter max-w-2xl mx-auto",children:"Tell us about your floral needs and we'll create something beautiful for you. Our expert florists will contact you to confirm details and provide a final quote."})]}),n.jsx(t2,{}),n.jsxs("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"text-center p-6 bg-white rounded-lg shadow-sm border border-peach-100",children:[n.jsx("div",{className:"w-12 h-12 bg-peach-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("span",{className:"text-2xl",children:""})}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Personal Consultation"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"We'll call you within 24 hours to discuss your requirements and provide expert advice."})]}),n.jsxs("div",{className:"text-center p-6 bg-white rounded-lg shadow-sm border border-peach-100",children:[n.jsx("div",{className:"w-12 h-12 bg-peach-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("span",{className:"text-2xl",children:""})}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transparent Pricing"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"The estimated price shown is preliminary. Final pricing will be confirmed before we proceed."})]}),n.jsxs("div",{className:"text-center p-6 bg-white rounded-lg shadow-sm border border-peach-100",children:[n.jsx("div",{className:"w-12 h-12 bg-peach-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("span",{className:"text-2xl",children:""})}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Flexible Delivery"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"We offer delivery throughout the region. Delivery costs will be calculated based on your location."})]})]}),n.jsxs("div",{className:"mt-16 text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4 font-playfair",children:"Need Help?"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Our team is here to help you create the perfect floral arrangement."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsx("a",{href:"tel:+393498851455",className:"inline-flex items-center justify-center px-6 py-3 bg-peach-500 text-white rounded-lg hover:bg-peach-600 transition-colors",children:" Call Us: +393498851455"}),n.jsx("a",{href:"mailto:info@francescofiori.com",className:"inline-flex items-center justify-center px-6 py-3 bg-white text-peach-600 border border-peach-300 rounded-lg hover:bg-peach-50 transition-colors",children:" Email: info@francescofiori.com"})]})]})]})}),n.jsx(Hs,{})]}),Pd=({order:e,onUpdate:t,onDelete:r})=>{const[s,a]=b.useState(!1),[i,o]=b.useState(e.status),[l,c]=b.useState(e.tracking_number||""),[d,m]=b.useState(""),{toast:u}=Ee(),f=async()=>{if(i){a(!0);try{const{error:w}=await L.rpc("update_order_status",{order_uuid:e.id,new_status:i,status_notes:d||null,tracking_num:l||null});if(w)throw w;u({title:"Order Updated",description:`Order status changed to ${i}`}),t()}catch(w){console.error("Update error:",w),u({title:"Update Failed",description:"Failed to update order status",variant:"destructive"})}finally{a(!1)}}},p=async w=>{a(!0);try{const{error:N}=await L.rpc("update_order_status",{order_uuid:e.id,new_status:w,status_notes:w==="accepted"?"Order accepted and will be prepared":"Order rejected",tracking_num:null});if(N)throw N;u({title:w==="accepted"?"Order Accepted":"Order Rejected",description:`Order #${e.order_number} has been ${w}`}),t()}catch(N){console.error("Quick update error:",N),u({title:"Update Failed",description:`Failed to ${w} order`,variant:"destructive"})}finally{a(!1)}},h=async()=>{if(confirm(`Are you sure you want to delete order #${e.order_number}? This action cannot be undone.`)){a(!0);try{console.log("Starting manual order deletion for order:",e.id),await g(),u({title:"Order Deleted",description:`Order #${e.order_number} has been permanently deleted`}),r?r():t()}catch(w){console.error("Delete error:",w);let N="Failed to delete order";w.message.includes("does not exist")?N="Order no longer exists":w.message.includes("permission")?N="You do not have permission to delete this order":w.message.includes("violates foreign key constraint")?N="Cannot delete order - it has related records that need to be removed first":w.message&&(N=`Failed to delete order: ${w.message}`),u({title:"Delete Failed",description:N,variant:"destructive"})}finally{a(!1)}}},g=async()=>{console.log("Starting manual deletion process for order:",e.id);try{console.log("Deleting order notifications...");const{error:w}=await L.from("order_notifications").delete().eq("order_id",e.id);w?console.warn("Failed to delete notifications:",w):console.log(" Order notifications deleted"),console.log("Deleting order status history...");const{error:N}=await L.from("order_status_history").delete().eq("order_id",e.id);N?console.warn("Failed to delete status history:",N):console.log(" Order status history deleted"),console.log("Deleting order items...");const{error:j}=await L.from("order_items").delete().eq("order_id",e.id);if(j)throw console.error("Failed to delete order items:",j),new Error(`Failed to delete order items: ${j.message}`);console.log(" Order items deleted"),console.log("Deleting order...");const{error:C}=await L.from("orders").delete().eq("id",e.id);if(C)throw console.error("Failed to delete order:",C),new Error(`Failed to delete order: ${C.message}`);console.log(" Order deleted successfully")}catch(w){throw console.error("Manual deletion failed:",w),w}},x=w=>{switch(w){case"pending":return n.jsx(Rn,{className:"w-4 h-4"});case"processing":return n.jsx(Ft,{className:"w-4 h-4"});case"shipped":return n.jsx(Yo,{className:"w-4 h-4"});case"delivered":return n.jsx(Ke,{className:"w-4 h-4"});default:return n.jsx(Rn,{className:"w-4 h-4"})}},v=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),y=w=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(w);return n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{className:"flex items-center gap-2",children:["Order #",e.order_number,n.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[n.jsxs(Ue,{variant:"outline",children:[x(e.status),e.status.charAt(0).toUpperCase()+e.status.slice(1)]}),n.jsx(z,{onClick:h,disabled:s,variant:"destructive",size:"sm",className:"h-8 w-8 p-0",children:n.jsx(Hn,{className:"h-4 w-4"})})]})]})}),n.jsxs(oe,{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Customer Information"}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Name:"})," ",e.customer_name]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Email:"})," ",e.customer_email]}),e.customer_phone&&n.jsxs("div",{children:[n.jsx("strong",{children:"Phone:"})," ",e.customer_phone]})]})]}),n.jsx(tn,{}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Order Information"}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Total Amount:"})," ",y(Number(e.total_amount))]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Created:"})," ",v(e.created_at)]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Last Updated:"})," ",v(e.updated_at)]}),e.tracking_number&&n.jsxs("div",{children:[n.jsx("strong",{children:"Tracking Number:"})," ",e.tracking_number]}),e.shipped_at&&n.jsxs("div",{children:[n.jsx("strong",{children:"Shipped:"})," ",v(e.shipped_at)]}),e.delivered_at&&n.jsxs("div",{children:[n.jsx("strong",{children:"Delivered:"})," ",v(e.delivered_at)]})]})]}),n.jsx(tn,{}),e.status==="pending"&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-3",children:"Quick Actions"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(z,{onClick:()=>p("accepted"),disabled:s,className:"flex-1 bg-green-600 hover:bg-green-700",children:[s?n.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}):n.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Accept Order"]}),n.jsxs(z,{onClick:()=>p("rejected"),disabled:s,variant:"destructive",className:"flex-1",children:[s?n.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}):n.jsx(Kt,{className:"mr-2 h-4 w-4"}),"Reject Order"]})]})]}),n.jsx(tn,{}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-3",children:"Update Order Status"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),n.jsxs(Jl,{value:i,onValueChange:o,children:[n.jsx(Ei,{children:n.jsx(Xl,{placeholder:"Select status"})}),n.jsxs(Pi,{children:[n.jsx(ct,{value:"pending",children:"Pending"}),n.jsx(ct,{value:"accepted",children:"Accepted"}),n.jsx(ct,{value:"rejected",children:"Rejected"}),n.jsx(ct,{value:"preparing",children:"Preparing"}),n.jsx(ct,{value:"ready",children:"Ready for Pickup/Delivery"}),n.jsx(ct,{value:"out_for_delivery",children:"Out for Delivery"}),n.jsx(ct,{value:"delivered",children:"Delivered"}),n.jsx(ct,{value:"completed",children:"Completed"}),n.jsx(ct,{value:"cancelled",children:"Cancelled"})]})]})]}),(i==="out_for_delivery"||i==="delivered")&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Tracking Number"}),n.jsx(ce,{value:l,onChange:w=>c(w.target.value),placeholder:"Enter tracking number"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Notes (Optional)"}),n.jsx(Qt,{value:d,onChange:w=>m(w.target.value),placeholder:"Add any notes about this status update...",rows:3})]}),n.jsx(z,{onClick:f,disabled:s||i===e.status,className:"w-full",children:s?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Order Status"})]})]})]})]})},n2=({notifications:e,count:t,onRefresh:r})=>{const[s,a]=b.useState(!1),[i,o]=b.useState(!1),[l,c]=b.useState(!0),[d,m]=b.useState({}),[u,f]=b.useState(null),p=b.useRef(null),{toast:h}=Ee();b.useEffect(()=>{t===0&&i&&x()},[t,l]),b.useEffect(()=>{e.length>0&&g()},[e]);const g=async()=>{try{const P=e.map(R=>R.order_id).filter(Boolean);if(P.length===0)return;const{data:S,error:D}=await L.from("orders").select("id, order_number, customer_name, status").in("id",P);if(D)throw D;const A={};S==null||S.forEach(R=>{A[R.id]=R}),m(A)}catch(P){console.error("Error fetching order details:",P)}},x=()=>{o(!1),p.current&&(clearInterval(p.current),p.current=null)},v=()=>{c(!l),l||x()};b.useEffect(()=>()=>{p.current&&clearInterval(p.current)},[]);const y=async P=>{try{const{error:S}=await L.from("order_notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",P);if(S)throw S;r()}catch(S){console.error("Error marking notification as read:",S),h({title:"Error",description:"Failed to mark notification as read",variant:"destructive"})}},w=async()=>{try{const{error:P}=await L.from("order_notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("is_read",!1);if(P)throw P;x(),ze.stopRinging(),r(),a(!1),h({title:"Success",description:"All notifications marked as read"})}catch(P){console.error("Error marking all notifications as read:",P),h({title:"Error",description:"Failed to mark notifications as read",variant:"destructive"})}},N=async P=>{try{const{error:S}=await L.from("order_notifications").delete().eq("id",P);if(S)throw S;r()}catch(S){console.error("Error deleting notification:",S),h({title:"Error",description:"Failed to delete notification",variant:"destructive"})}},j=async(P,S)=>{var D;if(!P){console.error("No order ID provided");return}console.log(`Attempting to ${S} order:`,P),f(P);try{const{error:A}=await L.rpc("update_order_status",{order_uuid:P,new_status:S,status_notes:S==="accepted"?"Order accepted from notifications":"Order rejected from notifications",tracking_num:null});if(A)throw console.error("Supabase RPC error:",A),A;console.log(`Order ${P} successfully ${S}`),m(E=>({...E,[P]:{...E[P],status:S}})),h({title:S==="accepted"?"Order Accepted! ":"Order Rejected ",description:`Order #${(D=d[P])==null?void 0:D.order_number} has been ${S}`});const R=e.find(E=>E.order_id===P);R&&!R.is_read&&await y(R.id),x(),ze.stopRinging(),r()}catch(A){console.error(`Error ${S} order:`,A),h({title:"Error",description:`Failed to ${S} order`,variant:"destructive"})}finally{f(null)}},C=P=>new Date(P).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(z,{variant:"ghost",size:"sm",onClick:v,className:`${l?"text-green-600":"text-gray-400"}`,title:l?"Sound enabled":"Sound disabled",children:l?n.jsx(On,{className:"w-4 h-4"}):n.jsx(_u,{className:"w-4 h-4"})}),n.jsxs(Qm,{open:s,onOpenChange:a,children:[n.jsx(Zm,{asChild:!0,children:n.jsxs(z,{variant:"outline",size:"sm",className:`relative ${i?"animate-pulse bg-red-50 border-red-300":""}`,children:[n.jsx(Vo,{className:`w-4 h-4 ${i?"text-red-600":""}`}),t>0&&n.jsx(Ue,{variant:"destructive",className:`absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center p-0 text-xs ${i?"animate-bounce":""}`,children:t>99?"99+":t})]})}),n.jsx(gl,{className:"w-80",align:"end",children:n.jsxs(ie,{className:"border-0 shadow-none",children:[n.jsx(xe,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(be,{className:"text-lg",children:"Notifications"}),n.jsxs("div",{className:"flex items-center gap-2",children:[t>0&&n.jsxs(n.Fragment,{children:[n.jsx(z,{variant:"ghost",size:"sm",onClick:x,className:"text-xs text-orange-600",children:"Stop Ringing"}),n.jsx(z,{variant:"ghost",size:"sm",onClick:w,className:"text-xs",children:"Mark all read"})]}),!1]})]})}),n.jsx(oe,{className:"space-y-2 max-h-64 overflow-y-auto",children:e.length>0?e.map(P=>{const S=d[P.order_id],D=u===P.order_id;return n.jsx("div",{className:`p-3 rounded border ${P.is_read?"bg-gray-50":"bg-blue-50 border-blue-200"}`,children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm font-medium",children:P.notification_type==="new_order"&&"New Order Received"}),S&&n.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Order #",S.order_number," - ",S.customer_name]}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:C(P.created_at)}),S&&n.jsx("div",{className:"mt-1",children:n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${S.status==="pending"?"bg-yellow-100 text-yellow-800":S.status==="payment_pending"?"bg-orange-100 text-orange-800":S.status==="accepted"?"bg-green-100 text-green-800":S.status==="rejected"?"bg-red-100 text-red-800":S.status==="paid"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:S.status.charAt(0).toUpperCase()+S.status.slice(1).replace("_"," ")})})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[!P.is_read&&n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>y(P.id),className:"h-6 w-6 p-0",title:"Mark as read",children:n.jsx(Cu,{className:"w-3 h-3"})}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>N(P.id),className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",title:"Delete notification",children:n.jsx(Kt,{className:"w-3 h-3"})})]})]}),(!S||S.status==="pending"||S.status==="payment_pending"||S.status==="paid")&&n.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[n.jsx(z,{size:"sm",onClick:()=>j(P.order_id,"accepted"),disabled:D,className:"flex-1 bg-green-600 hover:bg-green-700 text-white h-8",children:D?n.jsx(ge,{className:"w-3 h-3 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Ke,{className:"w-3 h-3 mr-1"}),"Accept"]})}),n.jsx(z,{size:"sm",variant:"destructive",onClick:()=>j(P.order_id,"rejected"),disabled:D,className:"flex-1 h-8",children:D?n.jsx(ge,{className:"w-3 h-3 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Kt,{className:"w-3 h-3 mr-1"}),"Reject"]})})]}),!1]})},P.id)}):n.jsx("div",{className:"text-center text-gray-500 py-4",children:"No notifications"})})]})})]})]})};class s2{constructor(){Ae(this,"settings");Ae(this,"isRunning",!1);Ae(this,"serviceWorker",null);Ae(this,"realtimeChannel",null);Ae(this,"heartbeatInterval",null);Ae(this,"syncInterval",null);Ae(this,"wakeLock",null);Ae(this,"lastOrderCheck",new Date);Ae(this,"retryCount",0);this.settings={enabled:!0,soundEnabled:!0,vibrationEnabled:!0,persistentNotifications:!0,backgroundSync:!0,wakeScreen:!0,maxRetries:5,retryInterval:3e4},this.loadSettings(),this.initializeService()}loadSettings(){try{const t=localStorage.getItem("backgroundOrderSettings");t&&(this.settings={...this.settings,...JSON.parse(t)})}catch(t){console.error("Failed to load background order settings:",t)}}saveSettings(){try{localStorage.setItem("backgroundOrderSettings",JSON.stringify(this.settings))}catch(t){console.error("Failed to save background order settings:",t)}}updateSettings(t){this.settings={...this.settings,...t},this.saveSettings(),this.isRunning&&this.restart()}getSettings(){return{...this.settings}}async initializeService(){try{console.log(" Initializing Background Order Service..."),await this.registerServiceWorker(),await this.requestPermissions(),await this.setupWakeLock(),await this.start(),console.log(" Background Order Service initialized successfully")}catch(t){console.error(" Failed to initialize Background Order Service:",t)}}async registerServiceWorker(){if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.register("/sw.js");console.log(" Service Worker registered:",t),await navigator.serviceWorker.ready,this.serviceWorker=t.active,navigator.serviceWorker.addEventListener("message",this.handleServiceWorkerMessage.bind(this)),t.addEventListener("updatefound",()=>{console.log(" Service Worker update found")})}catch(t){console.error(" Service Worker registration failed:",t)}}async requestPermissions(){if("Notification"in window){const t=await Notification.requestPermission();console.log(" Notification permission:",t)}if("serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype&&console.log(" Background sync supported"),"permissions"in navigator)try{const t=await navigator.permissions.query({name:"persistent-notification"});console.log(" Persistent notification permission:",t.state)}catch{console.log(" Persistent notification not supported")}}async setupWakeLock(){if(this.settings.wakeScreen&&"wakeLock"in navigator)try{this.wakeLock=await navigator.wakeLock.request("screen"),console.log(" Screen wake lock acquired"),this.wakeLock.addEventListener("release",()=>{console.log(" Screen wake lock released")})}catch(t){console.error(" Failed to acquire wake lock:",t)}}handleServiceWorkerMessage(t){console.log(" Message from Service Worker:",t.data),t.data.type==="NEW_ORDER_NOTIFICATION"&&this.handleNewOrderFromServiceWorker(t.data)}handleNewOrderFromServiceWorker(t){const{orderNumber:r,customerName:s,amount:a,orderId:i}=t;this.triggerComprehensiveNotification(r,s,a,i)}async start(){if(this.isRunning){console.log(" Background Order Service already running");return}if(!this.settings.enabled){console.log(" Background Order Service disabled");return}console.log(" Starting Background Order Service..."),this.isRunning=!0,await this.setupRealtimeMonitoring(),this.startHeartbeat(),this.settings.backgroundSync&&this.startPeriodicSync(),console.log(" Background Order Service started")}async stop(){this.isRunning&&(console.log(" Stopping Background Order Service..."),this.isRunning=!1,this.realtimeChannel&&(await L.removeChannel(this.realtimeChannel),this.realtimeChannel=null),this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null),this.wakeLock&&(this.wakeLock.release(),this.wakeLock=null),console.log(" Background Order Service stopped"))}async restart(){await this.stop(),await this.start()}async setupRealtimeMonitoring(){try{this.realtimeChannel=L.channel("background-order-monitoring").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},t=>{console.log(" New order detected in background service:",t),this.handleNewOrder(t.new)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders"},t=>{console.log(" Order updated in background service:",t),this.handleOrderUpdate(t.new)}).subscribe(t=>{console.log(" Realtime subscription status:",t)})}catch(t){console.error(" Failed to setup realtime monitoring:",t),this.scheduleRetry()}}handleNewOrder(t){const{order_number:r,customer_name:s,total_amount:a,id:i}=t;console.log(" Processing new order in background:",r),this.triggerComprehensiveNotification(r,s,`$${a}`,i),this.lastOrderCheck=new Date,this.retryCount=0}handleOrderUpdate(t){console.log(" Order updated:",t.order_number,"Status:",t.status),t.status==="accepted"||t.status}triggerComprehensiveNotification(t,r,s,a){if(console.log(" Triggering comprehensive notification for order:",t),this.settings.soundEnabled&&ze.notifyNewOrder(t,r),this.settings.persistentNotifications&&"Notification"in window&&Notification.permission==="granted"){const i=new Notification(` New Order #${t}`,{body:`Order from ${r} - ${s}`,icon:"/favicon.ico",badge:"/favicon.ico",tag:"new-order",requireInteraction:!0,silent:!this.settings.soundEnabled,actions:[{action:"view",title:"View Order"},{action:"accept",title:"Accept"}],data:{orderId:a,orderNumber:t,url:"/orders"}});i.onclick=()=>{window.focus(),window.location.href="/orders",i.close()}}if(this.serviceWorker&&this.serviceWorker.postMessage({type:"NEW_ORDER",orderNumber:t,customerName:r,amount:s,orderId:a}),this.settings.vibrationEnabled&&"vibrate"in navigator&&navigator.vibrate([200,100,200,100,200,100,200]),this.wakeLock&&this.settings.wakeScreen&&console.log(" Screen should stay awake for notification"),window&&document.hidden)try{window.focus()}catch(i){console.log("Could not focus window:",i)}}startHeartbeat(){this.heartbeatInterval=setInterval(()=>{this.isRunning&&(console.log(" Background Order Service heartbeat"),this.realtimeChannel&&this.realtimeChannel.state!=="joined"&&(console.log(" Realtime connection lost, reconnecting..."),this.setupRealtimeMonitoring()))},6e4)}startPeriodicSync(){this.syncInterval=setInterval(async()=>{this.isRunning&&await this.syncOrders()},3e4)}async syncOrders(){try{console.log(" Syncing orders in background...");const{data:t,error:r}=await L.from("orders").select("*").gte("created_at",this.lastOrderCheck.toISOString()).order("created_at",{ascending:!1});if(r)throw r;t&&t.length>0&&(console.log(` Found ${t.length} new orders during sync`),t.forEach(s=>{new Date(s.created_at)>this.lastOrderCheck&&this.handleNewOrder(s)})),this.lastOrderCheck=new Date,this.retryCount=0}catch(t){console.error(" Order sync failed:",t),this.scheduleRetry()}}scheduleRetry(){this.retryCount<this.settings.maxRetries?(this.retryCount++,console.log(` Scheduling retry ${this.retryCount}/${this.settings.maxRetries} in ${this.settings.retryInterval}ms`),setTimeout(()=>{this.isRunning&&this.setupRealtimeMonitoring()},this.settings.retryInterval)):(console.error(" Max retries reached, stopping background service"),this.stop())}getStatus(){var t;return{isRunning:this.isRunning,hasServiceWorker:!!this.serviceWorker,hasWakeLock:!!this.wakeLock,hasRealtimeConnection:((t=this.realtimeChannel)==null?void 0:t.state)==="joined",lastOrderCheck:this.lastOrderCheck,retryCount:this.retryCount,settings:this.settings}}}const Er=new s2,a2=()=>{const[e,t]=b.useState([]),[r,s]=b.useState(!1),[a,i]=b.useState({backgroundService:!1,phoneService:!1,realtimeConnection:!1,serviceWorker:!1,notifications:!1,wakeLock:!1,isOnline:navigator.onLine}),[o,l]=b.useState({customerName:"Test Customer",customerEmail:"test@example.com",customerPhone:"+1234567890",totalAmount:99.99,category:"Bouquets",productDescription:"Test Flower Arrangement",quantity:1,specialRequests:"This is a test order for system validation"}),[c,d]=b.useState(!1),[m,u]=b.useState(!1),{toast:f}=Ee();b.useEffect(()=>{p();const O=setInterval(p,5e3);return()=>clearInterval(O)},[]);const p=()=>{const O=Er.getStatus(),F=ze.getSettings();i({backgroundService:O.isRunning,phoneService:F.enabled,realtimeConnection:O.hasRealtimeConnection,serviceWorker:O.hasServiceWorker,notifications:Notification.permission==="granted",wakeLock:O.hasWakeLock,isOnline:navigator.onLine})},h=(O,F,B,W)=>{t(K=>[...K,{name:O,status:F,message:B,timestamp:new Date,duration:W}])},g=(O,F,B,W)=>{t(K=>K.map(G=>G.name===O?{...G,status:F,message:B,duration:W,timestamp:new Date}:G))},x=async()=>{s(!0),t([]);const O=[{name:"System Initialization",test:v},{name:"Database Connection",test:y},{name:"Real-time Subscription",test:w},{name:"Notification Permissions",test:N},{name:"Service Worker Registration",test:j},{name:"Phone Notification Service",test:C},{name:"Background Order Service",test:P},{name:"Order Creation",test:S},{name:"Order Notification Flow",test:D},{name:"Screen Off Notifications",test:A},{name:"Background Processing",test:R},{name:"Offline Handling",test:E},{name:"Recovery After Connection Loss",test:k}];for(const{name:F,test:B}of O){h(F,"running","Test in progress...");try{const W=Date.now();await B();const K=Date.now()-W;g(F,"passed","Test completed successfully",K)}catch(W){const K=Date.now()-Date.now();g(F,"failed",`Test failed: ${W}`,K)}await new Promise(W=>setTimeout(W,1e3))}s(!1),f({title:" Test Suite Completed",description:"All order system tests have been executed"})},v=async()=>{if(!a.backgroundService)throw new Error("Background service not initialized");if(!a.phoneService)throw new Error("Phone service not initialized")},y=async()=>{const{data:O,error:F}=await L.from("orders").select("count").limit(1);if(F)throw new Error(`Database connection failed: ${F.message}`)},w=async()=>{if(!a.realtimeConnection)throw new Error("Real-time subscription not active")},N=async()=>{if(Notification.permission!=="granted"&&await Notification.requestPermission()!=="granted")throw new Error("Notification permission not granted")},j=async()=>{if(!("serviceWorker"in navigator))throw new Error("Service Worker not supported");if(!await navigator.serviceWorker.getRegistration())throw new Error("Service Worker not registered")},C=async()=>{ze.testNotificationSound(),await new Promise(O=>setTimeout(O,2e3))},P=async()=>{if(!Er.getStatus().isRunning)throw new Error("Background order service not running")},S=async()=>{const O=`TEST-${Date.now()}`,{data:F,error:B}=await L.from("orders").insert({order_number:O,customer_name:o.customerName,customer_email:o.customerEmail,customer_phone:o.customerPhone,total_amount:o.totalAmount,status:"pending",notes:`Test order created at ${new Date().toISOString()}`}).select().single();if(B)throw new Error(`Order creation failed: ${B.message}`);setTimeout(async()=>{await L.from("orders").delete().eq("id",F.id)},1e4)},D=async()=>new Promise((O,F)=>{const B=`NOTIFY-TEST-${Date.now()}`;let W=!1;const K=G=>{G instanceof CustomEvent&&G.detail.orderNumber===B&&(W=!0,document.removeEventListener("orderNotification",K),O(!0))};document.addEventListener("orderNotification",K),L.from("orders").insert({order_number:B,customer_name:"Notification Test",customer_email:"notify@test.com",total_amount:50,status:"pending",notes:"Notification flow test order"}).then(({data:G,error:ee})=>{if(ee){F(new Error(`Notification test order creation failed: ${ee.message}`));return}setTimeout(async()=>{G&&Array.isArray(G)&&G.length>0&&await L.from("orders").delete().eq("id",G[0].id),W||F(new Error("Notification not received within timeout"))},15e3)})}),A=async()=>{if(!c)throw new Error("Screen off test not enabled - please enable and test manually");f({title:" Screen Off Test",description:"Turn off your screen now. A test notification will be sent in 5 seconds.",duration:5e3}),await new Promise(O=>setTimeout(O,5e3)),ze.notifyNewOrder("SCREEN-OFF-TEST","Screen Off Test Customer"),await new Promise(O=>setTimeout(O,1e4))},R=async()=>{if(!m)throw new Error("Background test not enabled - please enable and test manually");f({title:" Background Test",description:"Minimize this app now. A test order will be created in 10 seconds.",duration:1e4}),await new Promise(F=>setTimeout(F,1e4));const O=`BG-TEST-${Date.now()}`;await L.from("orders").insert({order_number:O,customer_name:"Background Test",customer_email:"bg@test.com",total_amount:75,status:"pending",notes:"Background processing test order"})},E=async()=>{if(!navigator.onLine)throw new Error("Already offline - cannot test offline handling");f({title:" Offline Test",description:"Disconnect your internet now to test offline handling",duration:5e3}),await new Promise(O=>setTimeout(O,5e3))},k=async()=>{if(await Er.restart(),await new Promise(F=>setTimeout(F,3e3)),!Er.getStatus().isRunning)throw new Error("Service did not recover after restart")},T=async()=>{const O=`MANUAL-TEST-${Date.now()}`;try{const{data:F,error:B}=await L.from("orders").insert({order_number:O,customer_name:o.customerName,customer_email:o.customerEmail,customer_phone:o.customerPhone,total_amount:o.totalAmount,status:"pending",notes:`Manual test order: ${o.specialRequests}`}).select().single();if(B)throw B;f({title:" Test Order Created",description:`Order #${O} created successfully`}),setTimeout(async()=>{await L.from("orders").delete().eq("id",F.id),f({title:" Test Order Cleaned Up",description:`Order #${O} automatically deleted`})},3e4)}catch(F){f({title:" Test Order Failed",description:`Failed to create test order: ${F}`,variant:"destructive"})}},_=O=>{switch(O){case"passed":return n.jsx(Ke,{className:"w-4 h-4 text-green-600"});case"failed":return n.jsx(Gn,{className:"w-4 h-4 text-red-600"});case"running":return n.jsx(Rn,{className:"w-4 h-4 text-blue-600 animate-spin"});default:return n.jsx(Rn,{className:"w-4 h-4 text-gray-400"})}},M=(O,F)=>n.jsxs(Ue,{variant:O?"default":"secondary",className:"flex items-center gap-1",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${O?"bg-green-500":"bg-gray-400"}`}),F]});return n.jsx("div",{className:"space-y-6",children:n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{className:"flex items-center gap-2",children:[n.jsx(bs,{className:"w-5 h-5"}),"Order System Tester"]})}),n.jsxs(oe,{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"System Status"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[M(a.backgroundService,"Background Service"),M(a.phoneService,"Phone Service"),M(a.realtimeConnection,"Real-time"),M(a.serviceWorker,"Service Worker"),M(a.notifications,"Notifications"),M(a.wakeLock,"Wake Lock"),M(a.isOnline,"Online")]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Test Configuration"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{htmlFor:"customerName",children:"Customer Name"}),n.jsx(ce,{id:"customerName",value:o.customerName,onChange:O=>l(F=>({...F,customerName:O.target.value}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Z,{htmlFor:"totalAmount",children:"Total Amount"}),n.jsx(ce,{id:"totalAmount",type:"number",value:o.totalAmount,onChange:O=>l(F=>({...F,totalAmount:parseFloat(O.target.value)}))})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(Z,{htmlFor:"specialRequests",children:"Special Requests"}),n.jsx(Qt,{id:"specialRequests",value:o.specialRequests,onChange:O=>l(F=>({...F,specialRequests:O.target.value}))})]})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(_r,{id:"screenOffTest",checked:c,onCheckedChange:d}),n.jsx(Z,{htmlFor:"screenOffTest",children:"Enable Screen Off Test"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(_r,{id:"backgroundTest",checked:m,onCheckedChange:u}),n.jsx(Z,{htmlFor:"backgroundTest",children:"Enable Background Test"})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(z,{onClick:x,disabled:r,className:"flex items-center gap-2",children:[r?n.jsx(Au,{className:"w-4 h-4"}):n.jsx(Ko,{className:"w-4 h-4"}),r?"Running Tests...":"Run All Tests"]}),n.jsxs(z,{onClick:T,variant:"outline",className:"flex items-center gap-2",children:[n.jsx(Vo,{className:"w-4 h-4"}),"Create Test Order"]}),n.jsxs(z,{onClick:()=>ze.testNotificationSound(),variant:"outline",className:"flex items-center gap-2",children:[n.jsx(On,{className:"w-4 h-4"}),"Test Sound"]})]}),e.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Test Results"}),n.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:e.map((O,F)=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[_(O.status),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:O.name}),n.jsx("div",{className:"text-sm text-gray-600",children:O.message})]})]}),n.jsx("div",{className:"text-xs text-gray-500",children:O.duration&&`${O.duration}ms`})]},F))})]})]})]})})},i2=()=>{const[e,t]=b.useState(null),[r,s]=b.useState(0),[a,i]=b.useState(!1),[o,l]=b.useState(!0),[c,d]=b.useState(navigator.onLine),[m,u]=b.useState(new Date),[f,p]=b.useState({totalOrders:0,pendingOrders:0,acceptedOrders:0,completedOrders:0,totalRevenue:0,todayOrders:0}),{toast:h}=Ee(),{data:g,isLoading:x,refetch:v,error:y}=js({queryKey:["orders-dashboard"],queryFn:async()=>{const{data:S,error:D}=await L.from("orders").select("*").order("created_at",{ascending:!1});if(D)throw D;return S},refetchInterval:3e4,refetchIntervalInBackground:!0}),{data:w,refetch:N}=js({queryKey:["order-notifications-dashboard"],queryFn:async()=>{const{data:S,error:D}=await L.from("order_notifications").select("*").eq("is_read",!1).order("created_at",{ascending:!1});if(D)throw D;return S},refetchInterval:1e4,refetchIntervalInBackground:!0});b.useEffect(()=>{if(g){const S=new Date().toDateString(),D=g.filter(A=>new Date(A.created_at).toDateString()===S);p({totalOrders:g.length,pendingOrders:g.filter(A=>A.status==="pending").length,acceptedOrders:g.filter(A=>A.status==="accepted").length,completedOrders:g.filter(A=>A.status==="completed").length,totalRevenue:g.reduce((A,R)=>A+Number(R.total_amount),0),todayOrders:D.length}),u(new Date)}},[g]),b.useEffect(()=>{const S=L.channel("order-dashboard-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},D=>{console.log(" New order received in dashboard:",D),window.location.pathname==="/orders"&&ze.notifyNewOrder(D.new.order_number,D.new.customer_name),h({title:" NEW ORDER RECEIVED!",description:`Order #${D.new.order_number} from ${D.new.customer_name}`,duration:15e3}),"Notification"in window&&Notification.permission==="granted"&&new Notification("New Order Received!",{body:`Order #${D.new.order_number} from ${D.new.customer_name}`,icon:"/favicon.ico",tag:"new-order",requireInteraction:!0}),v(),N()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders"},()=>{v()}).subscribe();return()=>{L.removeChannel(S)}},[v,N,h]),b.useEffect(()=>{const S=()=>{d(!0),h({title:" Back Online",description:"Connection restored. Syncing data..."}),v(),N()},D=()=>{d(!1),h({title:" Connection Lost",description:"Working offline. Will sync when connection is restored.",variant:"destructive"})};return window.addEventListener("online",S),window.addEventListener("offline",D),()=>{window.removeEventListener("online",S),window.removeEventListener("offline",D)}},[v,N,h]),b.useEffect(()=>{w&&s(w.length)},[w]),b.useEffect(()=>{const S=setInterval(()=>{i(ze.isCurrentlyRinging())},500);return()=>clearInterval(S)},[]),b.useEffect(()=>("Notification"in window&&Notification.permission==="default"&&Notification.requestPermission().then(S=>{S==="granted"&&h({title:" Notifications Enabled",description:"You will receive browser notifications for new orders"})}),Er.updateSettings({...Er.getSettings(),soundEnabled:!1}),Er.start().then(()=>{h({title:" Background Service Started",description:"Background monitoring active (notifications handled by dashboard)"})}).catch(S=>{console.error("Failed to start background service:",S),h({title:" Background Service Warning",description:"Some notification features may not work properly",variant:"destructive"})}),()=>{Er.stop()}),[h]);const j=S=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(S),C=S=>{const D={pending:{color:"bg-yellow-100 text-yellow-800",icon:Rn},accepted:{color:"bg-blue-100 text-blue-800",icon:Ft},processing:{color:"bg-purple-100 text-purple-800",icon:Ft},shipped:{color:"bg-orange-100 text-orange-800",icon:Yo},delivered:{color:"bg-green-100 text-green-800",icon:Ke},completed:{color:"bg-green-100 text-green-800",icon:Ke},cancelled:{color:"bg-red-100 text-red-800",icon:no},rejected:{color:"bg-red-100 text-red-800",icon:no}},A=D[S]||D.pending,R=A.icon;return n.jsxs(Ue,{className:`${A.color} flex items-center gap-1 text-xs`,children:[n.jsx(R,{className:"w-3 h-3"}),S.charAt(0).toUpperCase()+S.slice(1)]})},P=()=>{l(!o),ze.updateSettings({...ze.getSettings(),enabled:!o}),h({title:o?" Sound Disabled":" Sound Enabled",description:o?"Order notifications will be silent":"Order notifications will play sound"})};return x?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading Order Dashboard..."})]})}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:" Order Dashboard"}),n.jsx("p",{className:"text-gray-600 text-sm md:text-base",children:"Real-time order management and notifications"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Ue,{variant:c?"default":"destructive",className:"flex items-center gap-1",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-green-500":"bg-red-500"}`}),c?"Online":"Offline"]}),n.jsxs(z,{variant:"outline",size:"sm",onClick:P,className:"flex items-center gap-2",children:[o?n.jsx(On,{className:"w-4 h-4"}):n.jsx(_u,{className:"w-4 h-4"}),o?"Sound On":"Sound Off"]}),a&&n.jsxs(z,{onClick:()=>ze.stopRinging(),variant:"destructive",size:"sm",className:"animate-pulse flex items-center gap-2",children:[n.jsx(Wa,{className:"w-4 h-4"}),"Stop Ringing"]}),n.jsx(n2,{notifications:w||[],count:r,onRefresh:()=>{v(),N()}}),n.jsxs(z,{variant:"outline",size:"sm",onClick:()=>{v(),N()},className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"w-4 h-4"}),"Refresh"]})]})]}),n.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Last updated: ",m.toLocaleTimeString()]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[n.jsx(ie,{children:n.jsx(oe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Total Orders"}),n.jsx("p",{className:"text-lg font-bold",children:f.totalOrders})]}),n.jsx(Ft,{className:"w-6 h-6 text-blue-600"})]})})}),n.jsx(ie,{children:n.jsx(oe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Pending"}),n.jsx("p",{className:"text-lg font-bold text-yellow-600",children:f.pendingOrders})]}),n.jsx(Rn,{className:"w-6 h-6 text-yellow-600"})]})})}),n.jsx(ie,{children:n.jsx(oe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Accepted"}),n.jsx("p",{className:"text-lg font-bold text-blue-600",children:f.acceptedOrders})]}),n.jsx(Ke,{className:"w-6 h-6 text-blue-600"})]})})}),n.jsx(ie,{children:n.jsx(oe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Completed"}),n.jsx("p",{className:"text-lg font-bold text-green-600",children:f.completedOrders})]}),n.jsx(Ke,{className:"w-6 h-6 text-green-600"})]})})}),n.jsx(ie,{children:n.jsx(oe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Today"}),n.jsx("p",{className:"text-lg font-bold text-purple-600",children:f.todayOrders})]}),n.jsx(Tg,{className:"w-6 h-6 text-purple-600"})]})})}),n.jsx(ie,{children:n.jsx(oe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Revenue"}),n.jsx("p",{className:"text-lg font-bold text-green-600",children:j(f.totalRevenue)})]}),n.jsx(Sg,{className:"w-6 h-6 text-green-600"})]})})})]}),n.jsxs(Us,{defaultValue:"dashboard",className:"space-y-6",children:[n.jsxs(cn,{className:"grid w-full grid-cols-3",children:[n.jsx(we,{value:"dashboard",children:"Dashboard"}),n.jsx(we,{value:"orders",children:"Orders"}),n.jsx(we,{value:"testing",children:"System Testing"})]}),n.jsx(Fe,{value:"dashboard",className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Recent Orders"}),n.jsxs(Ue,{variant:"secondary",children:[(g==null?void 0:g.length)||0," total"]})]})}),n.jsx(oe,{children:g&&g.length>0?n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:g.map(S=>n.jsx(ie,{className:`cursor-pointer transition-all hover:shadow-md ${(e==null?void 0:e.id)===S.id?"ring-2 ring-blue-500":""}`,onClick:()=>t(S),children:n.jsxs(oe,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"font-medium",children:["#",S.order_number]}),C(S.status)]}),n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:S.customer_name}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[n.jsx("span",{children:new Date(S.created_at).toLocaleDateString()}),n.jsx("span",{className:"font-medium",children:j(Number(S.total_amount))})]})]})},S.id))}):n.jsxs("div",{className:"text-center text-gray-500 py-8",children:[n.jsx(Ft,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No orders found"})]})})]}),n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsx(be,{children:"Order Details"})}),n.jsx(oe,{children:e?n.jsx(Pd,{order:e,onUpdate:()=>{v(),t(null)},onDelete:()=>{v(),t(null)}}):n.jsxs("div",{className:"text-center text-gray-500 py-8",children:[n.jsx(Ke,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"Select an order to view details"})]})})]})]})}),n.jsx(Fe,{value:"orders",className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsxs(be,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"All Orders"}),n.jsxs(Ue,{variant:"secondary",children:[(g==null?void 0:g.length)||0," total"]})]})}),n.jsx(oe,{children:g&&g.length>0?n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:g.map(S=>n.jsx(ie,{className:`cursor-pointer transition-all hover:shadow-md ${(e==null?void 0:e.id)===S.id?"ring-2 ring-blue-500":""}`,onClick:()=>t(S),children:n.jsxs(oe,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"font-medium",children:["#",S.order_number]}),C(S.status)]}),n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:S.customer_name}),n.jsx("div",{className:"text-xs text-gray-500 mb-2",children:S.customer_email}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[n.jsx("span",{children:new Date(S.created_at).toLocaleDateString()}),n.jsx("span",{className:"font-medium",children:j(Number(S.total_amount))})]}),S.notes&&n.jsx("div",{className:"text-xs text-gray-400 mt-2 truncate",children:S.notes})]})},S.id))}):n.jsxs("div",{className:"text-center text-gray-500 py-8",children:[n.jsx(Ft,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No orders found"})]})})]}),n.jsxs(ie,{children:[n.jsx(xe,{children:n.jsx(be,{children:"Order Details"})}),n.jsx(oe,{children:e?n.jsx(Pd,{order:e,onUpdate:()=>{v(),t(null)},onDelete:()=>{v(),t(null)}}):n.jsxs("div",{className:"text-center text-gray-500 py-8",children:[n.jsx(Ke,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"Select an order to view details"})]})})]})]})}),n.jsx(Fe,{value:"testing",className:"space-y-6",children:n.jsx(a2,{})})]})]})},o2=()=>{const{t:e}=Mm();return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-peach-50/30 via-white to-amber-50/30",children:[n.jsx($s,{}),n.jsxs("main",{className:"pt-20",children:[n.jsx("section",{className:"py-16 bg-gradient-to-r from-emerald-500/10 to-peach-500/10",children:n.jsxs("div",{className:"container mx-auto px-4 text-center",children:[n.jsx("h1",{className:"text-4xl md:text-5xl font-playfair font-bold mb-4 text-gray-800",children:e("ourMenu")}),n.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto mb-8",children:e("menuDescription")}),n.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-emerald-400 to-emerald-600 mx-auto rounded-full"})]})}),n.jsx(hf,{})]}),n.jsx(Hs,{})]})},l2=()=>n.jsx(o2,{}),c2=()=>{const e=Gh();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),n.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),n.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},d2=()=>{const[e]=Jd(),t=Xd(),{toast:r}=Ee(),[s,a]=b.useState(!0),[i,o]=b.useState(!1),[l,c]=b.useState(""),d=e.get("session_id"),m=e.get("order_id"),u=e.get("mock")==="true";return b.useEffect(()=>{(async()=>{if(!d||!m){r({title:"Invalid Payment Link",description:"Missing payment session information.",variant:"destructive"}),t("/");return}try{if(a(!0),u){const{supabase:p}=await wt(async()=>{const{supabase:g}=await Promise.resolve().then(()=>on);return{supabase:g}},void 0);await p.from("orders").update({status:"paid",stripe_session_id:d,stripe_payment_intent_id:`pi_mock_${Date.now()}`,payment_status:"paid",paid_amount:25,paid_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",m);const{data:h}=await p.from("orders").select("order_number").eq("id",m).single();h&&c(h.order_number),r({title:"Mock Payment Successful! ",description:"Test payment completed successfully. This was a mock transaction."})}else{const p=await ka.verifyPayment(d);if(p.status==="paid"){await ka.updateOrderAfterPayment(m,{stripeSessionId:d,paymentIntentId:p.paymentIntentId||"",status:p.status,amountPaid:(p.amountTotal||0)/100});const{supabase:h}=await wt(async()=>{const{supabase:x}=await Promise.resolve().then(()=>on);return{supabase:x}},void 0),{data:g}=await h.from("orders").select("order_number").eq("id",m).single();g&&c(g.order_number),r({title:"Payment Successful! ",description:"Your order has been confirmed and payment processed."})}else throw new Error("Payment not completed")}}catch(p){console.error("Payment verification error:",p),r({title:"Payment Verification Failed",description:"There was an issue verifying your payment. Please contact support.",variant:"destructive"})}finally{a(!1),o(!0)}})()},[d,m,r,t]),n.jsxs("div",{className:"min-h-screen font-inter bg-gradient-to-br from-peach-50/30 via-white to-amber-50/30",children:[n.jsx($s,{}),n.jsx("main",{className:"py-20",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsx("div",{className:"max-w-2xl mx-auto",children:n.jsxs(ie,{className:"text-center",children:[n.jsxs(xe,{children:[n.jsx("div",{className:"flex justify-center mb-4",children:s?n.jsx(ge,{className:"h-16 w-16 text-emerald-600 animate-spin"}):n.jsx(Ke,{className:"h-16 w-16 text-emerald-600"})}),n.jsx(be,{className:"text-2xl font-playfair",children:s?"Verifying Payment...":"Payment Successful!"})]}),n.jsx(oe,{className:"space-y-6",children:s?n.jsx("div",{children:n.jsx("p",{className:"text-gray-600",children:"Please wait while we verify your payment and update your order."})}):i?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-emerald-800 mb-2",children:"Thank you for your purchase!"}),n.jsxs("p",{className:"text-emerald-700",children:["Your payment has been processed successfully.",l&&n.jsxs("span",{className:"block mt-1",children:["Order Number: ",n.jsxs("strong",{children:["#",l]})]})]})]}),n.jsxs("div",{className:"text-left space-y-2",children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:"What happens next?"}),n.jsxs("ul",{className:"text-gray-600 space-y-1",children:[n.jsx("li",{children:" You'll receive an email confirmation shortly"}),n.jsx("li",{children:" Our team will contact you to confirm delivery details"}),n.jsx("li",{children:" We'll prepare your beautiful floral arrangement"}),n.jsx("li",{children:" Your order will be delivered on the specified date"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[n.jsxs(z,{onClick:()=>t("/products"),className:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700",children:[n.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Continue Shopping"]}),n.jsxs(z,{onClick:()=>t("/"),variant:"outline",className:"flex-1",children:[n.jsx(Iu,{className:"h-4 w-4 mr-2"}),"Back to Home"]})]})]}):n.jsxs("div",{className:"text-gray-600",children:[n.jsx("p",{children:"There was an issue processing your payment verification."}),n.jsx("p",{children:"Please contact our support team for assistance."})]})})]})})})}),n.jsx(Hs,{})]})},u2=()=>{const[e]=Jd(),t=Xd(),{toast:r}=Ee(),s=e.get("order_id");b.useEffect(()=>{(async()=>{if(s)try{await ka.handleFailedPayment(s,"Payment cancelled by user")}catch(o){console.error("Error handling cancelled payment:",o)}r({title:"Payment Cancelled",description:"Your payment was cancelled. Your order is still saved and you can complete payment later.",variant:"destructive"})})()},[s,r]);const a=()=>{t(s?`/order?retry=${s}`:"/products")};return n.jsxs("div",{className:"min-h-screen font-inter bg-gradient-to-br from-peach-50/30 via-white to-amber-50/30",children:[n.jsx($s,{}),n.jsx("main",{className:"py-20",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsx("div",{className:"max-w-2xl mx-auto",children:n.jsxs(ie,{className:"text-center",children:[n.jsxs(xe,{children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx(Gn,{className:"h-16 w-16 text-red-500"})}),n.jsx(be,{className:"text-2xl font-playfair text-red-600",children:"Payment Cancelled"})]}),n.jsx(oe,{className:"space-y-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-red-800 mb-2",children:"Payment was not completed"}),n.jsx("p",{className:"text-red-700",children:"You cancelled the payment process. Don't worry - your order information has been saved and you can complete the payment at any time."})]}),n.jsxs("div",{className:"text-left space-y-2",children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:"What you can do:"}),n.jsxs("ul",{className:"text-gray-600 space-y-1",children:[n.jsx("li",{children:" Try the payment process again"}),n.jsx("li",{children:" Contact us directly to complete your order"}),n.jsx("li",{children:" Browse more products and add them to a new order"}),n.jsx("li",{children:" Your order details are saved for future reference"})]})]}),n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"Need Help?"}),n.jsxs("p",{className:"text-amber-700 text-sm",children:["If you're experiencing issues with payment, please contact us at"," ",n.jsx("a",{href:"mailto:info@francescofiori.it",className:"underline",children:"info@francescofiori.it"})," ","or call us directly. We're here to help!"]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[n.jsxs(z,{onClick:a,className:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700",children:[n.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Try Payment Again"]}),n.jsxs(z,{onClick:()=>t("/products"),variant:"outline",className:"flex-1",children:[n.jsx(Su,{className:"h-4 w-4 mr-2"}),"Continue Shopping"]})]}),n.jsxs(z,{onClick:()=>t("/"),variant:"ghost",className:"w-full",children:[n.jsx(Iu,{className:"h-4 w-4 mr-2"}),"Back to Home"]})]})})]})})})}),n.jsx(Hs,{})]})};async function m2(){try{console.log("[VerifyDB] Checking categories data...");const{data:e,error:t}=await L.from("categories").select("id, name, slug, is_active").eq("is_active",!0);if(t)return{success:!1,message:`Categories query error: ${t.message}`,details:t};if(!e||e.length===0)return{success:!1,message:"No active categories found in database"};const r=["matrimoni","fiori-piante","fiori-finti","funerali"],s=e.map(i=>i.slug),a=r.filter(i=>!s.includes(i));return a.length>0?{success:!1,message:`Missing required categories: ${a.join(", ")}`,details:{existing:s,missing:a}}:{success:!0,message:`Found all ${e.length} required categories`,details:{categories:e.map(i=>({name:i.name,slug:i.slug}))}}}catch(e){return{success:!1,message:`Categories verification error: ${e.message}`,details:e}}}async function f2(){try{console.log("[VerifyDB] Checking products data...");const{data:e,error:t}=await L.from("products").select(`
        id,
        name,
        price,
        is_active,
        is_featured,
        category_id,
        categories (
          id,
          name,
          slug
        )
      `).eq("is_active",!0);if(t)return{success:!1,message:`Products query error: ${t.message}`,details:t};if(!e||e.length===0)return{success:!1,message:"No active products found in database"};const r=e.reduce((c,d)=>{var u;const m=((u=d.categories)==null?void 0:u.slug)||"unknown";return c[m]||(c[m]=[]),c[m].push(d),c},{}),s=["matrimoni","fiori-piante","fiori-finti","funerali"],a=Object.keys(r),i=s.filter(c=>!a.includes(c)),o=e.filter(c=>!c.categories);let l=[];return i.length>0&&l.push(`Categories without products: ${i.join(", ")}`),o.length>0&&l.push(`${o.length} products missing category links`),{success:l.length===0,message:l.length===0?`Found ${e.length} active products across ${a.length} categories`:`Found ${e.length} products but with issues: ${l.join("; ")}`,details:{totalProducts:e.length,productsByCategory:Object.keys(r).map(c=>({category:c,count:r[c].length})),warnings:l}}}catch(e){return{success:!1,message:`Products verification error: ${e.message}`,details:e}}}async function p2(){console.log("[VerifyDB] Starting comprehensive database verification...");const e=await m2(),t=await f2(),r=e.success&&t.success;return console.log("[VerifyDB] Verification complete:",{categories:e.success,products:t.success,overall:r}),{categories:e,products:t,overall:r}}const h2=()=>{const[e,t]=b.useState(!1),[r,s]=b.useState(!1),[a,i]=b.useState(null),{toast:o}=Ee(),l=async()=>{t(!0);try{console.log("[DatabaseSetup] Starting database initialization..."),await ni()?(o({title:"Success! ",description:"Database initialized successfully with all categories and products"}),await c()):o({title:"Initialization Failed",description:"Failed to initialize database. Check console for details.",variant:"destructive"})}catch(m){console.error("[DatabaseSetup] Initialization error:",m),o({title:"Error",description:`Database initialization failed: ${m.message}`,variant:"destructive"})}finally{t(!1)}},c=async()=>{s(!0);try{console.log("[DatabaseSetup] Verifying database state...");const m=await p2();i(m),m.overall?o({title:"Database Verified ",description:"All categories and products are properly configured"}):o({title:"Database Issues Found",description:"Some issues were found. Check the details below.",variant:"destructive"})}catch(m){console.error("[DatabaseSetup] Verification error:",m),o({title:"Verification Failed",description:`Failed to verify database: ${m.message}`,variant:"destructive"})}finally{s(!1)}},d=({success:m,label:u})=>n.jsxs(Ue,{variant:m?"default":"destructive",className:"flex items-center gap-1",children:[m?n.jsx(Ke,{className:"h-3 w-3"}):n.jsx(Gn,{className:"h-3 w-3"}),u]});return n.jsxs(ie,{className:"w-full max-w-2xl mx-auto",children:[n.jsxs(xe,{children:[n.jsxs(be,{className:"flex items-center gap-2",children:[n.jsx(en,{className:"h-5 w-5"}),"Database Setup & Verification"]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Initialize and verify the backend database for the Products section"})]}),n.jsxs(oe,{className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsx(z,{onClick:l,disabled:e||r,className:"flex-1",children:e?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Initializing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ig,{className:"mr-2 h-4 w-4"}),"Initialize Database"]})}),n.jsx(z,{onClick:c,disabled:e||r,variant:"outline",className:"flex-1",children:r?n.jsxs(n.Fragment,{children:[n.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Verify Database"]})})]}),a&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Database Status"}),n.jsx(d,{success:a.overall,label:a.overall?"All Good":"Issues Found"})]}),n.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Un,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Categories"})]}),n.jsx(d,{success:a.categories.success,label:a.categories.success?"OK":"Issues"})]}),n.jsx("p",{className:"text-sm text-gray-600",children:a.categories.message}),a.categories.details&&n.jsx("div",{className:"text-xs bg-gray-50 p-2 rounded",children:n.jsx("pre",{children:JSON.stringify(a.categories.details,null,2)})})]}),n.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ft,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Products"})]}),n.jsx(d,{success:a.products.success,label:a.products.success?"OK":"Issues"})]}),n.jsx("p",{className:"text-sm text-gray-600",children:a.products.message}),a.products.details&&n.jsx("div",{className:"text-xs bg-gray-50 p-2 rounded",children:n.jsx("pre",{children:JSON.stringify(a.products.details,null,2)})})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Setup Instructions:"}),n.jsxs("ol",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:'1. Click "Initialize Database" to create categories and products'}),n.jsx("li",{children:'2. Click "Verify Database" to check the current state'}),n.jsx("li",{children:"3. Check that all 4 categories exist: Matrimoni, Fiori & Piante, Fiori Finti, Funerali"}),n.jsx("li",{children:"4. Verify that products are properly linked to categories"}),n.jsx("li",{children:"5. Go to the Products section to see the results"})]})]})]})]})},g2=new Rb,v2=()=>n.jsx(lt,{componentName:"App",children:n.jsx(Lb,{client:g2,children:n.jsx(gb,{children:n.jsxs(Qb,{children:[n.jsx(ty,{}),n.jsx(pv,{}),n.jsx(Gv,{}),n.jsx(Vh,{children:n.jsxs(Wh,{children:[n.jsx(Xt,{path:"/",element:n.jsx(lt,{componentName:"Index",children:n.jsx(u0,{})})}),n.jsx(Xt,{path:"/admin",element:n.jsx(lt,{componentName:"Admin",children:n.jsx(e2,{})})}),n.jsx(Xt,{path:"/order",element:n.jsx(lt,{componentName:"Order",children:n.jsx(r2,{})})}),n.jsx(Xt,{path:"/orders",element:n.jsx(lt,{componentName:"OrderDashboard",children:n.jsx(i2,{})})}),n.jsx(Xt,{path:"/menu",element:n.jsx(lt,{componentName:"MenuPage",children:n.jsx(l2,{})})}),n.jsx(Xt,{path:"/payment/success",element:n.jsx(lt,{componentName:"PaymentSuccess",children:n.jsx(d2,{})})}),n.jsx(Xt,{path:"/payment/cancel",element:n.jsx(lt,{componentName:"PaymentCancel",children:n.jsx(u2,{})})}),n.jsx(Xt,{path:"/database-setup",element:n.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:n.jsx(lt,{componentName:"DatabaseSetup",children:n.jsx(h2,{})})})}),n.jsx(Xt,{path:"*",element:n.jsx(c2,{})})]})}),n.jsx(ey,{})]})})})});eu(document.getElementById("root")).render(n.jsx(v2,{}));
